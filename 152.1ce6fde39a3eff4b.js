(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[152],{2402:function(St){St.exports=function(){"use strict";function rt(i,c,S,s,d){!function u(r,a,O,M,A){for(;M>O;){if(M-O>600){var w=M-O+1,k=a-O+1,g=Math.log(w),D=.5*Math.exp(2*g/3),F=.5*Math.sqrt(g*D*(w-D)/w)*(k-w/2<0?-1:1);u(r,a,Math.max(O,Math.floor(a-k*D/w+F)),Math.min(M,Math.floor(a+(w-k)*D/w+F)),A)}var st=r[a],$=O,ht=M;for(E(r,O,a),A(r[M],st)>0&&E(r,O,M);$<ht;){for(E(r,$,ht),$++,ht--;A(r[$],st)<0;)$++;for(;A(r[ht],st)>0;)ht--}0===A(r[O],st)?E(r,O,ht):E(r,++ht,M),ht<=a&&(O=ht+1),a<=ht&&(M=ht-1)}}(i,c,S||0,s||i.length-1,d||j)}function E(i,c,S){var s=i[c];i[c]=i[S],i[S]=s}function j(i,c){return i<c?-1:i>c?1:0}var Z=function(i){void 0===i&&(i=9),this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function H(i,c,S){if(!S)return c.indexOf(i);for(var s=0;s<c.length;s++)if(S(i,c[s]))return s;return-1}function T(i,c){X(i,0,i.children.length,c,i)}function X(i,c,S,s,d){d||(d=n(null)),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0;for(var u=c;u<S;u++){var r=i.children[u];R(d,i.leaf?s(r):r)}return d}function R(i,c){return i.minX=Math.min(i.minX,c.minX),i.minY=Math.min(i.minY,c.minY),i.maxX=Math.max(i.maxX,c.maxX),i.maxY=Math.max(i.maxY,c.maxY),i}function at(i,c){return i.minX-c.minX}function U(i,c){return i.minY-c.minY}function b(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function f(i){return i.maxX-i.minX+(i.maxY-i.minY)}function y(i,c){return i.minX<=c.minX&&i.minY<=c.minY&&c.maxX<=i.maxX&&c.maxY<=i.maxY}function Y(i,c){return c.minX<=i.maxX&&c.minY<=i.maxY&&c.maxX>=i.minX&&c.maxY>=i.minY}function n(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(i,c,S,s,d){for(var u=[c,S];u.length;)if(!((S=u.pop())-(c=u.pop())<=s)){var r=c+Math.ceil((S-c)/s/2)*s;rt(i,r,c,S,d),u.push(c,r,r,S)}}return Z.prototype.all=function(){return this._all(this.data,[])},Z.prototype.search=function(i){var c=this.data,S=[];if(!Y(i,c))return S;for(var s=this.toBBox,d=[];c;){for(var u=0;u<c.children.length;u++){var r=c.children[u],a=c.leaf?s(r):r;Y(i,a)&&(c.leaf?S.push(r):y(i,a)?this._all(r,S):d.push(r))}c=d.pop()}return S},Z.prototype.collides=function(i){var c=this.data;if(!Y(i,c))return!1;for(var S=[];c;){for(var s=0;s<c.children.length;s++){var d=c.children[s],u=c.leaf?this.toBBox(d):d;if(Y(i,u)){if(c.leaf||y(i,u))return!0;S.push(d)}}c=S.pop()}return!1},Z.prototype.load=function(i){if(!i||!i.length)return this;if(i.length<this._minEntries){for(var c=0;c<i.length;c++)this.insert(i[c]);return this}var S=this._build(i.slice(),0,i.length-1,0);if(this.data.children.length)if(this.data.height===S.height)this._splitRoot(this.data,S);else{if(this.data.height<S.height){var s=this.data;this.data=S,S=s}this._insert(S,this.data.height-S.height-1,!0)}else this.data=S;return this},Z.prototype.insert=function(i){return i&&this._insert(i,this.data.height-1),this},Z.prototype.clear=function(){return this.data=n([]),this},Z.prototype.remove=function(i,c){if(!i)return this;for(var S,s,d,u=this.data,r=this.toBBox(i),a=[],O=[];u||a.length;){if(u||(u=a.pop(),s=a[a.length-1],S=O.pop(),d=!0),u.leaf){var M=H(i,u.children,c);if(-1!==M)return u.children.splice(M,1),a.push(u),this._condense(a),this}d||u.leaf||!y(u,r)?s?(S++,u=s.children[S],d=!1):u=null:(a.push(u),O.push(S),S=0,s=u,u=u.children[0])}return this},Z.prototype.toBBox=function(i){return i},Z.prototype.compareMinX=function(i,c){return i.minX-c.minX},Z.prototype.compareMinY=function(i,c){return i.minY-c.minY},Z.prototype.toJSON=function(){return this.data},Z.prototype.fromJSON=function(i){return this.data=i,this},Z.prototype._all=function(i,c){for(var S=[];i;)i.leaf?c.push.apply(c,i.children):S.push.apply(S,i.children),i=S.pop();return c},Z.prototype._build=function(i,c,S,s){var d,u=S-c+1,r=this._maxEntries;if(u<=r)return T(d=n(i.slice(c,S+1)),this.toBBox),d;s||(s=Math.ceil(Math.log(u)/Math.log(r)),r=Math.ceil(u/Math.pow(r,s-1))),(d=n([])).leaf=!1,d.height=s;var a=Math.ceil(u/r),O=a*Math.ceil(Math.sqrt(r));_(i,c,S,O,this.compareMinX);for(var M=c;M<=S;M+=O){var A=Math.min(M+O-1,S);_(i,M,A,a,this.compareMinY);for(var w=M;w<=A;w+=a){var k=Math.min(w+a-1,A);d.children.push(this._build(i,w,k,s-1))}}return T(d,this.toBBox),d},Z.prototype._chooseSubtree=function(i,c,S,s){for(;s.push(c),!c.leaf&&s.length-1!==S;){for(var d=1/0,u=1/0,r=void 0,a=0;a<c.children.length;a++){var O=c.children[a],M=b(O),A=(w=i,k=O,(Math.max(k.maxX,w.maxX)-Math.min(k.minX,w.minX))*(Math.max(k.maxY,w.maxY)-Math.min(k.minY,w.minY))-M);A<u?(u=A,d=M<d?M:d,r=O):A===u&&M<d&&(d=M,r=O)}c=r||c.children[0]}var w,k;return c},Z.prototype._insert=function(i,c,S){var s=S?i:this.toBBox(i),d=[],u=this._chooseSubtree(s,this.data,c,d);for(u.children.push(i),R(u,s);c>=0&&d[c].children.length>this._maxEntries;)this._split(d,c),c--;this._adjustParentBBoxes(s,d,c)},Z.prototype._split=function(i,c){var S=i[c],s=S.children.length,d=this._minEntries;this._chooseSplitAxis(S,d,s);var u=this._chooseSplitIndex(S,d,s),r=n(S.children.splice(u,S.children.length-u));r.height=S.height,r.leaf=S.leaf,T(S,this.toBBox),T(r,this.toBBox),c?i[c-1].children.push(r):this._splitRoot(S,r)},Z.prototype._splitRoot=function(i,c){this.data=n([i,c]),this.data.height=i.height+1,this.data.leaf=!1,T(this.data,this.toBBox)},Z.prototype._chooseSplitIndex=function(i,c,S){for(var s,d,u,r,a,O,M,A=1/0,w=1/0,k=c;k<=S-c;k++){var g=X(i,0,k,this.toBBox),D=X(i,k,S,this.toBBox),F=(d=g,u=D,void 0,void 0,void 0,void 0,r=Math.max(d.minX,u.minX),a=Math.max(d.minY,u.minY),O=Math.min(d.maxX,u.maxX),M=Math.min(d.maxY,u.maxY),Math.max(0,O-r)*Math.max(0,M-a)),N=b(g)+b(D);F<A?(A=F,s=k,w=N<w?N:w):F===A&&N<w&&(w=N,s=k)}return s||S-c},Z.prototype._chooseSplitAxis=function(i,c,S){var s=i.leaf?this.compareMinX:at,d=i.leaf?this.compareMinY:U;this._allDistMargin(i,c,S,s)<this._allDistMargin(i,c,S,d)&&i.children.sort(s)},Z.prototype._allDistMargin=function(i,c,S,s){i.children.sort(s);for(var d=this.toBBox,u=X(i,0,c,d),r=X(i,S-c,S,d),a=f(u)+f(r),O=c;O<S-c;O++){var M=i.children[O];R(u,i.leaf?d(M):M),a+=f(u)}for(var A=S-c-1;A>=c;A--){var w=i.children[A];R(r,i.leaf?d(w):w),a+=f(r)}return a},Z.prototype._adjustParentBBoxes=function(i,c,S){for(var s=S;s>=0;s--)R(c[s],i)},Z.prototype._condense=function(i){for(var c=i.length-1,S=void 0;c>=0;c--)0===i[c].children.length?c>0?(S=i[c-1].children).splice(S.indexOf(i[c]),1):this.clear():T(i[c],this.toBBox)},Z}()},3171:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>at});var j=E(3632),Z=E(9972),H=E(1911),T=E(1729);class X extends j.Z{constructor(b){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),b&&("function"==typeof b.getSimplifiedGeometry?this.setGeometry(b):this.setProperties(b))}clone(){const b=new X(this.hasProperties()?this.getProperties():null);b.setGeometryName(this.getGeometryName());const f=this.getGeometry();f&&b.setGeometry(f.clone());const y=this.getStyle();return y&&b.setStyle(y),b}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,T.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const b=this.getGeometry();b&&(this.geometryChangeKey_=(0,T.oL)(b,Z.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(b){this.set(this.geometryName_,b)}setStyle(b){this.style_=b,this.styleFunction_=b?function R(U){if("function"==typeof U)return U;let b;return Array.isArray(U)?b=U:((0,H.h)("function"==typeof U.getZIndex,41),b=[U]),function(){return b}}(b):void 0,this.changed()}setId(b){this.id_=b,this.changed()}setGeometryName(b){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=b,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const at=X},5813:(St,rt,E)=>{"use strict";E.d(rt,{y:()=>Z});var j=E(3783);function Z(H){return Array.isArray(H)?(0,j.BB)(H):H}},3343:(St,rt,E)=>{"use strict";function j(H,T,X,R){let at=H[T],U=H[T+1],b=0;for(let f=T+R;f<X;f+=R){const y=H[f],Y=H[f+1];b+=Math.sqrt((y-at)*(y-at)+(Y-U)*(Y-U)),at=y,U=Y}return b}E.d(rt,{W:()=>j})},6107:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>u});var j=E(4593),Z=E(2402),H=E(109),T=E(7392),X=E(5044),R=E(9570),at=E(8225),U=E(6785),b=E(1750);class y{constructor(a){this.font_=(a=a||{}).font,this.rotation_=a.rotation,this.rotateWithView_=a.rotateWithView,this.scale_=a.scale,this.scaleArray_=(0,b.Pq)(void 0!==a.scale?a.scale:1),this.text_=a.text,this.textAlign_=a.textAlign,this.justify_=a.justify,this.textBaseline_=a.textBaseline,this.fill_=void 0!==a.fill?a.fill:new X.Z({color:"#333"}),this.maxAngle_=void 0!==a.maxAngle?a.maxAngle:Math.PI/4,this.placement_=void 0!==a.placement?a.placement:"point",this.overflow_=!!a.overflow,this.stroke_=void 0!==a.stroke?a.stroke:null,this.offsetX_=void 0!==a.offsetX?a.offsetX:0,this.offsetY_=void 0!==a.offsetY?a.offsetY:0,this.backgroundFill_=a.backgroundFill?a.backgroundFill:null,this.backgroundStroke_=a.backgroundStroke?a.backgroundStroke:null,this.padding_=void 0===a.padding?null:a.padding}clone(){const a=this.getScale();return new y({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(a)?a.slice():a,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(a){this.overflow_=a}setFont(a){this.font_=a}setMaxAngle(a){this.maxAngle_=a}setOffsetX(a){this.offsetX_=a}setOffsetY(a){this.offsetY_=a}setPlacement(a){this.placement_=a}setRotateWithView(a){this.rotateWithView_=a}setFill(a){this.fill_=a}setRotation(a){this.rotation_=a}setScale(a){this.scale_=a,this.scaleArray_=(0,b.Pq)(void 0!==a?a:1)}setStroke(a){this.stroke_=a}setText(a){this.text_=a}setTextAlign(a){this.textAlign_=a}setJustify(a){this.justify_=a}setTextBaseline(a){this.textBaseline_=a}setBackgroundFill(a){this.backgroundFill_=a}setBackgroundStroke(a){this.backgroundStroke_=a}setPadding(a){this.padding_=a}}const Y=y;function n(r){return new H.ZP({fill:_(r,""),stroke:i(r,""),text:c(r),image:S(r)})}function _(r,a){const O=r[a+"fill-color"];if(O)return new X.Z({color:O})}function i(r,a){const O=r[a+"stroke-width"],M=r[a+"stroke-color"];if(O||M)return new U.Z({width:O,color:M,lineCap:r[a+"stroke-line-cap"],lineJoin:r[a+"stroke-line-join"],lineDash:r[a+"stroke-line-dash"],lineDashOffset:r[a+"stroke-line-dash-offset"],miterLimit:r[a+"stroke-miter-limit"]})}function c(r){const a=r["text-value"];return a?new Y({text:a,font:r["text-font"],maxAngle:r["text-max-angle"],offsetX:r["text-offset-x"],offsetY:r["text-offset-y"],overflow:r["text-overflow"],placement:r["text-placement"],scale:r["text-scale"],rotateWithView:r["text-rotate-with-view"],rotation:r["text-rotation"],textAlign:r["text-align"],justify:r["text-justify"],textBaseline:r["text-baseline"],padding:r["text-padding"],fill:_(r,"text-"),backgroundFill:_(r,"text-background-"),stroke:i(r,"text-"),backgroundStroke:i(r,"text-background-")}):void 0}function S(r){const a=r["icon-src"],O=r["icon-img"];if(a||O)return new R.Z({src:a,img:O,imgSize:r["icon-img-size"],anchor:r["icon-anchor"],anchorOrigin:r["icon-anchor-origin"],anchorXUnits:r["icon-anchor-x-units"],anchorYUnits:r["icon-anchor-y-units"],color:r["icon-color"],crossOrigin:r["icon-cross-origin"],offset:r["icon-offset"],displacement:r["icon-displacement"],opacity:r["icon-opacity"],scale:r["icon-scale"],rotation:r["icon-rotation"],rotateWithView:r["icon-rotate-with-view"],size:r["icon-size"],declutterMode:r["icon-declutter-mode"]});const M=r["shape-points"];if(M){const w="shape-";return new at.Z({points:M,fill:_(r,w),stroke:i(r,w),radius:r["shape-radius"],radius1:r["shape-radius1"],radius2:r["shape-radius2"],angle:r["shape-angle"],displacement:r["shape-displacement"],rotation:r["shape-rotation"],rotateWithView:r["shape-rotate-with-view"],scale:r["shape-scale"],declutterMode:r["shape-declutter-mode"]})}const A=r["circle-radius"];if(A){const w="circle-";return new T.Z({radius:A,fill:_(r,w),stroke:i(r,w),displacement:r["circle-displacement"],scale:r["circle-scale"],rotation:r["circle-rotation"],rotateWithView:r["circle-rotate-with-view"],declutterMode:r["circle-declutter-mode"]})}}const u=class d extends j.Z{constructor(a){a=a||{};const O=Object.assign({},a);delete O.style,delete O.renderBuffer,delete O.updateWhileAnimating,delete O.updateWhileInteracting,super(O),this.declutter_=void 0!==a.declutter&&a.declutter,this.renderBuffer_=void 0!==a.renderBuffer?a.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(a.style),this.updateWhileAnimating_=void 0!==a.updateWhileAnimating&&a.updateWhileAnimating,this.updateWhileInteracting_=void 0!==a.updateWhileInteracting&&a.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(a){return super.getFeatures(a)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(a){a.declutterTree||(a.declutterTree=new Z(9)),this.getRenderer().renderDeclutter(a)}setRenderOrder(a){this.set("renderOrder",a)}setStyle(a){let O;if(void 0===a)O=H.yF;else if(null===a)O=null;else if("function"==typeof a)O=a;else if(a instanceof H.ZP)O=a;else if(Array.isArray(a)){const M=a.length,A=new Array(M);for(let w=0;w<M;++w){const k=a[w];A[w]=k instanceof H.ZP?k:n(k)}O=A}else O=n(a);this.style_=O,this.styleFunction_=null===a?void 0:(0,H.J$)(this.style_),this.changed()}}},7639:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>Z});const Z=class j{drawCustom(T,X,R,at){}drawGeometry(T){}setStyle(T){}drawCircle(T,X){}drawFeature(T,X){}drawGeometryCollection(T,X){}drawLineString(T,X){}drawMultiLineString(T,X){}drawMultiPoint(T,X){}drawMultiPolygon(T,X){}drawPoint(T,X){}drawPolygon(T,X){}drawText(T,X){}setFillStrokeStyle(T,X){}setImageStyle(T,X){}setTextStyle(T,X){}}},3620:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>y});var j=E(7639),Z=E(5813),H=E(483),T=E(4686),X=E(2456),R=E(760),at=E(2156),U=E(874),b=E(2774);const y=class f extends j.Z{constructor(n,_,i,c,S,s,d){super(),this.context_=n,this.pixelRatio_=_,this.extent_=i,this.transform_=c,this.transformRotation_=c?(0,at.FH)(Math.atan2(c[1],c[0]),10):0,this.viewRotation_=S,this.squaredTolerance_=s,this.userTransform_=d,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,H.Ue)()}drawImages_(n,_,i,c){if(!this.image_)return;const S=(0,U.vT)(n,_,i,c,this.transform_,this.pixelCoordinates_),s=this.context_,d=this.tmpLocalTransform_,u=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=u*this.imageOpacity_);let r=this.imageRotation_;0===this.transformRotation_&&(r-=this.viewRotation_),this.imageRotateWithView_&&(r+=this.viewRotation_);for(let a=0,O=S.length;a<O;a+=2){const M=S[a]-this.imageAnchorX_,A=S[a+1]-this.imageAnchorY_;if(0!==r||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const w=M+this.imageAnchorX_,k=A+this.imageAnchorY_;(0,H.qC)(d,w,k,1,1,r,-w,-k),s.setTransform.apply(s,d),s.translate(w,k),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,M,A,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=u)}drawText_(n,_,i,c){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const S=(0,U.vT)(n,_,i,c,this.transform_,this.pixelCoordinates_),s=this.context_;let d=this.textRotation_;for(0===this.transformRotation_&&(d-=this.viewRotation_),this.textRotateWithView_&&(d+=this.viewRotation_);_<i;_+=c){const u=S[_]+this.textOffsetX_,r=S[_+1]+this.textOffsetY_;0!==d||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.translate(u-this.textOffsetX_,r-this.textOffsetY_),s.rotate(d),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&s.strokeText(this.text_,u,r),this.textFillState_&&s.fillText(this.text_,u,r))}}moveToLineTo_(n,_,i,c,S){const s=this.context_,d=(0,U.vT)(n,_,i,c,this.transform_,this.pixelCoordinates_);s.moveTo(d[0],d[1]);let u=d.length;S&&(u-=2);for(let r=2;r<u;r+=2)s.lineTo(d[r],d[r+1]);return S&&s.closePath(),i}drawRings_(n,_,i,c){for(let S=0,s=i.length;S<s;++S)_=this.moveToLineTo_(n,_,i[S],c,!0);return _}drawCircle(n){if((0,R.kK)(this.extent_,n.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const _=(0,b.Kr)(n,this.transform_,this.pixelCoordinates_),i=_[2]-_[0],c=_[3]-_[1],S=Math.sqrt(i*i+c*c),s=this.context_;s.beginPath(),s.arc(_[0],_[1],S,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(n.getCenter(),0,2,2)}}setStyle(n){this.setFillStrokeStyle(n.getFill(),n.getStroke()),this.setImageStyle(n.getImage()),this.setTextStyle(n.getText())}setTransform(n){this.transform_=n}drawGeometry(n){switch(n.getType()){case"Point":this.drawPoint(n);break;case"LineString":this.drawLineString(n);break;case"Polygon":this.drawPolygon(n);break;case"MultiPoint":this.drawMultiPoint(n);break;case"MultiLineString":this.drawMultiLineString(n);break;case"MultiPolygon":this.drawMultiPolygon(n);break;case"GeometryCollection":this.drawGeometryCollection(n);break;case"Circle":this.drawCircle(n)}}drawFeature(n,_){const i=_.getGeometryFunction()(n);!i||!(0,R.kK)(this.extent_,i.getExtent())||(this.setStyle(_),this.drawGeometry(i))}drawGeometryCollection(n){const _=n.getGeometriesArray();for(let i=0,c=_.length;i<c;++i)this.drawGeometry(_[i])}drawPoint(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const _=n.getFlatCoordinates(),i=n.getStride();this.image_&&this.drawImages_(_,0,_.length,i),""!==this.text_&&this.drawText_(_,0,_.length,i)}drawMultiPoint(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const _=n.getFlatCoordinates(),i=n.getStride();this.image_&&this.drawImages_(_,0,_.length,i),""!==this.text_&&this.drawText_(_,0,_.length,i)}drawLineString(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,n.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const _=this.context_,i=n.getFlatCoordinates();_.beginPath(),this.moveToLineTo_(i,0,i.length,n.getStride(),!1),_.stroke()}if(""!==this.text_){const _=n.getFlatMidpoint();this.drawText_(_,0,2,2)}}}drawMultiLineString(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const _=n.getExtent();if((0,R.kK)(this.extent_,_)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,c=n.getFlatCoordinates();let S=0;const s=n.getEnds(),d=n.getStride();i.beginPath();for(let u=0,r=s.length;u<r;++u)S=this.moveToLineTo_(c,S,s[u],d,!1);i.stroke()}if(""!==this.text_){const i=n.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,n.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const _=this.context_;_.beginPath(),this.drawRings_(n.getOrientedFlatCoordinates(),0,n.getEnds(),n.getStride()),this.fillState_&&_.fill(),this.strokeState_&&_.stroke()}if(""!==this.text_){const _=n.getFlatInteriorPoint();this.drawText_(_,0,2,2)}}}drawMultiPolygon(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,n.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const _=this.context_,i=n.getOrientedFlatCoordinates();let c=0;const S=n.getEndss(),s=n.getStride();_.beginPath();for(let d=0,u=S.length;d<u;++d)c=this.drawRings_(i,c,S[d],s);this.fillState_&&_.fill(),this.strokeState_&&_.stroke()}if(""!==this.text_){const _=n.getFlatInteriorPoints();this.drawText_(_,0,_.length,2)}}}setContextFillState_(n){const _=this.context_,i=this.contextFillState_;i?i.fillStyle!=n.fillStyle&&(i.fillStyle=n.fillStyle,_.fillStyle=n.fillStyle):(_.fillStyle=n.fillStyle,this.contextFillState_={fillStyle:n.fillStyle})}setContextStrokeState_(n){const _=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=n.lineCap&&(i.lineCap=n.lineCap,_.lineCap=n.lineCap),(0,X.fS)(i.lineDash,n.lineDash)||_.setLineDash(i.lineDash=n.lineDash),i.lineDashOffset!=n.lineDashOffset&&(i.lineDashOffset=n.lineDashOffset,_.lineDashOffset=n.lineDashOffset),i.lineJoin!=n.lineJoin&&(i.lineJoin=n.lineJoin,_.lineJoin=n.lineJoin),i.lineWidth!=n.lineWidth&&(i.lineWidth=n.lineWidth,_.lineWidth=n.lineWidth),i.miterLimit!=n.miterLimit&&(i.miterLimit=n.miterLimit,_.miterLimit=n.miterLimit),i.strokeStyle!=n.strokeStyle&&(i.strokeStyle=n.strokeStyle,_.strokeStyle=n.strokeStyle)):(_.lineCap=n.lineCap,_.setLineDash(n.lineDash),_.lineDashOffset=n.lineDashOffset,_.lineJoin=n.lineJoin,_.lineWidth=n.lineWidth,_.miterLimit=n.miterLimit,_.strokeStyle=n.strokeStyle,this.contextStrokeState_={lineCap:n.lineCap,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset,lineJoin:n.lineJoin,lineWidth:n.lineWidth,miterLimit:n.miterLimit,strokeStyle:n.strokeStyle})}setContextTextState_(n){const _=this.context_,i=this.contextTextState_,c=n.textAlign?n.textAlign:T.PH;i?(i.font!=n.font&&(i.font=n.font,_.font=n.font),i.textAlign!=c&&(i.textAlign=c,_.textAlign=c),i.textBaseline!=n.textBaseline&&(i.textBaseline=n.textBaseline,_.textBaseline=n.textBaseline)):(_.font=n.font,_.textAlign=c,_.textBaseline=n.textBaseline,this.contextTextState_={font:n.font,textAlign:c,textBaseline:n.textBaseline})}setFillStrokeStyle(n,_){if(n){const i=n.getColor();this.fillState_={fillStyle:(0,Z.y)(i||T.bL)}}else this.fillState_=null;if(_){const i=_.getColor(),c=_.getLineCap(),S=_.getLineDash(),s=_.getLineDashOffset(),d=_.getLineJoin(),u=_.getWidth(),r=_.getMiterLimit(),a=S||T.X9;this.strokeState_={lineCap:void 0!==c?c:T.mb,lineDash:1===this.pixelRatio_?a:a.map(O=>O*this.pixelRatio_),lineDashOffset:(s||T.He)*this.pixelRatio_,lineJoin:void 0!==d?d:T.rc,lineWidth:(void 0!==u?u:T.yC)*this.pixelRatio_,miterLimit:void 0!==r?r:T.V4,strokeStyle:(0,Z.y)(i||T.Tx)}}else this.strokeState_=null}setImageStyle(n){let _;if(!n||!(_=n.getSize()))return void(this.image_=null);const i=n.getPixelRatio(this.pixelRatio_),c=n.getAnchor(),S=n.getOrigin();this.image_=n.getImage(this.pixelRatio_),this.imageAnchorX_=c[0]*i,this.imageAnchorY_=c[1]*i,this.imageHeight_=_[1]*i,this.imageOpacity_=n.getOpacity(),this.imageOriginX_=S[0],this.imageOriginY_=S[1],this.imageRotateWithView_=n.getRotateWithView(),this.imageRotation_=n.getRotation();const s=n.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=_[0]*i}setTextStyle(n){if(n){const _=n.getFill();if(_){const A=_.getColor();this.textFillState_={fillStyle:(0,Z.y)(A||T.bL)}}else this.textFillState_=null;const i=n.getStroke();if(i){const A=i.getColor(),w=i.getLineCap(),k=i.getLineDash(),g=i.getLineDashOffset(),D=i.getLineJoin(),F=i.getWidth(),N=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==w?w:T.mb,lineDash:k||T.X9,lineDashOffset:g||T.He,lineJoin:void 0!==D?D:T.rc,lineWidth:void 0!==F?F:T.yC,miterLimit:void 0!==N?N:T.V4,strokeStyle:(0,Z.y)(A||T.Tx)}}else this.textStrokeState_=null;const c=n.getFont(),S=n.getOffsetX(),s=n.getOffsetY(),d=n.getRotateWithView(),u=n.getRotation(),r=n.getScaleArray(),a=n.getText(),O=n.getTextAlign(),M=n.getTextBaseline();this.textState_={font:void 0!==c?c:T.Df,textAlign:void 0!==O?O:T.PH,textBaseline:void 0!==M?M:T.ru},this.text_=void 0!==a?Array.isArray(a)?a.reduce((A,w,k)=>A+(k%2?" ":w),""):a:"",this.textOffsetX_=void 0!==S?this.pixelRatio_*S:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==u?u:0,this.textScale_=[this.pixelRatio_*r[0],this.pixelRatio_*r[1]]}else this.text_=""}}},5513:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>Ge});const j={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Z=[j.FILL],H=[j.STROKE],T=[j.BEGIN_PATH],X=[j.CLOSE_PATH],R=j;var at=E(2401),U=E(7639),b=E(5813),f=E(760),y=E(4686),Y=E(2456),n=E(392);const i=class _ extends U.Z{constructor(t,o,e,h){super(),this.tolerance=t,this.maxExtent=o,this.pixelRatio=h,this.maxLineWidth=0,this.resolution=e,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const o=this.pixelRatio;return 1==o?t:t.map(function(e){return e*o})}appendFlatPointCoordinates(t,o){const e=this.getBufferedMaxExtent(),h=this.tmpCoordinate_,l=this.coordinates;let m=l.length;for(let x=0,p=t.length;x<p;x+=o)h[0]=t[x],h[1]=t[x+1],(0,f.b8)(e,h)&&(l[m++]=h[0],l[m++]=h[1]);return m}appendFlatLineCoordinates(t,o,e,h,l,m){const x=this.coordinates;let p=x.length;const I=this.getBufferedMaxExtent();m&&(o+=h);let C=t[o],L=t[o+1];const v=this.tmpCoordinate_;let B,z,P,W=!0;for(B=o+h;B<e;B+=h)v[0]=t[B],v[1]=t[B+1],P=(0,f.pX)(I,v),P!==z?(W&&(x[p++]=C,x[p++]=L,W=!1),x[p++]=v[0],x[p++]=v[1]):P===at.Z.INTERSECTING?(x[p++]=v[0],x[p++]=v[1],W=!1):W=!0,C=v[0],L=v[1],z=P;return(l&&W||B===o+h)&&(x[p++]=C,x[p++]=L),p}drawCustomCoordinates_(t,o,e,h,l){for(let m=0,x=e.length;m<x;++m){const p=e[m],I=this.appendFlatLineCoordinates(t,o,p,h,!1,!1);l.push(I),o=p}return o}drawCustom(t,o,e,h){this.beginGeometry(t,o);const l=t.getType(),m=t.getStride(),x=this.coordinates.length;let p,I,C,L,v;switch(l){case"MultiPolygon":p=t.getOrientedFlatCoordinates(),L=[];const W=t.getEndss();v=0;for(let B=0,z=W.length;B<z;++B){const P=[];v=this.drawCustomCoordinates_(p,v,W[B],m,P),L.push(P)}this.instructions.push([R.CUSTOM,x,L,t,e,n.ug]),this.hitDetectionInstructions.push([R.CUSTOM,x,L,t,h||e,n.ug]);break;case"Polygon":case"MultiLineString":C=[],p="Polygon"==l?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),v=this.drawCustomCoordinates_(p,0,t.getEnds(),m,C),this.instructions.push([R.CUSTOM,x,C,t,e,n.o1]),this.hitDetectionInstructions.push([R.CUSTOM,x,C,t,h||e,n.o1]);break;case"LineString":case"Circle":p=t.getFlatCoordinates(),I=this.appendFlatLineCoordinates(p,0,p.length,m,!1,!1),this.instructions.push([R.CUSTOM,x,I,t,e,n.Ml]),this.hitDetectionInstructions.push([R.CUSTOM,x,I,t,h||e,n.Ml]);break;case"MultiPoint":p=t.getFlatCoordinates(),I=this.appendFlatPointCoordinates(p,m),I>x&&(this.instructions.push([R.CUSTOM,x,I,t,e,n.Ml]),this.hitDetectionInstructions.push([R.CUSTOM,x,I,t,h||e,n.Ml]));break;case"Point":p=t.getFlatCoordinates(),this.coordinates.push(p[0],p[1]),I=this.coordinates.length,this.instructions.push([R.CUSTOM,x,I,t,e]),this.hitDetectionInstructions.push([R.CUSTOM,x,I,t,h||e])}this.endGeometry(o)}beginGeometry(t,o){this.beginGeometryInstruction1_=[R.BEGIN_GEOMETRY,o,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[R.BEGIN_GEOMETRY,o,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let o;t.reverse();const e=t.length;let h,l,m=-1;for(o=0;o<e;++o)h=t[o],l=h[0],l==R.END_GEOMETRY?m=o:l==R.BEGIN_GEOMETRY&&(h[2]=o,(0,Y.FZ)(this.hitDetectionInstructions,m,o),m=-1)}setFillStrokeStyle(t,o){const e=this.state;if(t){const h=t.getColor();e.fillStyle=(0,b.y)(h||y.bL)}else e.fillStyle=void 0;if(o){const h=o.getColor();e.strokeStyle=(0,b.y)(h||y.Tx);const l=o.getLineCap();e.lineCap=void 0!==l?l:y.mb;const m=o.getLineDash();e.lineDash=m?m.slice():y.X9;const x=o.getLineDashOffset();e.lineDashOffset=x||y.He;const p=o.getLineJoin();e.lineJoin=void 0!==p?p:y.rc;const I=o.getWidth();e.lineWidth=void 0!==I?I:y.yC;const C=o.getMiterLimit();e.miterLimit=void 0!==C?C:y.V4,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0}createFill(t){const o=t.fillStyle,e=[R.SET_FILL_STYLE,o];return"string"!=typeof o&&e.push(!0),e}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[R.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,o){const e=t.fillStyle;("string"!=typeof e||t.currentFillStyle!=e)&&(void 0!==e&&this.instructions.push(o.call(this,t)),t.currentFillStyle=e)}updateStrokeStyle(t,o){const e=t.strokeStyle,h=t.lineCap,l=t.lineDash,m=t.lineDashOffset,x=t.lineJoin,p=t.lineWidth,I=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=h||l!=t.currentLineDash&&!(0,Y.fS)(t.currentLineDash,l)||t.currentLineDashOffset!=m||t.currentLineJoin!=x||t.currentLineWidth!=p||t.currentMiterLimit!=I)&&(void 0!==e&&o.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=h,t.currentLineDash=l,t.currentLineDashOffset=m,t.currentLineJoin=x,t.currentLineWidth=p,t.currentMiterLimit=I)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const o=[R.END_GEOMETRY,t];this.instructions.push(o),this.hitDetectionInstructions.push(o)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,f.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,f.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};var u=E(9182);const a=class r extends i{constructor(t,o,e,h){super(t,o,e,h)}drawFlatCoordinatess_(t,o,e,h){const l=this.state,m=void 0!==l.fillStyle,x=void 0!==l.strokeStyle,p=e.length;this.instructions.push(T),this.hitDetectionInstructions.push(T);for(let I=0;I<p;++I){const C=e[I],L=this.coordinates.length,v=this.appendFlatLineCoordinates(t,o,C,h,!0,!x),W=[R.MOVE_TO_LINE_TO,L,v];this.instructions.push(W),this.hitDetectionInstructions.push(W),x&&(this.instructions.push(X),this.hitDetectionInstructions.push(X)),o=C}return m&&(this.instructions.push(Z),this.hitDetectionInstructions.push(Z)),x&&(this.instructions.push(H),this.hitDetectionInstructions.push(H)),o}drawCircle(t,o){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,o),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,y.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const m=t.getFlatCoordinates(),x=t.getStride(),p=this.coordinates.length;this.appendFlatLineCoordinates(m,0,m.length,x,!1,!1);const I=[R.CIRCLE,p];this.instructions.push(T,I),this.hitDetectionInstructions.push(T,I),void 0!==e.fillStyle&&(this.instructions.push(Z),this.hitDetectionInstructions.push(Z)),void 0!==e.strokeStyle&&(this.instructions.push(H),this.hitDetectionInstructions.push(H)),this.endGeometry(o)}drawPolygon(t,o){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,o),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,y.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const m=t.getEnds(),x=t.getOrientedFlatCoordinates(),p=t.getStride();this.drawFlatCoordinatess_(x,0,m,p),this.endGeometry(o)}drawMultiPolygon(t,o){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,o),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,y.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const m=t.getEndss(),x=t.getOrientedFlatCoordinates(),p=t.getStride();let I=0;for(let C=0,L=m.length;C<L;++C)I=this.drawFlatCoordinatess_(x,I,m[C],p);this.endGeometry(o)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const o=this.coordinates;for(let e=0,h=o.length;e<h;++e)o[e]=(0,u.uZ)(o[e],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};var O=E(119);function M(et,t,o,e,h){let C,L,v,W,B,z,P,G,V,J,l=o,m=o,x=0,p=0,I=o;for(L=o;L<e;L+=h){const nt=t[L],q=t[L+1];void 0!==B&&(V=nt-B,J=q-z,W=Math.sqrt(V*V+J*J),void 0!==P&&(p+=v,C=Math.acos((P*V+G*J)/(v*W)),C>et&&(p>x&&(x=p,l=I,m=L),p=0,I=L-h)),v=W,P=V,G=J),B=nt,z=q}return p+=W,p>x?[I,L]:[l,m]}const A={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},g={Circle:a,Default:i,Image:class c extends i{constructor(t,o,e,h){super(t,o,e,h),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,o){if(!this.image_)return;this.beginGeometry(t,o);const e=t.getFlatCoordinates(),h=t.getStride(),l=this.coordinates.length,m=this.appendFlatPointCoordinates(e,h);this.instructions.push([R.DRAW_IMAGE,l,m,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([R.DRAW_IMAGE,l,m,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(o)}drawMultiPoint(t,o){if(!this.image_)return;this.beginGeometry(t,o);const e=t.getFlatCoordinates(),h=t.getStride(),l=this.coordinates.length,m=this.appendFlatPointCoordinates(e,h);this.instructions.push([R.DRAW_IMAGE,l,m,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([R.DRAW_IMAGE,l,m,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(o)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,o){const e=t.getAnchor(),h=t.getSize(),l=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=h[1],this.opacity_=t.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=h[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=o}},LineString:class s extends i{constructor(t,o,e,h){super(t,o,e,h)}drawFlatCoordinates_(t,o,e,h){const l=this.coordinates.length,m=this.appendFlatLineCoordinates(t,o,e,h,!1,!1),x=[R.MOVE_TO_LINE_TO,l,m];return this.instructions.push(x),this.hitDetectionInstructions.push(x),e}drawLineString(t,o){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,o),this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,y.X9,y.He],T);const m=t.getFlatCoordinates(),x=t.getStride();this.drawFlatCoordinates_(m,0,m.length,x),this.hitDetectionInstructions.push(H),this.endGeometry(o)}drawMultiLineString(t,o){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,o),this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],T);const m=t.getEnds(),x=t.getFlatCoordinates(),p=t.getStride();let I=0;for(let C=0,L=m.length;C<L;++C)I=this.drawFlatCoordinates_(x,I,m[C],p);this.hitDetectionInstructions.push(H),this.endGeometry(o)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(H),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(H),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(T)}},Polygon:a,Text:class w extends i{constructor(t,o,e,h){super(t,o,e,h),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,o){const l=this.textState_;if(""===this.text_||!l||!this.textFillState_&&!this.textStrokeState_)return;const m=this.coordinates;let x=m.length;const p=t.getType();let I=null,C=t.getStride();if("line"!==l.placement||"LineString"!=p&&"MultiLineString"!=p&&"Polygon"!=p&&"MultiPolygon"!=p){let L=l.overflow?null:[];switch(p){case"Point":case"MultiPoint":I=t.getFlatCoordinates();break;case"LineString":I=t.getFlatMidpoint();break;case"Circle":I=t.getCenter();break;case"MultiLineString":I=t.getFlatMidpoints(),C=2;break;case"Polygon":I=t.getFlatInteriorPoint(),l.overflow||L.push(I[2]/this.resolution),C=3;break;case"MultiPolygon":const P=t.getFlatInteriorPoints();I=[];for(let G=0,V=P.length;G<V;G+=3)l.overflow||L.push(P[G+2]/this.resolution),I.push(P[G],P[G+1]);if(0===I.length)return;C=2}const v=this.appendFlatPointCoordinates(I,C);if(v===x)return;if(L&&(v-x)/2!=I.length/C){let P=x/2;L=L.filter((G,V)=>{const J=m[2*(P+V)]===I[V*C]&&m[2*(P+V)+1]===I[V*C+1];return J||--P,J})}this.saveTextStates_(),(l.backgroundFill||l.backgroundStroke)&&(this.setFillStrokeStyle(l.backgroundFill,l.backgroundStroke),l.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),l.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,o);let W=l.padding;if(W!=y.oB&&(l.scale[0]<0||l.scale[1]<0)){let P=l.padding[0],G=l.padding[1],V=l.padding[2],J=l.padding[3];l.scale[0]<0&&(G=-G,J=-J),l.scale[1]<0&&(P=-P,V=-V),W=[P,G,V,J]}const B=this.pixelRatio;this.instructions.push([R.DRAW_IMAGE,x,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,W==y.oB?y.oB:W.map(function(P){return P*B}),!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,L]);const z=1/B;this.hitDetectionInstructions.push([R.DRAW_IMAGE,x,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[z,z],NaN,void 0,this.declutterImageWithText_,W,!!l.backgroundFill,!!l.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,L]),this.endGeometry(o)}else{if(!(0,f.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let L;if(I=t.getFlatCoordinates(),"LineString"==p)L=[I.length];else if("MultiLineString"==p)L=t.getEnds();else if("Polygon"==p)L=t.getEnds().slice(0,1);else if("MultiPolygon"==p){const z=t.getEndss();L=[];for(let P=0,G=z.length;P<G;++P)L.push(z[P][0])}this.beginGeometry(t,o);const v=l.textAlign;let B,W=0;for(let z=0,P=L.length;z<P;++z){if(null==v){const V=M(l.maxAngle,I,W,L[z],C);W=V[0],B=V[1]}else B=L[z];for(let V=W;V<B;V+=C)m.push(I[V],I[V+1]);const G=m.length;W=L[z],this.drawChars_(x,G),x=G}this.endGeometry(o)}}saveTextStates_(){const t=this.textStrokeState_,o=this.textState_,e=this.textFillState_,h=this.strokeKey_;t&&(h in this.strokeStates||(this.strokeStates[h]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:o.font,textAlign:o.textAlign||y.PH,justify:o.justify,textBaseline:o.textBaseline||y.ru,scale:o.scale});const m=this.fillKey_;e&&(m in this.fillStates||(this.fillStates[m]={fillStyle:e.fillStyle}))}drawChars_(t,o){const e=this.textStrokeState_,h=this.textState_,l=this.strokeKey_,m=this.textKey_,x=this.fillKey_;this.saveTextStates_();const p=this.pixelRatio,I=A[h.textBaseline],C=this.textOffsetY_*p,L=this.text_,v=e?e.lineWidth*Math.abs(h.scale[0])/2:0;this.instructions.push([R.DRAW_CHARS,t,o,I,h.overflow,x,h.maxAngle,p,C,l,v*p,L,m,1]),this.hitDetectionInstructions.push([R.DRAW_CHARS,t,o,I,h.overflow,x,h.maxAngle,1,C,l,v,L,m,1/p])}setTextStyle(t,o){let e,h,l;if(t){const m=t.getFill();m?(h=this.textFillState_,h||(h={},this.textFillState_=h),h.fillStyle=(0,b.y)(m.getColor()||y.bL)):(h=null,this.textFillState_=h);const x=t.getStroke();if(x){l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const B=x.getLineDash(),z=x.getLineDashOffset(),P=x.getWidth(),G=x.getMiterLimit();l.lineCap=x.getLineCap()||y.mb,l.lineDash=B?B.slice():y.X9,l.lineDashOffset=void 0===z?y.He:z,l.lineJoin=x.getLineJoin()||y.rc,l.lineWidth=void 0===P?y.yC:P,l.miterLimit=void 0===G?y.V4:G,l.strokeStyle=(0,b.y)(x.getColor()||y.Tx)}else l=null,this.textStrokeState_=l;e=this.textState_;const p=t.getFont()||y.Df;(0,y.Qx)(p);const I=t.getScaleArray();e.overflow=t.getOverflow(),e.font=p,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||y.ru,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||y.oB,e.scale=void 0===I?[1,1]:I;const C=t.getOffsetX(),L=t.getOffsetY(),v=t.getRotateWithView(),W=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===C?0:C,this.textOffsetY_=void 0===L?0:L,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===W?0:W,this.strokeKey_=l?("string"==typeof l.strokeStyle?l.strokeStyle:(0,O.sq)(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=h?"string"==typeof h.fillStyle?h.fillStyle:"|"+(0,O.sq)(h.fillStyle):""}else this.text_="";this.declutterImageWithText_=o}}},F=class D{constructor(t,o,e,h){this.tolerance_=t,this.maxExtent_=o,this.pixelRatio_=h,this.resolution_=e,this.buildersByZIndex_={}}finish(){const t={};for(const o in this.buildersByZIndex_){t[o]=t[o]||{};const e=this.buildersByZIndex_[o];for(const h in e){const l=e[h].finish();t[o][h]=l}}return t}getBuilder(t,o){const e=void 0!==t?t.toString():"0";let h=this.buildersByZIndex_[e];void 0===h&&(h={},this.buildersByZIndex_[e]=h);let l=h[o];return void 0===l&&(l=new(0,g[o])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),h[o]=l),l}};var N=E(2121),Q=E(483),st=E(2156),$=E(874);function ht(et,t,o,e,h,l,m,x,p,I,C,L){let v=et[t],W=et[t+1],B=0,z=0,P=0,G=0;function V(){B=v,z=W,v=et[t+=e],W=et[t+1],G+=P,P=Math.sqrt((v-B)*(v-B)+(W-z)*(W-z))}do{V()}while(t<o-e&&G+P<l);let J=0===P?0:(l-G)/P;const nt=(0,st.t7)(B,v,J),q=(0,st.t7)(z,W,J),ct=t-e,ft=G,lt=l+x*p(I,h,C);for(;t<o-e&&G+P<lt;)V();J=0===P?0:(lt-G)/P;const dt=(0,st.t7)(B,v,J),gt=(0,st.t7)(z,W,J);let pt;if(L){const tt=[nt,q,dt,gt];(0,$.U1)(tt,0,4,2,L,tt,tt),pt=tt[0]>tt[2]}else pt=nt>dt;const mt=Math.PI,ut=[],Tt=ct+e===t;let _t;if(P=0,G=ft,v=et[t=ct],W=et[t+1],Tt)return V(),_t=Math.atan2(W-z,v-B),pt&&(_t+=_t>0?-mt:mt),ut[0]=[(dt+nt)/2,(gt+q)/2,(lt-l)/2,_t,h],ut;for(let tt=0,ot=(h=h.replace(/\n/g," ")).length;tt<ot;){V();let it=Math.atan2(W-z,v-B);if(pt&&(it+=it>0?-mt:mt),void 0!==_t){let Ft=it-_t;if(Ft+=Ft>mt?-2*mt:Ft<-mt?2*mt:0,Math.abs(Ft)>m)return null}_t=it;const yt=tt;let Et=0;for(;tt<ot;++tt){const Xt=x*p(I,h[pt?ot-tt-1:tt],C);if(t+e<o&&G+P<l+Et+Xt/2)break;Et+=Xt}if(tt===yt)continue;const At=pt?h.substring(ot-yt,ot-tt):h.substring(yt,tt);J=0===P?0:(l+Et/2-G)/P;const K=(0,st.t7)(B,v,J),ue=(0,st.t7)(z,W,J);ut.push([K,ue,Et/2,it,At]),l+=Et}return ut}var It=E(3343);const xt=(0,f.lJ)(),wt=[],Ct=[],kt=[],Bt=[];function le(et){return et[3].declutterBox}const De=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ce(et,t){return("start"===t||"end"===t)&&!De.test(et)&&(t="start"===t?"left":"right"),A[t]}function ve(et,t,o){return o>0&&et.push("\n",""),et.push(t,""),et}const Le=class Oe{constructor(t,o,e,h){this.overlaps=e,this.pixelRatio=o,this.resolution=t,this.instructions=h.instructions,this.coordinates=h.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Q.Ue)(),this.hitDetectionInstructions=h.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=h.fillStates||{},this.strokeStates=h.strokeStates||{},this.textStates=h.textStates||{},this.widths_={},this.labels_={}}createLabel(t,o,e,h){const l=t+o+e+h;if(this.labels_[l])return this.labels_[l];const m=h?this.strokeStates[h]:null,x=e?this.fillStates[e]:null,p=this.textStates[o],I=this.pixelRatio,C=[p.scale[0]*I,p.scale[1]*I],L=Array.isArray(t),v=p.justify?A[p.justify]:ce(Array.isArray(t)?t[0]:t,p.textAlign||y.PH),W=h&&m.lineWidth?m.lineWidth:0,B=L?t:t.split("\n").reduce(ve,[]),{width:z,height:P,widths:G,heights:V,lineWidths:J}=(0,y.Zw)(p,B),nt=z+W,q=[],ct=(nt+2)*C[0],ft=(P+W)*C[1],lt={width:ct<0?Math.floor(ct):Math.ceil(ct),height:ft<0?Math.floor(ft):Math.ceil(ft),contextInstructions:q};(1!=C[0]||1!=C[1])&&q.push("scale",C),h&&(q.push("strokeStyle",m.strokeStyle),q.push("lineWidth",W),q.push("lineCap",m.lineCap),q.push("lineJoin",m.lineJoin),q.push("miterLimit",m.miterLimit),q.push("setLineDash",[m.lineDash]),q.push("lineDashOffset",m.lineDashOffset)),e&&q.push("fillStyle",x.fillStyle),q.push("textBaseline","middle"),q.push("textAlign","center");const dt=.5-v;let gt=v*nt+dt*W;const pt=[],mt=[];let ot,ut=0,Tt=0,_t=0,tt=0;for(let it=0,yt=B.length;it<yt;it+=2){const Et=B[it];if("\n"===Et){Tt+=ut,ut=0,gt=v*nt+dt*W,++tt;continue}const At=B[it+1]||p.font;At!==ot&&(h&&pt.push("font",At),e&&mt.push("font",At),ot=At),ut=Math.max(ut,V[_t]);const K=[Et,gt+dt*G[_t]+v*(G[_t]-J[tt]),.5*(W+ut)+Tt];gt+=G[_t],h&&pt.push("strokeText",K),e&&mt.push("fillText",K),++_t}return Array.prototype.push.apply(q,pt),Array.prototype.push.apply(q,mt),this.labels_[l]=lt,lt}replayTextBackground_(t,o,e,h,l,m,x){t.beginPath(),t.moveTo.apply(t,o),t.lineTo.apply(t,e),t.lineTo.apply(t,h),t.lineTo.apply(t,l),t.lineTo.apply(t,o),m&&(this.alignFill_=m[2],this.fill_(t)),x&&(this.setStrokeStyle_(t,x),t.stroke())}calculateImageOrLabelDimensions_(t,o,e,h,l,m,x,p,I,C,L,v,W,B,z,P){let G=e-(x*=v[0]),V=h-(p*=v[1]);const J=l+I>t?t-I:l,nt=m+C>o?o-C:m,q=B[3]+J*v[0]+B[1],ct=B[0]+nt*v[1]+B[2],ft=G-B[3],lt=V-B[0];let dt;return(z||0!==L)&&(wt[0]=ft,Bt[0]=ft,wt[1]=lt,Ct[1]=lt,Ct[0]=ft+q,kt[0]=Ct[0],kt[1]=lt+ct,Bt[1]=kt[1]),0!==L?(dt=(0,Q.qC)((0,Q.Ue)(),e,h,1,1,L,-e,-h),(0,Q.nn)(dt,wt),(0,Q.nn)(dt,Ct),(0,Q.nn)(dt,kt),(0,Q.nn)(dt,Bt),(0,f.T9)(Math.min(wt[0],Ct[0],kt[0],Bt[0]),Math.min(wt[1],Ct[1],kt[1],Bt[1]),Math.max(wt[0],Ct[0],kt[0],Bt[0]),Math.max(wt[1],Ct[1],kt[1],Bt[1]),xt)):(0,f.T9)(Math.min(ft,ft+q),Math.min(lt,lt+ct),Math.max(ft,ft+q),Math.max(lt,lt+ct),xt),W&&(G=Math.round(G),V=Math.round(V)),{drawImageX:G,drawImageY:V,drawImageW:J,drawImageH:nt,originX:I,originY:C,declutterBox:{minX:xt[0],minY:xt[1],maxX:xt[2],maxY:xt[3],value:P},canvasTransform:dt,scale:v}}replayImageOrLabel_(t,o,e,h,l,m,x){const I=h.declutterBox,C=t.canvas,L=x?x[2]*h.scale[0]/2:0;return I.minX-L<=C.width/o&&I.maxX+L>=0&&I.minY-L<=C.height/o&&I.maxY+L>=0&&(!(!m&&!x)&&this.replayTextBackground_(t,wt,Ct,kt,Bt,m,x),(0,y._f)(t,h.canvasTransform,l,e,h.originX,h.originY,h.drawImageW,h.drawImageH,h.drawImageX,h.drawImageY,h.scale)),!0}fill_(t){if(this.alignFill_){const o=(0,Q.nn)(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.save(),t.translate(o[0]%e,o[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,o){t.strokeStyle=o[1],t.lineWidth=o[2],t.lineCap=o[3],t.lineJoin=o[4],t.miterLimit=o[5],t.lineDashOffset=o[7],t.setLineDash(o[6])}drawLabelWithPointPlacement_(t,o,e,h){const l=this.textStates[o],m=this.createLabel(t,o,h,e),x=this.strokeStates[e],p=this.pixelRatio,I=ce(Array.isArray(t)?t[0]:t,l.textAlign||y.PH),C=A[l.textBaseline||y.ru],L=x&&x.lineWidth?x.lineWidth:0;return{label:m,anchorX:I*(m.width/p-2*l.scale[0])+2*(.5-I)*L,anchorY:C*m.height/p+2*(.5-C)*L}}execute_(t,o,e,h,l,m,x,p){let I;this.pixelCoordinates_&&(0,Y.fS)(e,this.renderedTransform_)?I=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),I=(0,$.vT)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),(0,Q.lk)(this.renderedTransform_,e));let C=0;const L=h.length;let W,B,z,P,G,V,J,nt,q,ct,ft,lt,v=0,dt=0,gt=0,pt=null,mt=null;const ut=this.coordinateCache_,Tt=this.viewRotation_,_t=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,tt={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Tt},ot=this.instructions!=h||this.overlaps?0:200;let it,yt,Et,At;for(;C<L;){const K=h[C];switch(K[0]){case R.BEGIN_GEOMETRY:it=K[1],At=K[3],it.getGeometry()?void 0===x||(0,f.kK)(x,At.getExtent())?++C:C=K[2]+1:C=K[2];break;case R.BEGIN_PATH:dt>ot&&(this.fill_(t),dt=0),gt>ot&&(t.stroke(),gt=0),!dt&&!gt&&(t.beginPath(),P=NaN,G=NaN),++C;break;case R.CIRCLE:v=K[1];const Ft=I[v],Xt=I[v+1],fe=I[v+2]-Ft,ge=I[v+3]-Xt,_e=Math.sqrt(fe*fe+ge*ge);t.moveTo(Ft+_e,Xt),t.arc(Ft,Xt,_e,0,2*Math.PI,!0),++C;break;case R.CLOSE_PATH:t.closePath(),++C;break;case R.CUSTOM:v=K[1],W=K[2];const ze=K[4],me=6==K.length?K[5]:void 0;tt.geometry=K[3],tt.feature=it,C in ut||(ut[C]=[]);const zt=ut[C];me?me(I,v,W,2,zt):(zt[0]=I[v],zt[1]=I[v+1],zt.length=2),ze(zt,tt),++C;break;case R.DRAW_IMAGE:v=K[1],W=K[2],nt=K[3],B=K[4],z=K[5];let ie=K[6];const Ue=K[7],Ke=K[8],Ne=K[9],xe=K[10];let ne=K[11];const Ve=K[12];let Ht=K[13];const ye=K[14],Ut=K[15];if(!nt&&K.length>=20){q=K[19],ct=K[20],ft=K[21],lt=K[22];const Dt=this.drawLabelWithPointPlacement_(q,ct,ft,lt);nt=Dt.label,K[3]=nt,B=(Dt.anchorX-K[23])*this.pixelRatio,K[4]=B,z=(Dt.anchorY-K[24])*this.pixelRatio,K[5]=z,ie=nt.height,K[6]=ie,Ht=nt.width,K[13]=Ht}let se,re,Jt,Qt;K.length>25&&(se=K[25]),K.length>17?(re=K[16],Jt=K[17],Qt=K[18]):(re=y.oB,Jt=!1,Qt=!1),xe&&_t?ne+=Tt:!xe&&!_t&&(ne-=Tt);let je=0;for(;v<W;v+=2){if(se&&se[je++]<Ht/this.pixelRatio)continue;const Dt=this.calculateImageOrLabelDimensions_(nt.width,nt.height,I[v],I[v+1],Ht,ie,B,z,Ke,Ne,ne,Ve,l,re,Jt||Qt,it),Yt=[t,o,nt,Dt,Ue,Jt?pt:null,Qt?mt:null];if(p){if("none"===ye)continue;if("obstacle"===ye){p.insert(Dt.declutterBox);continue}{let Ot,Pt;if(Ut){const vt=W-v;if(!Ut[vt]){Ut[vt]=Yt;continue}if(Ot=Ut[vt],delete Ut[vt],Pt=le(Ot),p.collides(Pt))continue}if(p.collides(Dt.declutterBox))continue;Ot&&(p.insert(Pt),this.replayImageOrLabel_.apply(this,Ot)),p.insert(Dt.declutterBox)}}this.replayImageOrLabel_.apply(this,Yt)}++C;break;case R.DRAW_CHARS:const pe=K[1],Se=K[2],oe=K[3],He=K[4];lt=K[5];const Je=K[6],Ee=K[7],Ie=K[8];ft=K[9];const ae=K[10];q=K[11],ct=K[12];const Ce=[K[13],K[13]],he=this.textStates[ct],Kt=he.font,Nt=[he.scale[0]*Ee,he.scale[1]*Ee];let Vt;Kt in this.widths_?Vt=this.widths_[Kt]:(Vt={},this.widths_[Kt]=Vt);const Re=(0,It.W)(I,pe,Se,2),Te=Math.abs(Nt[0])*(0,y.Kd)(Kt,q,Vt);if(He||Te<=Re){const Ot=ht(I,pe,Se,2,q,(Re-Te)*A[this.textStates[ct].textAlign],Je,Math.abs(Nt[0]),y.Kd,Kt,Vt,_t?0:this.viewRotation_);t:if(Ot){const Pt=[];let vt,$t,qt,Rt,Lt;if(ft)for(vt=0,$t=Ot.length;vt<$t;++vt){Lt=Ot[vt],qt=Lt[4],Rt=this.createLabel(qt,ct,"",ft),B=Lt[2]+(Nt[0]<0?-ae:ae),z=oe*Rt.height+2*(.5-oe)*ae*Nt[1]/Nt[0]-Ie;const Wt=this.calculateImageOrLabelDimensions_(Rt.width,Rt.height,Lt[0],Lt[1],Rt.width,Rt.height,B,z,0,0,Lt[3],Ce,!1,y.oB,!1,it);if(p&&p.collides(Wt.declutterBox))break t;Pt.push([t,o,Rt,Wt,1,null,null])}if(lt)for(vt=0,$t=Ot.length;vt<$t;++vt){Lt=Ot[vt],qt=Lt[4],Rt=this.createLabel(qt,ct,lt,""),B=Lt[2],z=oe*Rt.height-Ie;const Wt=this.calculateImageOrLabelDimensions_(Rt.width,Rt.height,Lt[0],Lt[1],Rt.width,Rt.height,B,z,0,0,Lt[3],Ce,!1,y.oB,!1,it);if(p&&p.collides(Wt.declutterBox))break t;Pt.push([t,o,Rt,Wt,1,null,null])}p&&p.load(Pt.map(le));for(let Wt=0,Qe=Pt.length;Wt<Qe;++Wt)this.replayImageOrLabel_.apply(this,Pt[Wt])}}++C;break;case R.END_GEOMETRY:if(void 0!==m){it=K[1];const Dt=m(it,At);if(Dt)return Dt}++C;break;case R.FILL:ot?dt++:this.fill_(t),++C;break;case R.MOVE_TO_LINE_TO:for(v=K[1],W=K[2],yt=I[v],Et=I[v+1],V=yt+.5|0,J=Et+.5|0,(V!==P||J!==G)&&(t.moveTo(yt,Et),P=V,G=J),v+=2;v<W;v+=2)yt=I[v],Et=I[v+1],V=yt+.5|0,J=Et+.5|0,(v==W-2||V!==P||J!==G)&&(t.lineTo(yt,Et),P=V,G=J);++C;break;case R.SET_FILL_STYLE:pt=K,this.alignFill_=K[2],dt&&(this.fill_(t),dt=0,gt&&(t.stroke(),gt=0)),t.fillStyle=K[1],++C;break;case R.SET_STROKE_STYLE:mt=K,gt&&(t.stroke(),gt=0),this.setStrokeStyle_(t,K),++C;break;case R.STROKE:ot?gt++:t.stroke(),++C;break;default:++C}}dt&&this.fill_(t),gt&&t.stroke()}execute(t,o,e,h,l,m){this.viewRotation_=h,this.execute_(t,o,e,this.instructions,l,void 0,void 0,m)}executeHitDetection(t,o,e,h,l){return this.viewRotation_=e,this.execute_(t,1,o,this.hitDetectionInstructions,!0,h,l)}};var Zt=E(1992),we=E(9466);const te=["Polygon","Circle","LineString","Image","Text","Default"],ee={},de=class Me{constructor(t,o,e,h,l,m){this.maxExtent_=t,this.overlaps_=h,this.pixelRatio_=e,this.resolution_=o,this.renderBuffer_=m,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Q.Ue)(),this.createExecutors_(l)}clip(t,o){const e=this.getClipCoords(o);t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.lineTo(e[6],e[7]),t.clip()}createExecutors_(t){for(const o in t){let e=this.executorsByZIndex_[o];void 0===e&&(e={},this.executorsByZIndex_[o]=e);const h=t[o];for(const l in h)e[l]=new Le(this.resolution_,this.pixelRatio_,this.overlaps_,h[l])}}hasExecutors(t){for(const o in this.executorsByZIndex_){const e=this.executorsByZIndex_[o];for(let h=0,l=t.length;h<l;++h)if(t[h]in e)return!0}return!1}forEachFeatureAtCoordinate(t,o,e,h,l,m){const x=2*(h=Math.round(h))+1,p=(0,Q.qC)(this.hitDetectionTransform_,h+.5,h+.5,1/o,-1/o,-e,-t[0],-t[1]),I=!this.hitDetectionContext_;I&&(this.hitDetectionContext_=(0,Zt.E4)(x,x,void 0,{willReadFrequently:!0}));const C=this.hitDetectionContext_;let L;C.canvas.width!==x||C.canvas.height!==x?(C.canvas.width=x,C.canvas.height=x):I||C.clearRect(0,0,x,x),void 0!==this.renderBuffer_&&(L=(0,f.lJ)(),(0,f.Wj)(L,t),(0,f.f3)(L,o*(this.renderBuffer_+h),L));const v=function Ae(et){if(void 0!==ee[et])return ee[et];const t=2*et+1,o=et*et,e=new Array(o+1);for(let l=0;l<=et;++l)for(let m=0;m<=et;++m){const x=l*l+m*m;if(x>o)break;let p=e[x];p||(p=[],e[x]=p),p.push(4*((et+l)*t+(et+m))+3),l>0&&p.push(4*((et-l)*t+(et+m))+3),m>0&&(p.push(4*((et+l)*t+(et-m))+3),l>0&&p.push(4*((et-l)*t+(et-m))+3))}const h=[];for(let l=0,m=e.length;l<m;++l)e[l]&&h.push(...e[l]);return ee[et]=h,h}(h);let W;function B(q,ct){const ft=C.getImageData(0,0,x,x).data;for(let lt=0,dt=v.length;lt<dt;lt++)if(ft[v[lt]]>0){if(!m||"Image"!==W&&"Text"!==W||m.includes(q)){const gt=(v[lt]-3)/4,pt=h-gt%x,mt=h-(gt/x|0),ut=l(q,ct,pt*pt+mt*mt);if(ut)return ut}C.clearRect(0,0,x,x);break}}const z=Object.keys(this.executorsByZIndex_).map(Number);let P,G,V,J,nt;for(z.sort(Y.j2),P=z.length-1;P>=0;--P){const q=z[P].toString();for(V=this.executorsByZIndex_[q],G=te.length-1;G>=0;--G)if(W=te[G],J=V[W],void 0!==J&&(nt=J.executeHitDetection(C,p,e,B,L),nt))return nt}}getClipCoords(t){const o=this.maxExtent_;if(!o)return null;const e=o[0],h=o[1],l=o[2],m=o[3],x=[e,h,e,m,l,m,l,h];return(0,$.vT)(x,0,8,2,t,x),x}isEmpty(){return(0,we.x)(this.executorsByZIndex_)}execute(t,o,e,h,l,m,x){const p=Object.keys(this.executorsByZIndex_).map(Number);let I,C,L,v,W,B;for(p.sort(Y.j2),this.maxExtent_&&(t.save(),this.clip(t,e)),m=m||te,x&&p.reverse(),I=0,C=p.length;I<C;++I){const z=p[I].toString();for(W=this.executorsByZIndex_[z],L=0,v=m.length;L<v;++L)B=W[m[L]],void 0!==B&&B.execute(t,o,e,h,l,x)}this.maxExtent_&&t.restore()}};var jt=E(8587),Fe=E(3620),ke=E(9570);const Mt=.5;var bt=E(8377),Gt=E(6003),Be=E(3481);const Ge=class be extends N.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,f.lJ)(),this.wrappedRenderedExtent_=(0,f.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,o,e){const h=o.extent,l=o.viewState,m=l.center,x=l.resolution,p=l.projection,I=l.rotation,C=p.getExtent(),L=this.getLayer().getSource(),v=o.pixelRatio,W=o.viewHints,B=!(W[jt.Z.ANIMATING]||W[jt.Z.INTERACTING]),z=this.compositionContext_,P=Math.round(o.size[0]*v),G=Math.round(o.size[1]*v),V=L.getWrapX()&&p.canWrapX(),J=V?(0,f.dz)(C):null,nt=V?Math.ceil((h[2]-C[2])/J)+1:1;let q=V?Math.floor((h[0]-C[0])/J):0;do{const ct=this.getRenderTransform(m,x,I,v,P,G,q*J);t.execute(z,1,ct,I,B,void 0,e)}while(++q<nt)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,Zt.E4)(this.context.canvas.width,this.context.canvas.height,N.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,Zt.jy)(this.compositionContext_),N.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,o){const e=t.pixelRatio,h=t.layerStatesArray[t.layerIndex];(0,Q.n3)(this.pixelTransform,1/e,1/e),(0,Q.nb)(this.inversePixelTransform,this.pixelTransform);const l=(0,Q.BB)(this.pixelTransform);this.useContainer(o,l,this.getBackground(t));const m=this.context,x=m.canvas,p=this.replayGroup_,I=this.declutterExecutorGroup;if((!p||p.isEmpty())&&(!I||I.isEmpty()))return null;const C=Math.round(t.size[0]*e),L=Math.round(t.size[1]*e);x.width!=C||x.height!=L?(x.width=C,x.height=L,x.style.transform!==l&&(x.style.transform=l)):this.containerReused||m.clearRect(0,0,C,L),this.preRender(m,t);const v=t.viewState,W=v.projection;this.opacity_=h.opacity,this.setupCompositionContext_();let B=!1,z=!0;if(h.extent&&this.clipping){const P=(0,Gt.dY)(h.extent,W);z=(0,f.kK)(P,t.extent),B=z&&!(0,f.r4)(P,t.extent),B&&this.clipUnrotated(this.compositionContext_,t,P)}return z&&this.renderWorlds(p,t),B&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(m,t),this.renderedRotation_!==v.rotation&&(this.renderedRotation_=v.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(o=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];(0,Q.nn)(this.pixelTransform,e);const h=this.renderedCenter_,l=this.renderedResolution_,m=this.renderedRotation_,x=this.renderedProjection_,p=this.wrappedRenderedExtent_,I=this.getLayer(),C=[],L=e[0]*Mt,v=e[1]*Mt;C.push(this.getRenderTransform(h,l,m,Mt,L,v,0).slice());const W=I.getSource(),B=x.getExtent();if(W.getWrapX()&&x.canWrapX()&&!(0,f.r4)(B,p)){let z=p[0];const P=(0,f.dz)(B);let V,G=0;for(;z<B[0];)--G,V=P*G,C.push(this.getRenderTransform(h,l,m,Mt,L,v,V).slice()),z+=P;for(G=0,z=p[2];z>B[2];)++G,V=P*G,C.push(this.getRenderTransform(h,l,m,Mt,L,v,V).slice()),z-=P}this.hitDetectionImageData_=function Pe(et,t,o,e,h,l,m){const I=(0,Zt.E4)(et[0]*Mt,et[1]*Mt);I.imageSmoothingEnabled=!1;const C=I.canvas,L=new Fe.Z(I,Mt,h,null,m),v=o.length,W=Math.floor(16777215/v),B={};for(let P=1;P<=v;++P){const G=o[P-1],V=G.getStyleFunction()||e;if(!e)continue;let J=V(G,l);if(!J)continue;Array.isArray(J)||(J=[J]);const q=(P*W).toString(16).padStart(7,"#00000");for(let ct=0,ft=J.length;ct<ft;++ct){const lt=J[ct],dt=lt.getGeometryFunction()(G);if(!dt||!(0,f.kK)(h,dt.getExtent()))continue;const gt=lt.clone(),pt=gt.getFill();pt&&pt.setColor(q);const mt=gt.getStroke();mt&&(mt.setColor(q),mt.setLineDash(null)),gt.setText(void 0);const ut=lt.getImage();if(ut&&0!==ut.getOpacity()){const ot=ut.getImageSize();if(!ot)continue;const it=(0,Zt.E4)(ot[0],ot[1],void 0,{alpha:!1}),yt=it.canvas;it.fillStyle=q,it.fillRect(0,0,yt.width,yt.height),gt.setImage(new ke.Z({img:yt,imgSize:ot,anchor:ut.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ut.getOrigin(),opacity:1,size:ut.getSize(),scale:ut.getScale(),rotation:ut.getRotation(),rotateWithView:ut.getRotateWithView()}))}const Tt=gt.getZIndex()||0;let _t=B[Tt];_t||(_t={},B[Tt]=_t,_t.Polygon=[],_t.Circle=[],_t.LineString=[],_t.Point=[]);const tt=dt.getType();if("GeometryCollection"===tt){const ot=dt.getGeometriesArrayRecursive();for(let it=0,yt=ot.length;it<yt;++it){const Et=ot[it];_t[Et.getType().replace("Multi","")].push(Et,gt)}}else _t[tt.replace("Multi","")].push(dt,gt)}}const z=Object.keys(B).map(Number).sort(Y.j2);for(let P=0,G=z.length;P<G;++P){const V=B[z[P]];for(const J in V){const nt=V[J];for(let q=0,ct=nt.length;q<ct;q+=2){L.setStyle(nt[q+1]);for(let ft=0,lt=t.length;ft<lt;++ft)L.setTransform(t[ft]),L.drawGeometry(nt[q])}}}return I.getImageData(0,0,C.width,C.height)}(e,C,this.renderedFeatures_,I.getStyleFunction(),p,l,m)}o(function We(et,t,o){const e=[];if(o){const h=Math.floor(Math.round(et[0])*Mt),l=Math.floor(Math.round(et[1])*Mt),m=4*((0,st.uZ)(h,0,o.width-1)+(0,st.uZ)(l,0,o.height-1)*o.width),C=o.data[m+2]+256*(o.data[m+1]+256*o.data[m]),L=Math.floor(16777215/t.length);C&&C%L==0&&e.push(t[C/L-1])}return e}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,o,e,h,l){if(!this.replayGroup_)return;const m=o.viewState.resolution,x=o.viewState.rotation,p=this.getLayer(),I={},C=function(W,B,z){const P=(0,O.sq)(W),G=I[P];if(G){if(!0!==G&&z<G.distanceSq){if(0===z)return I[P]=!0,l.splice(l.lastIndexOf(G),1),h(W,p,B);G.geometry=B,G.distanceSq=z}}else{if(0===z)return I[P]=!0,h(W,p,B);l.push(I[P]={feature:W,layer:p,geometry:B,distanceSq:z,callback:h})}};let L;const v=[this.replayGroup_];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some(W=>L=W.forEachFeatureAtCoordinate(t,m,x,e,C,W===this.declutterExecutorGroup&&o.declutterTree?o.declutterTree.all().map(B=>B.value):null)),L}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const o=this.getLayer(),e=o.getSource();if(!e)return!1;const h=t.viewHints[jt.Z.ANIMATING],l=t.viewHints[jt.Z.INTERACTING],m=o.getUpdateWhileAnimating(),x=o.getUpdateWhileInteracting();if(this.ready&&!m&&h||!x&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const p=t.extent,I=t.viewState,C=I.projection,L=I.resolution,v=t.pixelRatio,W=o.getRevision(),B=o.getRenderBuffer();let z=o.getRenderOrder();void 0===z&&(z=bt.eR);const P=I.center.slice(),G=(0,f.f3)(p,B*L),V=G.slice(),J=[G.slice()],nt=C.getExtent();if(e.getWrapX()&&C.canWrapX()&&!(0,f.r4)(nt,t.extent)){const tt=(0,f.dz)(nt),ot=Math.max((0,f.dz)(G)/2,tt);G[0]=nt[0]-ot,G[2]=nt[2]+ot,(0,Be.Cf)(P,C);const it=(0,f.Cf)(J[0],C);it[0]<nt[0]&&it[2]<nt[2]?J.push([it[0]+tt,it[1],it[2]+tt,it[3]]):it[0]>nt[0]&&it[2]>nt[2]&&J.push([it[0]-tt,it[1],it[2]-tt,it[3]])}if(this.ready&&this.renderedResolution_==L&&this.renderedRevision_==W&&this.renderedRenderOrder_==z&&(0,f.r4)(this.wrappedRenderedExtent_,G))return(0,Y.fS)(this.renderedExtent_,V)||(this.hitDetectionImageData_=null,this.renderedExtent_=V),this.renderedCenter_=P,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const q=new F((0,bt.Qz)(L,v),G,L,v);let ct;this.getLayer().getDeclutter()&&(ct=new F((0,bt.Qz)(L,v),G,L,v));const ft=(0,Gt.Cs)();let lt;if(ft){for(let tt=0,ot=J.length;tt<ot;++tt){const yt=(0,Gt.Fj)(J[tt],C);e.loadFeatures(yt,(0,Gt.on)(L,C),ft)}lt=(0,Gt.WO)(ft,C)}else for(let tt=0,ot=J.length;tt<ot;++tt)e.loadFeatures(J[tt],L,C);const dt=(0,bt.se)(L,v);let gt=!0;const pt=tt=>{let ot;const it=tt.getStyleFunction()||o.getStyleFunction();if(it&&(ot=it(tt,L)),ot){const yt=this.renderFeature(tt,dt,ot,q,lt,ct);gt=gt&&!yt}},mt=(0,Gt.Fj)(G,C),ut=e.getFeaturesInExtent(mt);z&&ut.sort(z);for(let tt=0,ot=ut.length;tt<ot;++tt)pt(ut[tt]);this.renderedFeatures_=ut,this.ready=gt;const Tt=q.finish(),_t=new de(G,L,v,e.getOverlaps(),Tt,o.getRenderBuffer());return ct&&(this.declutterExecutorGroup=new de(G,L,v,e.getOverlaps(),ct.finish(),o.getRenderBuffer())),this.renderedResolution_=L,this.renderedRevision_=W,this.renderedRenderOrder_=z,this.renderedExtent_=V,this.wrappedRenderedExtent_=G,this.renderedCenter_=P,this.renderedProjection_=C,this.replayGroup_=_t,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,o,e,h,l,m){if(!e)return!1;let x=!1;if(Array.isArray(e))for(let p=0,I=e.length;p<I;++p)x=(0,bt.Pn)(h,t,e[p],o,this.boundHandleStyleImageChange_,l,m)||x;else x=(0,bt.Pn)(h,t,e,o,this.boundHandleStyleImageChange_,l,m);return x}}},8377:(St,rt,E)=>{"use strict";E.d(rt,{Pn:()=>b,Qz:()=>at,eR:()=>X,se:()=>R});var j=E(521),Z=E(119);const T={Point:function c(d,u,r,a,O){const M=r.getImage(),A=r.getText();let w;if(M){if(M.getImageState()!=j.Z.LOADED)return;let k=d;if(O){const D=M.getDeclutterMode();if("none"!==D)if(k=O,"obstacle"===D){const F=d.getBuilder(r.getZIndex(),"Image");F.setImageStyle(M,w),F.drawPoint(u,a)}else A&&A.getText()&&(w={})}const g=k.getBuilder(r.getZIndex(),"Image");g.setImageStyle(M,w),g.drawPoint(u,a)}if(A&&A.getText()){let k=d;O&&(k=O);const g=k.getBuilder(r.getZIndex(),"Text");g.setTextStyle(A,w),g.drawText(u,a)}},LineString:function n(d,u,r,a,O){const M=r.getStroke();if(M){const w=d.getBuilder(r.getZIndex(),"LineString");w.setFillStrokeStyle(null,M),w.drawLineString(u,a)}const A=r.getText();if(A&&A.getText()){const w=(O||d).getBuilder(r.getZIndex(),"Text");w.setTextStyle(A),w.drawText(u,a)}},Polygon:function s(d,u,r,a,O){const M=r.getFill(),A=r.getStroke();if(M||A){const k=d.getBuilder(r.getZIndex(),"Polygon");k.setFillStrokeStyle(M,A),k.drawPolygon(u,a)}const w=r.getText();if(w&&w.getText()){const k=(O||d).getBuilder(r.getZIndex(),"Text");k.setTextStyle(w),k.drawText(u,a)}},MultiPoint:function S(d,u,r,a,O){const M=r.getImage(),A=r.getText();let w;if(M){if(M.getImageState()!=j.Z.LOADED)return;let k=d;if(O){const D=M.getDeclutterMode();if("none"!==D)if(k=O,"obstacle"===D){const F=d.getBuilder(r.getZIndex(),"Image");F.setImageStyle(M,w),F.drawMultiPoint(u,a)}else A&&A.getText()&&(w={})}const g=k.getBuilder(r.getZIndex(),"Image");g.setImageStyle(M,w),g.drawMultiPoint(u,a)}if(A&&A.getText()){let k=d;O&&(k=O);const g=k.getBuilder(r.getZIndex(),"Text");g.setTextStyle(A,w),g.drawText(u,a)}},MultiLineString:function _(d,u,r,a,O){const M=r.getStroke();if(M){const w=d.getBuilder(r.getZIndex(),"LineString");w.setFillStrokeStyle(null,M),w.drawMultiLineString(u,a)}const A=r.getText();if(A&&A.getText()){const w=(O||d).getBuilder(r.getZIndex(),"Text");w.setTextStyle(A),w.drawText(u,a)}},MultiPolygon:function i(d,u,r,a,O){const M=r.getFill(),A=r.getStroke();if(A||M){const k=d.getBuilder(r.getZIndex(),"Polygon");k.setFillStrokeStyle(M,A),k.drawMultiPolygon(u,a)}const w=r.getText();if(w&&w.getText()){const k=(O||d).getBuilder(r.getZIndex(),"Text");k.setTextStyle(w),k.drawText(u,a)}},GeometryCollection:function Y(d,u,r,a,O){const M=u.getGeometriesArray();let A,w;for(A=0,w=M.length;A<w;++A)(0,T[M[A].getType()])(d,M[A],r,a,O)},Circle:function U(d,u,r,a,O){const M=r.getFill(),A=r.getStroke();if(M||A){const k=d.getBuilder(r.getZIndex(),"Circle");k.setFillStrokeStyle(M,A),k.drawCircle(u,a)}const w=r.getText();if(w&&w.getText()){const k=(O||d).getBuilder(r.getZIndex(),"Text");k.setTextStyle(w),k.drawText(u,a)}}};function X(d,u){return parseInt((0,Z.sq)(d),10)-parseInt((0,Z.sq)(u),10)}function R(d,u){const r=at(d,u);return r*r}function at(d,u){return.5*d/u}function b(d,u,r,a,O,M,A){let w=!1;const k=r.getImage();if(k){const g=k.getImageState();g==j.Z.LOADED||g==j.Z.ERROR?k.unlistenImageChange(O):(g==j.Z.IDLE&&k.load(),k.listenImageChange(O),w=!0)}return function f(d,u,r,a,O,M){const A=r.getGeometryFunction()(u);if(!A)return;const w=A.simplifyTransformed(a,O);r.getRenderer()?y(d,w,r,u):(0,T[w.getType()])(d,w,r,u,M)}(d,u,r,a,M,A),w}function y(d,u,r,a){if("GeometryCollection"!=u.getType())d.getBuilder(r.getZIndex(),"Default").drawCustom(u,a,r.getRenderer(),r.getHitDetectionRenderer());else{const M=u.getGeometries();for(let A=0,w=M.length;A<w;++A)y(d,M[A],r,a)}}},5947:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>w});var j=E(2815),Z=E(9889),H=E(8214),T=E(9972),X=E(4587),R=E(2909),at=E(4702),U=E(4412),b=E(1345);function y(k,g){return[[-1/0,-1/0,1/0,1/0]]}E(6003);var _=E(1911),i=E(760),c=E(2456),S=E(119),s=E(9466),d=E(1729);function a(k,g){return function(D,F,N,Q,st){const $=this;!function r(k,g,D,F,N,Q,st){const $=new XMLHttpRequest;$.open("GET","function"==typeof k?k(D,F,N):k,!0),"arraybuffer"==g.getType()&&($.responseType="arraybuffer"),$.withCredentials=false,$.onload=function(ht){if(!$.status||$.status>=200&&$.status<300){const It=g.getType();let xt;"json"==It||"text"==It?xt=$.responseText:"xml"==It?(xt=$.responseXML,xt||(xt=(new DOMParser).parseFromString($.responseText,"application/xml"))):"arraybuffer"==It&&(xt=$.response),xt?Q(g.readFeatures(xt,{extent:D,featureProjection:N}),g.readProjection(xt)):st()}else st()},$.onerror=st,$.send()}(k,g,D,F,N,function(ht,It){$.addFeatures(ht),void 0!==Q&&Q(ht)},st||b.Zn)}}class M extends H.ZP{constructor(g,D,F){super(g),this.feature=D,this.features=F}}const w=class A extends at.Z{constructor(g){super({attributions:(g=g||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===g.wrapX||g.wrapX}),this.loader_=b.Zn,this.format_=g.format,this.overlaps_=void 0===g.overlaps||g.overlaps,this.url_=g.url,void 0!==g.loader?this.loader_=g.loader:void 0!==this.url_&&((0,_.h)(this.format_,7),this.loader_=a(this.url_,this.format_)),this.strategy_=void 0!==g.strategy?g.strategy:y;const D=void 0===g.useSpatialIndex||g.useSpatialIndex;let F,N;this.featuresRtree_=D?new R.Z:null,this.loadedExtentsRtree_=new R.Z,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(g.features)?N=g.features:g.features&&(F=g.features,N=F.getArray()),!D&&void 0===F&&(F=new j.Z(N)),void 0!==N&&this.addFeaturesInternal(N),void 0!==F&&this.bindFeaturesCollection_(F)}addFeature(g){this.addFeatureInternal(g),this.changed()}addFeatureInternal(g){const D=(0,S.sq)(g);if(!this.addToIndex_(D,g))return void(this.featuresCollection_&&this.featuresCollection_.remove(g));this.setupChangeEvents_(D,g);const F=g.getGeometry();if(F){const N=F.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(N,g)}else this.nullGeometryFeatures_[D]=g;this.dispatchEvent(new M(U.Z.ADDFEATURE,g))}setupChangeEvents_(g,D){this.featureChangeKeys_[g]=[(0,d.oL)(D,T.Z.CHANGE,this.handleFeatureChange_,this),(0,d.oL)(D,X.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(g,D){let F=!0;const N=D.getId();return void 0!==N&&(N.toString()in this.idIndex_?F=!1:this.idIndex_[N.toString()]=D),F&&((0,_.h)(!(g in this.uidIndex_),30),this.uidIndex_[g]=D),F}addFeatures(g){this.addFeaturesInternal(g),this.changed()}addFeaturesInternal(g){const D=[],F=[],N=[];for(let Q=0,st=g.length;Q<st;Q++){const $=g[Q],ht=(0,S.sq)($);this.addToIndex_(ht,$)&&F.push($)}for(let Q=0,st=F.length;Q<st;Q++){const $=F[Q],ht=(0,S.sq)($);this.setupChangeEvents_(ht,$);const It=$.getGeometry();if(It){const xt=It.getExtent();D.push(xt),N.push($)}else this.nullGeometryFeatures_[ht]=$}if(this.featuresRtree_&&this.featuresRtree_.load(D,N),this.hasListener(U.Z.ADDFEATURE))for(let Q=0,st=F.length;Q<st;Q++)this.dispatchEvent(new M(U.Z.ADDFEATURE,F[Q]))}bindFeaturesCollection_(g){let D=!1;this.addEventListener(U.Z.ADDFEATURE,function(F){D||(D=!0,g.push(F.feature),D=!1)}),this.addEventListener(U.Z.REMOVEFEATURE,function(F){D||(D=!0,g.remove(F.feature),D=!1)}),g.addEventListener(Z.Z.ADD,F=>{D||(D=!0,this.addFeature(F.element),D=!1)}),g.addEventListener(Z.Z.REMOVE,F=>{D||(D=!0,this.removeFeature(F.element),D=!1)}),this.featuresCollection_=g}clear(g){if(g){for(const F in this.featureChangeKeys_)this.featureChangeKeys_[F].forEach(d.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(N=>{this.removeFeatureInternal(N)});for(const N in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[N])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const D=new M(U.Z.CLEAR);this.dispatchEvent(D),this.changed()}forEachFeature(g){if(this.featuresRtree_)return this.featuresRtree_.forEach(g);this.featuresCollection_&&this.featuresCollection_.forEach(g)}forEachFeatureAtCoordinateDirect(g,D){return this.forEachFeatureInExtent([g[0],g[1],g[0],g[1]],function(N){if(N.getGeometry().intersectsCoordinate(g))return D(N)})}forEachFeatureInExtent(g,D){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(g,D);this.featuresCollection_&&this.featuresCollection_.forEach(D)}forEachFeatureIntersectingExtent(g,D){return this.forEachFeatureInExtent(g,function(F){if(F.getGeometry().intersectsExtent(g)){const Q=D(F);if(Q)return Q}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let g;return this.featuresCollection_?g=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(g=this.featuresRtree_.getAll(),(0,s.x)(this.nullGeometryFeatures_)||(0,c.l7)(g,Object.values(this.nullGeometryFeatures_))),g}getFeaturesAtCoordinate(g){const D=[];return this.forEachFeatureAtCoordinateDirect(g,function(F){D.push(F)}),D}getFeaturesInExtent(g,D){if(this.featuresRtree_){if(!(D&&D.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(g);const N=(0,i.MV)(g,D);return[].concat(...N.map(Q=>this.featuresRtree_.getInExtent(Q)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(g,D){const F=g[0],N=g[1];let Q=null;const st=[NaN,NaN];let $=1/0;const ht=[-1/0,-1/0,1/0,1/0];return D=D||b.uX,this.featuresRtree_.forEachInExtent(ht,function(It){if(D(It)){const xt=It.getGeometry(),wt=$;if($=xt.closestPointXY(F,N,st,$),$<wt){Q=It;const Ct=Math.sqrt($);ht[0]=F-Ct,ht[1]=N-Ct,ht[2]=F+Ct,ht[3]=N+Ct}}}),Q}getExtent(g){return this.featuresRtree_.getExtent(g)}getFeatureById(g){const D=this.idIndex_[g.toString()];return void 0!==D?D:null}getFeatureByUid(g){const D=this.uidIndex_[g];return void 0!==D?D:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(g){const D=g.target,F=(0,S.sq)(D),N=D.getGeometry();if(N){const st=N.getExtent();F in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[F],this.featuresRtree_&&this.featuresRtree_.insert(st,D)):this.featuresRtree_&&this.featuresRtree_.update(st,D)}else F in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(D),this.nullGeometryFeatures_[F]=D);const Q=D.getId();if(void 0!==Q){const st=Q.toString();this.idIndex_[st]!==D&&(this.removeFromIdIndex_(D),this.idIndex_[st]=D)}else this.removeFromIdIndex_(D),this.uidIndex_[F]=D;this.changed(),this.dispatchEvent(new M(U.Z.CHANGEFEATURE,D))}hasFeature(g){const D=g.getId();return void 0!==D?D in this.idIndex_:(0,S.sq)(g)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,s.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(g,D,F){const N=this.loadedExtentsRtree_,Q=this.strategy_(g,D,F);for(let st=0,$=Q.length;st<$;++st){const ht=Q[st];N.forEachInExtent(ht,function(xt){return(0,i.r4)(xt.extent,ht)})||(++this.loadingExtentsCount_,this.dispatchEvent(new M(U.Z.FEATURESLOADSTART)),this.loader_.call(this,ht,D,F,xt=>{--this.loadingExtentsCount_,this.dispatchEvent(new M(U.Z.FEATURESLOADEND,void 0,xt))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new M(U.Z.FEATURESLOADERROR))}),N.insert(ht,{extent:ht.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(g){const D=this.loadedExtentsRtree_;let F;D.forEachInExtent(g,function(N){if((0,i.fS)(N.extent,g))return F=N,!0}),F&&D.remove(F)}removeFeature(g){if(!g)return;const D=(0,S.sq)(g);D in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[D]:this.featuresRtree_&&this.featuresRtree_.remove(g),this.removeFeatureInternal(g)&&this.changed()}removeFeatureInternal(g){const D=(0,S.sq)(g),F=this.featureChangeKeys_[D];if(!F)return;F.forEach(d.bN),delete this.featureChangeKeys_[D];const N=g.getId();return void 0!==N&&delete this.idIndex_[N.toString()],delete this.uidIndex_[D],this.dispatchEvent(new M(U.Z.REMOVEFEATURE,g)),g}removeFromIdIndex_(g){let D=!1;for(const F in this.idIndex_)if(this.idIndex_[F]===g){delete this.idIndex_[F],D=!0;break}return D}setLoader(g){this.loader_=g}setUrl(g){(0,_.h)(this.format_,7),this.url_=g,this.setLoader(a(g,this.format_))}}},4412:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>j});const j={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2909:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>R});var j=E(2402),Z=E(760),H=E(119),T=E(9466);const R=class X{constructor(U){this.rbush_=new j(U),this.items_={}}insert(U,b){const f={minX:U[0],minY:U[1],maxX:U[2],maxY:U[3],value:b};this.rbush_.insert(f),this.items_[(0,H.sq)(b)]=f}load(U,b){const f=new Array(b.length);for(let y=0,Y=b.length;y<Y;y++){const n=U[y],_=b[y],i={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:_};f[y]=i,this.items_[(0,H.sq)(_)]=i}this.rbush_.load(f)}remove(U){const b=(0,H.sq)(U),f=this.items_[b];return delete this.items_[b],null!==this.rbush_.remove(f)}update(U,b){const f=this.items_[(0,H.sq)(b)];(0,Z.fS)([f.minX,f.minY,f.maxX,f.maxY],U)||(this.remove(b),this.insert(U,b))}getAll(){return this.rbush_.all().map(function(b){return b.value})}getInExtent(U){return this.rbush_.search({minX:U[0],minY:U[1],maxX:U[2],maxY:U[3]}).map(function(y){return y.value})}forEach(U){return this.forEach_(this.getAll(),U)}forEachInExtent(U,b){return this.forEach_(this.getInExtent(U),b)}forEach_(U,b){let f;for(let y=0,Y=U.length;y<Y;y++)if(f=b(U[y]),f)return f;return f}isEmpty(){return(0,T.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(U){const b=this.rbush_.toJSON();return(0,Z.T9)(b.minX,b.minY,b.maxX,b.maxY,U)}concat(U){this.rbush_.load(U.rbush_.all());for(const b in U.items_)this.items_[b]=U.items_[b]}}},7392:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>H});var j=E(8225);class Z extends j.Z{constructor(X){super({points:1/0,fill:(X=X||{radius:5}).fill,radius:X.radius,stroke:X.stroke,scale:void 0!==X.scale?X.scale:1,rotation:void 0!==X.rotation?X.rotation:0,rotateWithView:void 0!==X.rotateWithView&&X.rotateWithView,displacement:void 0!==X.displacement?X.displacement:[0,0],declutterMode:X.declutterMode})}clone(){const X=this.getScale(),R=new Z({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(X)?X.slice():X,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return R.setOpacity(this.getOpacity()),R}setRadius(X){this.radius_=X,this.render()}}const H=Z},5044:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>Z});class j{constructor(T){this.color_=void 0!==(T=T||{}).color?T.color:null}clone(){const T=this.getColor();return new j({color:Array.isArray(T)?T.slice():T||void 0})}getColor(){return this.color_}setColor(T){this.color_=T}}const Z=j},9570:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>c});var j=E(9972),Z=E(521),H=E(6398),T=E(3783),X=E(1911),R=E(8007),at=E(1992),U=E(2956),b=E(3641);let f=null;class y extends R.Z{constructor(s,d,u,r,a,O){super(),this.hitDetectionImage_=null,this.image_=s,this.crossOrigin_=r,this.canvas_={},this.color_=O,this.unlisten_=null,this.imageState_=a,this.size_=u,this.src_=d}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Z.Z.LOADED){f||(f=(0,at.E4)(1,1,void 0,{willReadFrequently:!0})),f.drawImage(this.image_,0,0);try{f.getImageData(0,0,1,1),this.tainted_=!1}catch{f=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(j.Z.CHANGE)}handleImageError_(){this.imageState_=Z.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Z.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(s){return this.image_||this.initializeImage_(),this.replaceColor_(s),this.canvas_[s]?this.canvas_[s]:this.image_}getPixelRatio(s){return this.replaceColor_(s),this.canvas_[s]?s:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const s=this.size_[0],d=this.size_[1],u=(0,at.E4)(s,d);u.fillRect(0,0,s,d),this.hitDetectionImage_=u.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Z.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=Z.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,b.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(s){if(!this.color_||this.canvas_[s]||this.imageState_!==Z.Z.LOADED)return;const d=this.image_,u=document.createElement("canvas");u.width=Math.ceil(d.width*s),u.height=Math.ceil(d.height*s);const r=u.getContext("2d");r.scale(s,s),r.drawImage(d,0,0),r.globalCompositeOperation="multiply",r.fillStyle=(0,T.XC)(this.color_),r.fillRect(0,0,u.width/s,u.height/s),r.globalCompositeOperation="destination-in",r.drawImage(d,0,0),this.canvas_[s]=u}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var _=E(119);class i extends H.Z{constructor(s){super({opacity:void 0!==(s=s||{}).opacity?s.opacity:1,rotation:void 0!==s.rotation?s.rotation:0,scale:void 0!==s.scale?s.scale:1,displacement:void 0!==s.displacement?s.displacement:[0,0],rotateWithView:void 0!==s.rotateWithView&&s.rotateWithView,declutterMode:s.declutterMode}),this.anchor_=void 0!==s.anchor?s.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==s.anchorOrigin?s.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==s.anchorXUnits?s.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==s.anchorYUnits?s.anchorYUnits:"fraction",this.crossOrigin_=void 0!==s.crossOrigin?s.crossOrigin:null;const O=void 0!==s.img?s.img:null;this.imgSize_=s.imgSize;let M=s.src;(0,X.h)(!(void 0!==M&&O),4),(0,X.h)(!O||O&&this.imgSize_,5),(void 0===M||0===M.length)&&O&&(M=O.src||(0,_.sq)(O)),(0,X.h)(void 0!==M&&M.length>0,6),(0,X.h)(!((void 0!==s.width||void 0!==s.height)&&void 0!==s.scale),69);const A=void 0!==s.src?Z.Z.IDLE:Z.Z.LOADED;if(this.color_=void 0!==s.color?(0,T._2)(s.color):null,this.iconImage_=function Y(S,s,d,u,r,a){let O=U.c.get(s,u,a);return O||(O=new y(S,s,d,u,r,a),U.c.set(s,u,a,O)),O}(O,M,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,A,this.color_),this.offset_=void 0!==s.offset?s.offset:[0,0],this.offsetOrigin_=void 0!==s.offsetOrigin?s.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==s.size?s.size:null,this.width_=s.width,this.height_=s.height,void 0!==this.width_||void 0!==this.height_){const w=this.getImage(1),k=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};w.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):w.addEventListener("load",k)}}clone(){const s=this.getScale();return new i({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(s)?s.slice():s,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(s,d){const u=this.getImage(1);super.setScale(void 0!==s&&void 0!==d?[s/u.width,d/u.height]:void 0!==s?[s/u.width,s/u.width]:void 0!==d?[d/u.height,d/u.height]:[1,1])}getAnchor(){let s=this.normalizedAnchor_;if(!s){s=this.anchor_;const r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;s=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(s[0]*=r[0]),"fraction"==this.anchorYUnits_&&(s[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;s===this.anchor_&&(s=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(s[0]=-s[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(s[1]=-s[1]+r[1])}this.normalizedAnchor_=s}const d=this.getDisplacement(),u=this.getScaleArray();return[s[0]-d[0]/u[0],s[1]+d[1]/u[1]]}setAnchor(s){this.anchor_=s,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(s){return this.iconImage_.getImage(s)}getPixelRatio(s){return this.iconImage_.getPixelRatio(s)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let s=this.offset_;if("top-left"!=this.offsetOrigin_){const d=this.getSize(),u=this.iconImage_.getSize();if(!d||!u)return null;s=s.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(s[0]=u[0]-d[0]-s[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(s[1]=u[1]-d[1]-s[1])}return this.origin_=s,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(s){this.width_=s,this.updateScaleFromWidthAndHeight(s,this.height_)}setHeight(s){this.height_=s,this.updateScaleFromWidthAndHeight(this.width_,s)}setScale(s){super.setScale(s);const d=this.getImage(1);if(d){const u=Array.isArray(s)?s[0]:s;void 0!==u&&(this.width_=u*d.width);const r=Array.isArray(s)?s[1]:s;void 0!==r&&(this.height_=r*d.height)}}listenImageChange(s){this.iconImage_.addEventListener(j.Z.CHANGE,s)}load(){this.iconImage_.load()}unlistenImageChange(s){this.iconImage_.removeEventListener(j.Z.CHANGE,s)}}const c=i},6398:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>T});var j=E(119),Z=E(1750);class H{constructor(R){this.opacity_=R.opacity,this.rotateWithView_=R.rotateWithView,this.rotation_=R.rotation,this.scale_=R.scale,this.scaleArray_=(0,Z.Pq)(R.scale),this.displacement_=R.displacement,this.declutterMode_=R.declutterMode}clone(){const R=this.getScale();return new H({opacity:this.getOpacity(),scale:Array.isArray(R)?R.slice():R,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,j.O3)()}getImage(R){return(0,j.O3)()}getHitDetectionImage(){return(0,j.O3)()}getPixelRatio(R){return 1}getImageState(){return(0,j.O3)()}getImageSize(){return(0,j.O3)()}getOrigin(){return(0,j.O3)()}getSize(){return(0,j.O3)()}setDisplacement(R){this.displacement_=R}setOpacity(R){this.opacity_=R}setRotateWithView(R){this.rotateWithView_=R}setRotation(R){this.rotation_=R}setScale(R){this.scale_=R,this.scaleArray_=(0,Z.Pq)(R)}listenImageChange(R){(0,j.O3)()}load(){(0,j.O3)()}unlistenImageChange(R){(0,j.O3)()}}const T=H},8225:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>U});var j=E(521),Z=E(6398),H=E(3783),T=E(5813),X=E(1992),R=E(4686);class at extends Z.Z{constructor(f){super({opacity:1,rotateWithView:void 0!==f.rotateWithView&&f.rotateWithView,rotation:void 0!==f.rotation?f.rotation:0,scale:void 0!==f.scale?f.scale:1,displacement:void 0!==f.displacement?f.displacement:[0,0],declutterMode:f.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==f.fill?f.fill:null,this.origin_=[0,0],this.points_=f.points,this.radius_=void 0!==f.radius?f.radius:f.radius1,this.radius2_=f.radius2,this.angle_=void 0!==f.angle?f.angle:0,this.stroke_=void 0!==f.stroke?f.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const f=this.getScale(),y=new at({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(f)?f.slice():f,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return y.setOpacity(this.getOpacity()),y}getAnchor(){const f=this.size_;if(!f)return null;const y=this.getDisplacement(),Y=this.getScaleArray();return[f[0]/2-y[0]/Y[0],f[1]/2+y[1]/Y[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(f){this.fill_=f,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(f){let y=this.canvas_[f];if(!y){const Y=this.renderOptions_,n=(0,X.E4)(Y.size*f,Y.size*f);this.draw_(Y,n,f),y=n.canvas,this.canvas_[f]=y}return y}getPixelRatio(f){return f}getImageSize(){return this.size_}getImageState(){return j.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(f){this.stroke_=f,this.render()}listenImageChange(f){}load(){}unlistenImageChange(f){}calculateLineJoinSize_(f,y,Y){if(0===y||this.points_===1/0||"bevel"!==f&&"miter"!==f)return y;let n=this.radius_,_=void 0===this.radius2_?n:this.radius2_;if(n<_){const N=n;n=_,_=N}const c=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),S=_*Math.sin(c),d=n-Math.sqrt(_*_-S*S),u=Math.sqrt(S*S+d*d),r=u/S;if("miter"===f&&r<=Y)return r*y;const a=y/2/r,O=y/2*(d/u),A=Math.sqrt((n+a)*(n+a)+O*O)-n;if(void 0===this.radius2_||"bevel"===f)return 2*A;const w=n*Math.sin(c),g=_-Math.sqrt(n*n-w*w),F=Math.sqrt(w*w+g*g)/w;return F<=Y?2*Math.max(A,F*y/2-_-n):2*A}createRenderOptions(){let _,f=R.rc,y=0,Y=null,n=0,i=0;this.stroke_&&(_=this.stroke_.getColor(),null===_&&(_=R.Tx),_=(0,T.y)(_),i=this.stroke_.getWidth(),void 0===i&&(i=R.yC),Y=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),f=this.stroke_.getLineJoin(),void 0===f&&(f=R.rc),y=this.stroke_.getMiterLimit(),void 0===y&&(y=R.V4));const c=this.calculateLineJoinSize_(f,i,y),S=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:_,strokeWidth:i,size:Math.ceil(2*S+c),lineDash:Y,lineDashOffset:n,lineJoin:f,miterLimit:y}}render(){this.renderOptions_=this.createRenderOptions();const f=this.renderOptions_.size;this.canvas_={},this.size_=[f,f]}draw_(f,y,Y){if(y.scale(Y,Y),y.translate(f.size/2,f.size/2),this.createPath_(y),this.fill_){let n=this.fill_.getColor();null===n&&(n=R.bL),y.fillStyle=(0,T.y)(n),y.fill()}this.stroke_&&(y.strokeStyle=f.strokeStyle,y.lineWidth=f.strokeWidth,f.lineDash&&(y.setLineDash(f.lineDash),y.lineDashOffset=f.lineDashOffset),y.lineJoin=f.lineJoin,y.miterLimit=f.miterLimit,y.stroke())}createHitDetectionCanvas_(f){if(this.fill_){let y=this.fill_.getColor(),Y=0;if("string"==typeof y&&(y=(0,H._2)(y)),null===y?Y=1:Array.isArray(y)&&(Y=4===y.length?y[3]:1),0===Y){const n=(0,X.E4)(f.size,f.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(f,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(f){let y=this.points_;const Y=this.radius_;if(y===1/0)f.arc(0,0,Y,0,2*Math.PI);else{const n=void 0===this.radius2_?Y:this.radius2_;void 0!==this.radius2_&&(y*=2);const _=this.angle_-Math.PI/2,i=2*Math.PI/y;for(let c=0;c<y;c++){const S=_+c*i,s=c%2==0?Y:n;f.lineTo(s*Math.cos(S),s*Math.sin(S))}f.closePath()}}drawHitDetectionCanvas_(f,y){y.translate(f.size/2,f.size/2),this.createPath_(y),y.fillStyle=R.bL,y.fill(),this.stroke_&&(y.strokeStyle=f.strokeStyle,y.lineWidth=f.strokeWidth,f.lineDash&&(y.setLineDash(f.lineDash),y.lineDashOffset=f.lineDashOffset),y.lineJoin=f.lineJoin,y.miterLimit=f.miterLimit,y.stroke())}}const U=at},6785:(St,rt,E)=>{"use strict";E.d(rt,{Z:()=>Z});class j{constructor(T){this.color_=void 0!==(T=T||{}).color?T.color:null,this.lineCap_=T.lineCap,this.lineDash_=void 0!==T.lineDash?T.lineDash:null,this.lineDashOffset_=T.lineDashOffset,this.lineJoin_=T.lineJoin,this.miterLimit_=T.miterLimit,this.width_=T.width}clone(){const T=this.getColor();return new j({color:Array.isArray(T)?T.slice():T||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(T){this.color_=T}setLineCap(T){this.lineCap_=T}setLineDash(T){this.lineDash_=T}setLineDashOffset(T){this.lineDashOffset_=T}setLineJoin(T){this.lineJoin_=T}setMiterLimit(T){this.miterLimit_=T}setWidth(T){this.width_=T}}const Z=j},109:(St,rt,E)=>{"use strict";E.d(rt,{J$:()=>R,Ly:()=>b,ZP:()=>y,yF:()=>U});var j=E(7392),Z=E(5044),H=E(6785),T=E(1911);class X{constructor(n){n=n||{},this.geometry_=null,this.geometryFunction_=f,void 0!==n.geometry&&this.setGeometry(n.geometry),this.fill_=void 0!==n.fill?n.fill:null,this.image_=void 0!==n.image?n.image:null,this.renderer_=void 0!==n.renderer?n.renderer:null,this.hitDetectionRenderer_=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.stroke_=void 0!==n.stroke?n.stroke:null,this.text_=void 0!==n.text?n.text:null,this.zIndex_=n.zIndex}clone(){let n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new X({geometry:n,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(n){this.renderer_=n}setHitDetectionRenderer(n){this.hitDetectionRenderer_=n}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(n){this.fill_=n}getImage(){return this.image_}setImage(n){this.image_=n}getStroke(){return this.stroke_}setStroke(n){this.stroke_=n}getText(){return this.text_}setText(n){this.text_=n}getZIndex(){return this.zIndex_}setGeometry(n){"function"==typeof n?this.geometryFunction_=n:"string"==typeof n?this.geometryFunction_=function(_){return _.get(n)}:n?void 0!==n&&(this.geometryFunction_=function(){return n}):this.geometryFunction_=f,this.geometry_=n}setZIndex(n){this.zIndex_=n}}function R(Y){let n;if("function"==typeof Y)n=Y;else{let _;Array.isArray(Y)?_=Y:((0,T.h)("function"==typeof Y.getZIndex,41),_=[Y]),n=function(){return _}}return n}let at=null;function U(Y,n){if(!at){const _=new Z.Z({color:"rgba(255,255,255,0.4)"}),i=new H.Z({color:"#3399CC",width:1.25});at=[new X({image:new j.Z({fill:_,stroke:i,radius:5}),fill:_,stroke:i})]}return at}function b(){const Y={},n=[255,255,255,1],_=[0,153,255,1];return Y.Polygon=[new X({fill:new Z.Z({color:[255,255,255,.5]})})],Y.MultiPolygon=Y.Polygon,Y.LineString=[new X({stroke:new H.Z({color:n,width:5})}),new X({stroke:new H.Z({color:_,width:3})})],Y.MultiLineString=Y.LineString,Y.Circle=Y.Polygon.concat(Y.LineString),Y.Point=[new X({image:new j.Z({radius:6,fill:new Z.Z({color:_}),stroke:new H.Z({color:n,width:1.5})}),zIndex:1/0})],Y.MultiPoint=Y.Point,Y.GeometryCollection=Y.Polygon.concat(Y.LineString,Y.Point),Y}function f(Y){return Y.getGeometry()}const y=X}}]);