(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[101],{2402:function(Tt){Tt.exports=function(){"use strict";function ft(i,r,u,x,f){!function g(l,w,F,k,G){for(;k>F;){if(k-F>600){var Y=k-F+1,z=w-F+1,b=Math.log(Y),U=.5*Math.exp(2*b/3),E=.5*Math.sqrt(b*U*(Y-U)/Y)*(z-Y/2<0?-1:1);g(l,w,Math.max(F,Math.floor(w-z*U/Y+E)),Math.min(k,Math.floor(w+(Y-z)*U/Y+E)),G)}var Q=l[w],q=F,$=k;for(T(l,F,w),G(l[k],Q)>0&&T(l,F,k);q<$;){for(T(l,q,$),q++,$--;G(l[q],Q)<0;)q++;for(;G(l[$],Q)>0;)$--}0===G(l[F],Q)?T(l,F,$):T(l,++$,k),$<=w&&(F=$+1),w<=$&&(k=$-1)}}(i,r,u||0,x||i.length-1,f||it)}function T(i,r,u){var x=i[r];i[r]=i[u],i[u]=x}function it(i,r){return i<r?-1:i>r?1:0}var J=function(i){void 0===i&&(i=9),this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function A(i,r,u){if(!u)return r.indexOf(i);for(var x=0;x<r.length;x++)if(u(i,r[x]))return x;return-1}function M(i,r){B(i,0,i.children.length,r,i)}function B(i,r,u,x,f){f||(f=y(null)),f.minX=1/0,f.minY=1/0,f.maxX=-1/0,f.maxY=-1/0;for(var g=r;g<u;g++){var l=i.children[g];R(f,i.leaf?x(l):l)}return f}function R(i,r){return i.minX=Math.min(i.minX,r.minX),i.minY=Math.min(i.minY,r.minY),i.maxX=Math.max(i.maxX,r.maxX),i.maxY=Math.max(i.maxY,r.maxY),i}function rt(i,r){return i.minX-r.minX}function H(i,r){return i.minY-r.minY}function N(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function D(i){return i.maxX-i.minX+(i.maxY-i.minY)}function m(i,r){return i.minX<=r.minX&&i.minY<=r.minY&&r.maxX<=i.maxX&&r.maxY<=i.maxY}function C(i,r){return r.minX<=i.maxX&&r.minY<=i.maxY&&r.maxX>=i.minX&&r.maxY>=i.minY}function y(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function o(i,r,u,x,f){for(var g=[r,u];g.length;)if(!((u=g.pop())-(r=g.pop())<=x)){var l=r+Math.ceil((u-r)/x/2)*x;ft(i,l,r,u,f),g.push(r,l,l,u)}}return J.prototype.all=function(){return this._all(this.data,[])},J.prototype.search=function(i){var r=this.data,u=[];if(!C(i,r))return u;for(var x=this.toBBox,f=[];r;){for(var g=0;g<r.children.length;g++){var l=r.children[g],w=r.leaf?x(l):l;C(i,w)&&(r.leaf?u.push(l):m(i,w)?this._all(l,u):f.push(l))}r=f.pop()}return u},J.prototype.collides=function(i){var r=this.data;if(!C(i,r))return!1;for(var u=[];r;){for(var x=0;x<r.children.length;x++){var f=r.children[x],g=r.leaf?this.toBBox(f):f;if(C(i,g)){if(r.leaf||m(i,g))return!0;u.push(f)}}r=u.pop()}return!1},J.prototype.load=function(i){if(!i||!i.length)return this;if(i.length<this._minEntries){for(var r=0;r<i.length;r++)this.insert(i[r]);return this}var u=this._build(i.slice(),0,i.length-1,0);if(this.data.children.length)if(this.data.height===u.height)this._splitRoot(this.data,u);else{if(this.data.height<u.height){var x=this.data;this.data=u,u=x}this._insert(u,this.data.height-u.height-1,!0)}else this.data=u;return this},J.prototype.insert=function(i){return i&&this._insert(i,this.data.height-1),this},J.prototype.clear=function(){return this.data=y([]),this},J.prototype.remove=function(i,r){if(!i)return this;for(var u,x,f,g=this.data,l=this.toBBox(i),w=[],F=[];g||w.length;){if(g||(g=w.pop(),x=w[w.length-1],u=F.pop(),f=!0),g.leaf){var k=A(i,g.children,r);if(-1!==k)return g.children.splice(k,1),w.push(g),this._condense(w),this}f||g.leaf||!m(g,l)?x?(u++,g=x.children[u],f=!1):g=null:(w.push(g),F.push(u),u=0,x=g,g=g.children[0])}return this},J.prototype.toBBox=function(i){return i},J.prototype.compareMinX=function(i,r){return i.minX-r.minX},J.prototype.compareMinY=function(i,r){return i.minY-r.minY},J.prototype.toJSON=function(){return this.data},J.prototype.fromJSON=function(i){return this.data=i,this},J.prototype._all=function(i,r){for(var u=[];i;)i.leaf?r.push.apply(r,i.children):u.push.apply(u,i.children),i=u.pop();return r},J.prototype._build=function(i,r,u,x){var f,g=u-r+1,l=this._maxEntries;if(g<=l)return M(f=y(i.slice(r,u+1)),this.toBBox),f;x||(x=Math.ceil(Math.log(g)/Math.log(l)),l=Math.ceil(g/Math.pow(l,x-1))),(f=y([])).leaf=!1,f.height=x;var w=Math.ceil(g/l),F=w*Math.ceil(Math.sqrt(l));o(i,r,u,F,this.compareMinX);for(var k=r;k<=u;k+=F){var G=Math.min(k+F-1,u);o(i,k,G,w,this.compareMinY);for(var Y=k;Y<=G;Y+=w){var z=Math.min(Y+w-1,G);f.children.push(this._build(i,Y,z,x-1))}}return M(f,this.toBBox),f},J.prototype._chooseSubtree=function(i,r,u,x){for(;x.push(r),!r.leaf&&x.length-1!==u;){for(var f=1/0,g=1/0,l=void 0,w=0;w<r.children.length;w++){var F=r.children[w],k=N(F),G=(Y=i,z=F,(Math.max(z.maxX,Y.maxX)-Math.min(z.minX,Y.minX))*(Math.max(z.maxY,Y.maxY)-Math.min(z.minY,Y.minY))-k);G<g?(g=G,f=k<f?k:f,l=F):G===g&&k<f&&(f=k,l=F)}r=l||r.children[0]}var Y,z;return r},J.prototype._insert=function(i,r,u){var x=u?i:this.toBBox(i),f=[],g=this._chooseSubtree(x,this.data,r,f);for(g.children.push(i),R(g,x);r>=0&&f[r].children.length>this._maxEntries;)this._split(f,r),r--;this._adjustParentBBoxes(x,f,r)},J.prototype._split=function(i,r){var u=i[r],x=u.children.length,f=this._minEntries;this._chooseSplitAxis(u,f,x);var g=this._chooseSplitIndex(u,f,x),l=y(u.children.splice(g,u.children.length-g));l.height=u.height,l.leaf=u.leaf,M(u,this.toBBox),M(l,this.toBBox),r?i[r-1].children.push(l):this._splitRoot(u,l)},J.prototype._splitRoot=function(i,r){this.data=y([i,r]),this.data.height=i.height+1,this.data.leaf=!1,M(this.data,this.toBBox)},J.prototype._chooseSplitIndex=function(i,r,u){for(var x,f,g,l,w,F,k,G=1/0,Y=1/0,z=r;z<=u-r;z++){var b=B(i,0,z,this.toBBox),U=B(i,z,u,this.toBBox),E=(f=b,g=U,void 0,void 0,void 0,void 0,l=Math.max(f.minX,g.minX),w=Math.max(f.minY,g.minY),F=Math.min(f.maxX,g.maxX),k=Math.min(f.maxY,g.maxY),Math.max(0,F-l)*Math.max(0,k-w)),d=N(b)+N(U);E<G?(G=E,x=z,Y=d<Y?d:Y):E===G&&d<Y&&(Y=d,x=z)}return x||u-r},J.prototype._chooseSplitAxis=function(i,r,u){var x=i.leaf?this.compareMinX:rt,f=i.leaf?this.compareMinY:H;this._allDistMargin(i,r,u,x)<this._allDistMargin(i,r,u,f)&&i.children.sort(x)},J.prototype._allDistMargin=function(i,r,u,x){i.children.sort(x);for(var f=this.toBBox,g=B(i,0,r,f),l=B(i,u-r,u,f),w=D(g)+D(l),F=r;F<u-r;F++){var k=i.children[F];R(g,i.leaf?f(k):k),w+=D(g)}for(var G=u-r-1;G>=r;G--){var Y=i.children[G];R(l,i.leaf?f(Y):Y),w+=D(l)}return w},J.prototype._adjustParentBBoxes=function(i,r,u){for(var x=u;x>=0;x--)R(r[x],i)},J.prototype._condense=function(i){for(var r=i.length-1,u=void 0;r>=0;r--)0===i[r].children.length?r>0?(u=i[r-1].children).splice(u.indexOf(i[r]),1):this.clear():M(i[r],this.toBBox)},J}()},3171:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>H});var N,it=T(3632),J=T(9972),A=T(1911),M=T(1729),B=(N=function(D,m){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,y){C.__proto__=y}||function(C,y){for(var o in y)Object.prototype.hasOwnProperty.call(y,o)&&(C[o]=y[o])})(D,m)},function(D,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function C(){this.constructor=D}N(D,m),D.prototype=null===m?Object.create(m):(C.prototype=m.prototype,new C)}),R=function(N){function D(m){var C=N.call(this)||this;return C.id_=void 0,C.geometryName_="geometry",C.style_=null,C.styleFunction_=void 0,C.geometryChangeKey_=null,C.addChangeListener(C.geometryName_,C.handleGeometryChanged_),m&&("function"==typeof m.getSimplifiedGeometry?C.setGeometry(m):C.setProperties(m)),C}return B(D,N),D.prototype.clone=function(){var m=new D(this.hasProperties()?this.getProperties():null);m.setGeometryName(this.getGeometryName());var C=this.getGeometry();C&&m.setGeometry(C.clone());var y=this.getStyle();return y&&m.setStyle(y),m},D.prototype.getGeometry=function(){return this.get(this.geometryName_)},D.prototype.getId=function(){return this.id_},D.prototype.getGeometryName=function(){return this.geometryName_},D.prototype.getStyle=function(){return this.style_},D.prototype.getStyleFunction=function(){return this.styleFunction_},D.prototype.handleGeometryChange_=function(){this.changed()},D.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,M.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);var m=this.getGeometry();m&&(this.geometryChangeKey_=(0,M.oL)(m,J.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()},D.prototype.setGeometry=function(m){this.set(this.geometryName_,m)},D.prototype.setStyle=function(m){this.style_=m,this.styleFunction_=m?function rt(N){return"function"==typeof N?N:(Array.isArray(N)?D=N:((0,A.h)("function"==typeof N.getZIndex,41),D=[N]),function(){return D});var D}(m):void 0,this.changed()},D.prototype.setId=function(m){this.id_=m,this.changed()},D.prototype.setGeometryName=function(m){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=m,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},D}(it.Z);const H=R},5813:(Tt,ft,T)=>{"use strict";T.d(ft,{y:()=>J});var it=T(3783);function J(A){return Array.isArray(A)?(0,it.BB)(A):A}},3343:(Tt,ft,T)=>{"use strict";function it(A,M,B,R){for(var rt=A[M],H=A[M+1],N=0,D=M+R;D<B;D+=R){var m=A[D],C=A[D+1];N+=Math.sqrt((m-rt)*(m-rt)+(C-H)*(C-H)),rt=m,H=C}return N}T.d(ft,{W:()=>it})},4511:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>H});var N,it=T(4593),J=T(2402),A=T(9466),M=T(109),B=(N=function(D,m){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,y){C.__proto__=y}||function(C,y){for(var o in y)Object.prototype.hasOwnProperty.call(y,o)&&(C[o]=y[o])})(D,m)},function(D,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function C(){this.constructor=D}N(D,m),D.prototype=null===m?Object.create(m):(C.prototype=m.prototype,new C)}),rt=function(N){function D(m){var C=this,y=m||{},o=(0,A.f0)({},y);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(C=N.call(this,o)||this).declutter_=void 0!==y.declutter&&y.declutter,C.renderBuffer_=void 0!==y.renderBuffer?y.renderBuffer:100,C.style_=null,C.styleFunction_=void 0,C.setStyle(y.style),C.updateWhileAnimating_=void 0!==y.updateWhileAnimating&&y.updateWhileAnimating,C.updateWhileInteracting_=void 0!==y.updateWhileInteracting&&y.updateWhileInteracting,C}return B(D,N),D.prototype.getDeclutter=function(){return this.declutter_},D.prototype.getFeatures=function(m){return N.prototype.getFeatures.call(this,m)},D.prototype.getRenderBuffer=function(){return this.renderBuffer_},D.prototype.getRenderOrder=function(){return this.get("renderOrder")},D.prototype.getStyle=function(){return this.style_},D.prototype.getStyleFunction=function(){return this.styleFunction_},D.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},D.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},D.prototype.renderDeclutter=function(m){m.declutterTree||(m.declutterTree=new J(9)),this.getRenderer().renderDeclutter(m)},D.prototype.setRenderOrder=function(m){this.set("renderOrder",m)},D.prototype.setStyle=function(m){this.style_=void 0!==m?m:M.yF,this.styleFunction_=null===m?void 0:(0,M.J$)(this.style_),this.changed()},D}(it.Z);const H=rt},7639:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>J});const J=function(){function A(){}return A.prototype.drawCustom=function(M,B,R,rt){},A.prototype.drawGeometry=function(M){},A.prototype.setStyle=function(M){},A.prototype.drawCircle=function(M,B){},A.prototype.drawFeature=function(M,B){},A.prototype.drawGeometryCollection=function(M,B){},A.prototype.drawLineString=function(M,B){},A.prototype.drawMultiLineString=function(M,B){},A.prototype.drawMultiPoint=function(M,B){},A.prototype.drawMultiPolygon=function(M,B){},A.prototype.drawPoint=function(M,B){},A.prototype.drawPolygon=function(M,B){},A.prototype.drawText=function(M,B){},A.prototype.setFillStrokeStyle=function(M,B){},A.prototype.setImageStyle=function(M,B){},A.prototype.setTextStyle=function(M,B){},A}()},3620:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>m});var C,it=T(7639),J=T(5813),A=T(483),M=T(4686),B=T(2456),R=T(760),rt=T(874),H=T(2774),N=(C=function(y,o){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(i[u]=r[u])})(y,o)},function(y,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function i(){this.constructor=y}C(y,o),y.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}),D=function(C){function y(o,i,r,u,x,f,g){var l=C.call(this)||this;return l.context_=o,l.pixelRatio_=i,l.extent_=r,l.transform_=u,l.viewRotation_=x,l.squaredTolerance_=f,l.userTransform_=g,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=(0,A.Ue)(),l}return N(y,C),y.prototype.drawImages_=function(o,i,r,u){if(this.image_){var x=(0,rt.vT)(o,i,r,u,this.transform_,this.pixelCoordinates_),f=this.context_,g=this.tmpLocalTransform_,l=f.globalAlpha;1!=this.imageOpacity_&&(f.globalAlpha=l*this.imageOpacity_);var w=this.imageRotation_;this.imageRotateWithView_&&(w+=this.viewRotation_);for(var F=0,k=x.length;F<k;F+=2){var G=x[F]-this.imageAnchorX_,Y=x[F+1]-this.imageAnchorY_;if(0!==w||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var z=G+this.imageAnchorX_,b=Y+this.imageAnchorY_;(0,A.qC)(g,z,b,1,1,w,-z,-b),f.setTransform.apply(f,g),f.translate(z,b),f.scale(this.imageScale_[0],this.imageScale_[1]),f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),f.setTransform(1,0,0,1,0,0)}else f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,G,Y,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(f.globalAlpha=l)}},y.prototype.drawText_=function(o,i,r,u){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var x=(0,rt.vT)(o,i,r,u,this.transform_,this.pixelCoordinates_),f=this.context_,g=this.textRotation_;for(this.textRotateWithView_&&(g+=this.viewRotation_);i<r;i+=u){var l=x[i]+this.textOffsetX_,w=x[i+1]+this.textOffsetY_;if(0!==g||1!=this.textScale_[0]||1!=this.textScale_[1]){var F=(0,A.qC)(this.tmpLocalTransform_,l,w,1,1,g,-l,-w);f.setTransform.apply(f,F),f.translate(l,w),f.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&f.strokeText(this.text_,0,0),this.textFillState_&&f.fillText(this.text_,0,0),f.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&f.strokeText(this.text_,l,w),this.textFillState_&&f.fillText(this.text_,l,w)}}},y.prototype.moveToLineTo_=function(o,i,r,u,x){var f=this.context_,g=(0,rt.vT)(o,i,r,u,this.transform_,this.pixelCoordinates_);f.moveTo(g[0],g[1]);var l=g.length;x&&(l-=2);for(var w=2;w<l;w+=2)f.lineTo(g[w],g[w+1]);return x&&f.closePath(),r},y.prototype.drawRings_=function(o,i,r,u){for(var x=0,f=r.length;x<f;++x)i=this.moveToLineTo_(o,i,r[x],u,!0);return i},y.prototype.drawCircle=function(o){if((0,R.kK)(this.extent_,o.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=(0,H.Kr)(o,this.transform_,this.pixelCoordinates_),r=i[2]-i[0],u=i[3]-i[1],x=Math.sqrt(r*r+u*u),f=this.context_;f.beginPath(),f.arc(i[0],i[1],x,0,2*Math.PI),this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}""!==this.text_&&this.drawText_(o.getCenter(),0,2,2)}},y.prototype.setStyle=function(o){this.setFillStrokeStyle(o.getFill(),o.getStroke()),this.setImageStyle(o.getImage()),this.setTextStyle(o.getText())},y.prototype.setTransform=function(o){this.transform_=o},y.prototype.drawGeometry=function(o){switch(o.getType()){case"Point":this.drawPoint(o);break;case"LineString":this.drawLineString(o);break;case"Polygon":this.drawPolygon(o);break;case"MultiPoint":this.drawMultiPoint(o);break;case"MultiLineString":this.drawMultiLineString(o);break;case"MultiPolygon":this.drawMultiPolygon(o);break;case"GeometryCollection":this.drawGeometryCollection(o);break;case"Circle":this.drawCircle(o)}},y.prototype.drawFeature=function(o,i){var r=i.getGeometryFunction()(o);!r||!(0,R.kK)(this.extent_,r.getExtent())||(this.setStyle(i),this.drawGeometry(r))},y.prototype.drawGeometryCollection=function(o){for(var i=o.getGeometriesArray(),r=0,u=i.length;r<u;++r)this.drawGeometry(i[r])},y.prototype.drawPoint=function(o){this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=o.getFlatCoordinates(),r=o.getStride();this.image_&&this.drawImages_(i,0,i.length,r),""!==this.text_&&this.drawText_(i,0,i.length,r)},y.prototype.drawMultiPoint=function(o){this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=o.getFlatCoordinates(),r=o.getStride();this.image_&&this.drawImages_(i,0,i.length,r),""!==this.text_&&this.drawText_(i,0,i.length,r)},y.prototype.drawLineString=function(o){if(this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,o.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=o.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(r,0,r.length,o.getStride(),!1),i.stroke()}if(""!==this.text_){var u=o.getFlatMidpoint();this.drawText_(u,0,2,2)}}},y.prototype.drawMultiLineString=function(o){this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=o.getExtent();if((0,R.kK)(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,u=o.getFlatCoordinates(),x=0,f=o.getEnds(),g=o.getStride();r.beginPath();for(var l=0,w=f.length;l<w;++l)x=this.moveToLineTo_(u,x,f[l],g,!1);r.stroke()}if(""!==this.text_){var F=o.getFlatMidpoints();this.drawText_(F,0,F.length,2)}}},y.prototype.drawPolygon=function(o){if(this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,o.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(o.getOrientedFlatCoordinates(),0,o.getEnds(),o.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){var r=o.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},y.prototype.drawMultiPolygon=function(o){if(this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,R.kK)(this.extent_,o.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=o.getOrientedFlatCoordinates(),u=0,x=o.getEndss(),f=o.getStride();i.beginPath();for(var g=0,l=x.length;g<l;++g)u=this.drawRings_(r,u,x[g],f);this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){var F=o.getFlatInteriorPoints();this.drawText_(F,0,F.length,2)}}},y.prototype.setContextFillState_=function(o){var i=this.context_,r=this.contextFillState_;r?r.fillStyle!=o.fillStyle&&(r.fillStyle=o.fillStyle,i.fillStyle=o.fillStyle):(i.fillStyle=o.fillStyle,this.contextFillState_={fillStyle:o.fillStyle})},y.prototype.setContextStrokeState_=function(o){var i=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=o.lineCap&&(r.lineCap=o.lineCap,i.lineCap=o.lineCap),i.setLineDash&&((0,B.fS)(r.lineDash,o.lineDash)||i.setLineDash(r.lineDash=o.lineDash),r.lineDashOffset!=o.lineDashOffset&&(r.lineDashOffset=o.lineDashOffset,i.lineDashOffset=o.lineDashOffset)),r.lineJoin!=o.lineJoin&&(r.lineJoin=o.lineJoin,i.lineJoin=o.lineJoin),r.lineWidth!=o.lineWidth&&(r.lineWidth=o.lineWidth,i.lineWidth=o.lineWidth),r.miterLimit!=o.miterLimit&&(r.miterLimit=o.miterLimit,i.miterLimit=o.miterLimit),r.strokeStyle!=o.strokeStyle&&(r.strokeStyle=o.strokeStyle,i.strokeStyle=o.strokeStyle)):(i.lineCap=o.lineCap,i.setLineDash&&(i.setLineDash(o.lineDash),i.lineDashOffset=o.lineDashOffset),i.lineJoin=o.lineJoin,i.lineWidth=o.lineWidth,i.miterLimit=o.miterLimit,i.strokeStyle=o.strokeStyle,this.contextStrokeState_={lineCap:o.lineCap,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset,lineJoin:o.lineJoin,lineWidth:o.lineWidth,miterLimit:o.miterLimit,strokeStyle:o.strokeStyle})},y.prototype.setContextTextState_=function(o){var i=this.context_,r=this.contextTextState_,u=o.textAlign?o.textAlign:M.PH;r?(r.font!=o.font&&(r.font=o.font,i.font=o.font),r.textAlign!=u&&(r.textAlign=u,i.textAlign=u),r.textBaseline!=o.textBaseline&&(r.textBaseline=o.textBaseline,i.textBaseline=o.textBaseline)):(i.font=o.font,i.textAlign=u,i.textBaseline=o.textBaseline,this.contextTextState_={font:o.font,textAlign:u,textBaseline:o.textBaseline})},y.prototype.setFillStrokeStyle=function(o,i){var r=this;if(o){var u=o.getColor();this.fillState_={fillStyle:(0,J.y)(u||M.bL)}}else this.fillState_=null;if(i){var x=i.getColor(),f=i.getLineCap(),g=i.getLineDash(),l=i.getLineDashOffset(),w=i.getLineJoin(),F=i.getWidth(),k=i.getMiterLimit(),G=g||M.X9;this.strokeState_={lineCap:void 0!==f?f:M.mb,lineDash:1===this.pixelRatio_?G:G.map(function(Y){return Y*r.pixelRatio_}),lineDashOffset:(l||M.He)*this.pixelRatio_,lineJoin:void 0!==w?w:M.rc,lineWidth:(void 0!==F?F:M.yC)*this.pixelRatio_,miterLimit:void 0!==k?k:M.V4,strokeStyle:(0,J.y)(x||M.Tx)}}else this.strokeState_=null},y.prototype.setImageStyle=function(o){var i;if(o&&(i=o.getSize())){var r=o.getAnchor(),u=o.getOrigin();this.image_=o.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*this.pixelRatio_,this.imageAnchorY_=r[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=o.getOpacity(),this.imageOriginX_=u[0],this.imageOriginY_=u[1],this.imageRotateWithView_=o.getRotateWithView(),this.imageRotation_=o.getRotation(),this.imageScale_=o.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_}else this.image_=null},y.prototype.setTextStyle=function(o){if(o){var i=o.getFill();if(i){var r=i.getColor();this.textFillState_={fillStyle:(0,J.y)(r||M.bL)}}else this.textFillState_=null;var u=o.getStroke();if(u){var x=u.getColor(),f=u.getLineCap(),g=u.getLineDash(),l=u.getLineDashOffset(),w=u.getLineJoin(),F=u.getWidth(),k=u.getMiterLimit();this.textStrokeState_={lineCap:void 0!==f?f:M.mb,lineDash:g||M.X9,lineDashOffset:l||M.He,lineJoin:void 0!==w?w:M.rc,lineWidth:void 0!==F?F:M.yC,miterLimit:void 0!==k?k:M.V4,strokeStyle:(0,J.y)(x||M.Tx)}}else this.textStrokeState_=null;var G=o.getFont(),Y=o.getOffsetX(),z=o.getOffsetY(),b=o.getRotateWithView(),U=o.getRotation(),E=o.getScaleArray(),d=o.getText(),L=o.getTextAlign(),Q=o.getTextBaseline();this.textState_={font:void 0!==G?G:M.Df,textAlign:void 0!==L?L:M.PH,textBaseline:void 0!==Q?Q:M.ru},this.text_=void 0!==d?Array.isArray(d)?d.reduce(function(q,$,lt){return q+(lt%2?" ":$)},""):d:"",this.textOffsetX_=void 0!==Y?this.pixelRatio_*Y:0,this.textOffsetY_=void 0!==z?this.pixelRatio_*z:0,this.textRotateWithView_=void 0!==b&&b,this.textRotation_=void 0!==U?U:0,this.textScale_=[this.pixelRatio_*E[0],this.pixelRatio_*E[1]]}else this.text_=""},y}(it.Z);const m=D},8707:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>pi});var it={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},J=[it.FILL],A=[it.STROKE],M=[it.BEGIN_PATH],B=[it.CLOSE_PATH];const R=it;var I,rt=T(2401),H=T(7639),N=T(5813),D=T(760),m=T(4686),C=T(2456),y=T(392),o=(I=function(a,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(n[h]=e[h])})(a,t)},function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=a}I(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(I){function a(t,n,e,h){var s=I.call(this)||this;return s.tolerance=t,s.maxExtent=n,s.pixelRatio=h,s.maxLineWidth=0,s.resolution=e,s.beginGeometryInstruction1_=null,s.beginGeometryInstruction2_=null,s.bufferedMaxExtent_=null,s.instructions=[],s.coordinates=[],s.tmpCoordinate_=[],s.hitDetectionInstructions=[],s.state={},s}return o(a,I),a.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return 1==n?t:t.map(function(e){return e*n})},a.prototype.appendFlatPointCoordinates=function(t,n){for(var e=this.getBufferedMaxExtent(),h=this.tmpCoordinate_,s=this.coordinates,v=s.length,c=0,p=t.length;c<p;c+=n)h[0]=t[c],h[1]=t[c+1],(0,D.b8)(e,h)&&(s[v++]=h[0],s[v++]=h[1]);return v},a.prototype.appendFlatLineCoordinates=function(t,n,e,h,s,v){var c=this.coordinates,p=c.length,_=this.getBufferedMaxExtent();v&&(n+=h);var X,K,j,O=t[n],S=t[n+1],P=this.tmpCoordinate_,W=!0;for(X=n+h;X<e;X+=h)P[0]=t[X],P[1]=t[X+1],(j=(0,D.pX)(_,P))!==K?(W&&(c[p++]=O,c[p++]=S,W=!1),c[p++]=P[0],c[p++]=P[1]):j===rt.Z.INTERSECTING?(c[p++]=P[0],c[p++]=P[1],W=!1):W=!0,O=P[0],S=P[1],K=j;return(s&&W||X===n+h)&&(c[p++]=O,c[p++]=S),p},a.prototype.drawCustomCoordinates_=function(t,n,e,h,s){for(var v=0,c=e.length;v<c;++v){var p=e[v],_=this.appendFlatLineCoordinates(t,n,p,h,!1,!1);s.push(_),n=p}return n},a.prototype.drawCustom=function(t,n,e,h){this.beginGeometry(t,n);var p,_,O,S,P,s=t.getType(),v=t.getStride(),c=this.coordinates.length;switch(s){case"MultiPolygon":p=t.getOrientedFlatCoordinates(),S=[];var W=t.getEndss();P=0;for(var X=0,K=W.length;X<K;++X){var j=[];P=this.drawCustomCoordinates_(p,P,W[X],v,j),S.push(j)}this.instructions.push([R.CUSTOM,c,S,t,e,y.ug]),this.hitDetectionInstructions.push([R.CUSTOM,c,S,t,h||e,y.ug]);break;case"Polygon":case"MultiLineString":O=[],p="Polygon"==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),P=this.drawCustomCoordinates_(p,0,t.getEnds(),v,O),this.instructions.push([R.CUSTOM,c,O,t,e,y.o1]),this.hitDetectionInstructions.push([R.CUSTOM,c,O,t,h||e,y.o1]);break;case"LineString":case"Circle":p=t.getFlatCoordinates(),_=this.appendFlatLineCoordinates(p,0,p.length,v,!1,!1),this.instructions.push([R.CUSTOM,c,_,t,e,y.Ml]),this.hitDetectionInstructions.push([R.CUSTOM,c,_,t,h||e,y.Ml]);break;case"MultiPoint":p=t.getFlatCoordinates(),(_=this.appendFlatPointCoordinates(p,v))>c&&(this.instructions.push([R.CUSTOM,c,_,t,e,y.Ml]),this.hitDetectionInstructions.push([R.CUSTOM,c,_,t,h||e,y.Ml]));break;case"Point":p=t.getFlatCoordinates(),this.coordinates.push(p[0],p[1]),this.instructions.push([R.CUSTOM,c,_=this.coordinates.length,t,e]),this.hitDetectionInstructions.push([R.CUSTOM,c,_,t,h||e])}this.endGeometry(n)},a.prototype.beginGeometry=function(t,n){this.beginGeometryInstruction1_=[R.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[R.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},a.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},a.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var n,h,s,e=t.length,v=-1;for(n=0;n<e;++n)(s=(h=t[n])[0])==R.END_GEOMETRY?v=n:s==R.BEGIN_GEOMETRY&&(h[2]=n,(0,C.FZ)(this.hitDetectionInstructions,v,n),v=-1)},a.prototype.setFillStrokeStyle=function(t,n){var e=this.state;if(t){var h=t.getColor();e.fillStyle=(0,N.y)(h||m.bL)}else e.fillStyle=void 0;if(n){var s=n.getColor();e.strokeStyle=(0,N.y)(s||m.Tx);var v=n.getLineCap();e.lineCap=void 0!==v?v:m.mb;var c=n.getLineDash();e.lineDash=c?c.slice():m.X9;var p=n.getLineDashOffset();e.lineDashOffset=p||m.He;var _=n.getLineJoin();e.lineJoin=void 0!==_?_:m.rc;var O=n.getWidth();e.lineWidth=void 0!==O?O:m.yC;var S=n.getMiterLimit();e.miterLimit=void 0!==S?S:m.V4,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0},a.prototype.createFill=function(t){var n=t.fillStyle,e=[R.SET_FILL_STYLE,n];return"string"!=typeof n&&e.push(!0),e},a.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},a.prototype.createStroke=function(t){return[R.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},a.prototype.updateFillStyle=function(t,n){var e=t.fillStyle;("string"!=typeof e||t.currentFillStyle!=e)&&(void 0!==e&&this.instructions.push(n.call(this,t)),t.currentFillStyle=e)},a.prototype.updateStrokeStyle=function(t,n){var e=t.strokeStyle,h=t.lineCap,s=t.lineDash,v=t.lineDashOffset,c=t.lineJoin,p=t.lineWidth,_=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=h||s!=t.currentLineDash&&!(0,C.fS)(t.currentLineDash,s)||t.currentLineDashOffset!=v||t.currentLineJoin!=c||t.currentLineWidth!=p||t.currentMiterLimit!=_)&&(void 0!==e&&n.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=h,t.currentLineDash=s,t.currentLineDashOffset=v,t.currentLineJoin=c,t.currentLineWidth=p,t.currentMiterLimit=_)},a.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[R.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},a.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,D.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,D.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},a}(H.Z);const r=i;var u=function(){var I=function(a,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(n[h]=e[h])})(a,t)};return function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=a}I(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),x=function(I){function a(t,n,e,h){var s=I.call(this,t,n,e,h)||this;return s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s.declutterMode_=void 0,s.declutterImageWithText_=void 0,s}return u(a,I),a.prototype.drawPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var e=t.getFlatCoordinates(),h=t.getStride(),s=this.coordinates.length,v=this.appendFlatPointCoordinates(e,h);this.instructions.push([R.DRAW_IMAGE,s,v,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([R.DRAW_IMAGE,s,v,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},a.prototype.drawMultiPoint=function(t,n){if(this.image_){this.beginGeometry(t,n);var e=t.getFlatCoordinates(),h=t.getStride(),s=this.coordinates.length,v=this.appendFlatPointCoordinates(e,h);this.instructions.push([R.DRAW_IMAGE,s,v,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([R.DRAW_IMAGE,s,v,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}},a.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,I.prototype.finish.call(this)},a.prototype.setImageStyle=function(t,n){var e=t.getAnchor(),h=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=h[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=h[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n},a}(r);const f=x;var g=function(){var I=function(a,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(n[h]=e[h])})(a,t)};return function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=a}I(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),l=function(I){function a(t,n,e,h){return I.call(this,t,n,e,h)||this}return g(a,I),a.prototype.drawFlatCoordinates_=function(t,n,e,h){var s=this.coordinates.length,v=this.appendFlatLineCoordinates(t,n,e,h,!1,!1),c=[R.MOVE_TO_LINE_TO,s,v];return this.instructions.push(c),this.hitDetectionInstructions.push(c),e},a.prototype.drawLineString=function(t,n){var e=this.state;if(void 0!==e.strokeStyle&&void 0!==e.lineWidth){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,m.X9,m.He],M);var v=t.getFlatCoordinates(),c=t.getStride();this.drawFlatCoordinates_(v,0,v.length,c),this.hitDetectionInstructions.push(A),this.endGeometry(n)}},a.prototype.drawMultiLineString=function(t,n){var e=this.state;if(void 0!==e.strokeStyle&&void 0!==e.lineWidth){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],M);for(var v=t.getEnds(),c=t.getFlatCoordinates(),p=t.getStride(),_=0,O=0,S=v.length;O<S;++O)_=this.drawFlatCoordinates_(c,_,v[O],p);this.hitDetectionInstructions.push(A),this.endGeometry(n)}},a.prototype.finish=function(){var t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(A),this.reverseHitDetectionInstructions(),this.state=null,I.prototype.finish.call(this)},a.prototype.applyStroke=function(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(A),t.lastStroke=this.coordinates.length),t.lastStroke=0,I.prototype.applyStroke.call(this,t),this.instructions.push(M)},a}(r);const w=l;var F=T(9182),k=function(){var I=function(a,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(n[h]=e[h])})(a,t)};return function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=a}I(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),G=function(I){function a(t,n,e,h){return I.call(this,t,n,e,h)||this}return k(a,I),a.prototype.drawFlatCoordinatess_=function(t,n,e,h){var s=this.state,v=void 0!==s.fillStyle,c=void 0!==s.strokeStyle,p=e.length;this.instructions.push(M),this.hitDetectionInstructions.push(M);for(var _=0;_<p;++_){var O=e[_],S=this.coordinates.length,P=this.appendFlatLineCoordinates(t,n,O,h,!0,!c),W=[R.MOVE_TO_LINE_TO,S,P];this.instructions.push(W),this.hitDetectionInstructions.push(W),c&&(this.instructions.push(B),this.hitDetectionInstructions.push(B)),n=O}return v&&(this.instructions.push(J),this.hitDetectionInstructions.push(J)),c&&(this.instructions.push(A),this.hitDetectionInstructions.push(A)),n},a.prototype.drawCircle=function(t,n){var e=this.state;if(void 0!==e.fillStyle||void 0!==e.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,m.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var v=t.getFlatCoordinates(),c=t.getStride(),p=this.coordinates.length;this.appendFlatLineCoordinates(v,0,v.length,c,!1,!1);var _=[R.CIRCLE,p];this.instructions.push(M,_),this.hitDetectionInstructions.push(M,_),void 0!==e.fillStyle&&(this.instructions.push(J),this.hitDetectionInstructions.push(J)),void 0!==e.strokeStyle&&(this.instructions.push(A),this.hitDetectionInstructions.push(A)),this.endGeometry(n)}},a.prototype.drawPolygon=function(t,n){var e=this.state;if(void 0!==e.fillStyle||void 0!==e.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,m.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var v=t.getEnds(),c=t.getOrientedFlatCoordinates(),p=t.getStride();this.drawFlatCoordinatess_(c,0,v,p),this.endGeometry(n)}},a.prototype.drawMultiPolygon=function(t,n){var e=this.state;if(void 0!==e.fillStyle||void 0!==e.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([R.SET_FILL_STYLE,m.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([R.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);for(var v=t.getEndss(),c=t.getOrientedFlatCoordinates(),p=t.getStride(),_=0,O=0,S=v.length;O<S;++O)_=this.drawFlatCoordinatess_(c,_,v[O],p);this.endGeometry(n)}},a.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var n=this.coordinates,e=0,h=n.length;e<h;++e)n[e]=(0,F.uZ)(n[e],t);return I.prototype.finish.call(this)},a.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},a}(r);const Y=G;var b=T(119);function U(I,a,t,n,e){var O,S,P,W,X,K,j,V,tt,h=t,s=t,v=0,c=0,p=t;for(O=t;O<n;O+=e){var ot=a[O],at=a[O+1];void 0!==W&&(V=ot-W,tt=at-X,P=Math.sqrt(V*V+tt*tt),void 0!==K&&(c+=S,Math.acos((K*V+j*tt)/(S*P))>I&&(c>v&&(v=c,h=p,s=O),c=0,p=O-e)),S=P,K=V,j=tt),W=ot,X=at}return(c+=P)>v?[p,O]:[h,s]}var E=function(){var I=function(a,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(n[h]=e[h])})(a,t)};return function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=a}I(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),d={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},L=function(I){function a(t,n,e,h){var s=I.call(this,t,n,e,h)||this;return s.labels_=null,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=void 0,s.textRotation_=0,s.textFillState_=null,s.fillStates={},s.textStrokeState_=null,s.strokeStates={},s.textState_={},s.textStates={},s.textKey_="",s.fillKey_="",s.strokeKey_="",s.declutterImageWithText_=void 0,s}return E(a,I),a.prototype.finish=function(){var t=I.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},a.prototype.drawText=function(t,n){var s=this.textState_;if(""!==this.text_&&s&&(this.textFillState_||this.textStrokeState_)){var v=this.coordinates,c=v.length,p=t.getType(),_=null,O=t.getStride();if("line"!==s.placement||"LineString"!=p&&"MultiLineString"!=p&&"Polygon"!=p&&"MultiPolygon"!=p){var ut=s.overflow?null:[];switch(p){case"Point":case"MultiPoint":_=t.getFlatCoordinates();break;case"LineString":_=t.getFlatMidpoint();break;case"Circle":_=t.getCenter();break;case"MultiLineString":_=t.getFlatMidpoints(),O=2;break;case"Polygon":_=t.getFlatInteriorPoint(),s.overflow||ut.push(_[2]/this.resolution),O=3;break;case"MultiPolygon":var nt=t.getFlatInteriorPoints();for(_=[],W=0,X=nt.length;W<X;W+=3)s.overflow||ut.push(nt[W+2]/this.resolution),_.push(nt[W],nt[W+1]);if(0===_.length)return;O=2}if((et=this.appendFlatPointCoordinates(_,O))===c)return;if(ut&&(et-c)/2!=_.length/O){var st=c/2;ut=ut.filter(function(mt,gt){var Et=v[2*(st+gt)]===_[gt*O]&&v[2*(st+gt)+1]===_[gt*O+1];return Et||--st,Et})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var dt=s.padding;if(dt!=m.oB&&(s.scale[0]<0||s.scale[1]<0)){var vt=s.padding[0],ct=s.padding[1],ht=s.padding[2],_t=s.padding[3];s.scale[0]<0&&(ct=-ct,_t=-_t),s.scale[1]<0&&(vt=-vt,ht=-ht),dt=[vt,ct,ht,_t]}var It=this.pixelRatio;this.instructions.push([R.DRAW_IMAGE,c,et,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,dt==m.oB?m.oB:dt.map(function(mt){return mt*It}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ut]);var St=1/It;this.hitDetectionInstructions.push([R.DRAW_IMAGE,c,et,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[St,St],NaN,void 0,this.declutterImageWithText_,dt,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,ut]),this.endGeometry(n)}else{if(!(0,D.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;var S=void 0;if(_=t.getFlatCoordinates(),"LineString"==p)S=[_.length];else if("MultiLineString"==p)S=t.getEnds();else if("Polygon"==p)S=t.getEnds().slice(0,1);else if("MultiPolygon"==p){var P=t.getEndss();S=[];for(var W=0,X=P.length;W<X;++W)S.push(P[W][0])}this.beginGeometry(t,n);for(var K=s.textAlign,j=0,V=void 0,tt=0,ot=S.length;tt<ot;++tt){if(null==K){var at=U(s.maxAngle,_,j,S[tt],O);j=at[0],V=at[1]}else V=S[tt];for(W=j;W<V;W+=O)v.push(_[W],_[W+1]);var et;j=S[tt],this.drawChars_(c,et=v.length),c=et}this.endGeometry(n)}}},a.prototype.saveTextStates_=function(){var t=this.textStrokeState_,n=this.textState_,e=this.textFillState_,h=this.strokeKey_;t&&(h in this.strokeStates||(this.strokeStates[h]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||m.PH,justify:n.justify,textBaseline:n.textBaseline||m.ru,scale:n.scale});var v=this.fillKey_;e&&(v in this.fillStates||(this.fillStates[v]={fillStyle:e.fillStyle}))},a.prototype.drawChars_=function(t,n){var e=this.textStrokeState_,h=this.textState_,s=this.strokeKey_,v=this.textKey_,c=this.fillKey_;this.saveTextStates_();var p=this.pixelRatio,_=d[h.textBaseline],O=this.textOffsetY_*p,S=this.text_,P=e?e.lineWidth*Math.abs(h.scale[0])/2:0;this.instructions.push([R.DRAW_CHARS,t,n,_,h.overflow,c,h.maxAngle,p,O,s,P*p,S,v,1]),this.hitDetectionInstructions.push([R.DRAW_CHARS,t,n,_,h.overflow,c,h.maxAngle,1,O,s,P,S,v,1/p])},a.prototype.setTextStyle=function(t,n){var e,h,s;if(t){var v=t.getFill();v?((h=this.textFillState_)||(this.textFillState_=h={}),h.fillStyle=(0,N.y)(v.getColor()||m.bL)):this.textFillState_=h=null;var c=t.getStroke();if(c){(s=this.textStrokeState_)||(this.textStrokeState_=s={});var p=c.getLineDash(),_=c.getLineDashOffset(),O=c.getWidth(),S=c.getMiterLimit();s.lineCap=c.getLineCap()||m.mb,s.lineDash=p?p.slice():m.X9,s.lineDashOffset=void 0===_?m.He:_,s.lineJoin=c.getLineJoin()||m.rc,s.lineWidth=void 0===O?m.yC:O,s.miterLimit=void 0===S?m.V4:S,s.strokeStyle=(0,N.y)(c.getColor()||m.Tx)}else this.textStrokeState_=s=null;e=this.textState_;var P=t.getFont()||m.Df;(0,m.Qx)(P);var W=t.getScaleArray();e.overflow=t.getOverflow(),e.font=P,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||m.ru,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||m.oB,e.scale=void 0===W?[1,1]:W;var X=t.getOffsetX(),K=t.getOffsetY(),j=t.getRotateWithView(),V=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===X?0:X,this.textOffsetY_=void 0===K?0:K,this.textRotateWithView_=void 0!==j&&j,this.textRotation_=void 0===V?0:V,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:(0,b.sq)(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=h?"string"==typeof h.fillStyle?h.fillStyle:"|"+(0,b.sq)(h.fillStyle):""}else this.text_="";this.declutterImageWithText_=n},a}(r),q={Circle:Y,Default:r,Image:f,LineString:w,Polygon:Y,Text:L},$=function(){function I(a,t,n,e){this.tolerance_=a,this.maxExtent_=t,this.pixelRatio_=e,this.resolution_=n,this.buildersByZIndex_={}}return I.prototype.finish=function(){var a={};for(var t in this.buildersByZIndex_){a[t]=a[t]||{};var n=this.buildersByZIndex_[t];for(var e in n){var h=n[e].finish();a[t][e]=h}}return a},I.prototype.getBuilder=function(a,t){var n=void 0!==a?a.toString():"0",e=this.buildersByZIndex_[n];void 0===e&&(this.buildersByZIndex_[n]=e={});var h=e[t];return void 0===h&&(h=new(0,q[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),e[t]=h),h},I}();const lt=$;var yt=T(2121),Ot=T(9996),xt=T(483),Mt=T(2156),wt=T(874);function Xt(I,a,t,n,e,h,s,v,c,p,_,O){var S=I[a],P=I[a+1],W=0,X=0,K=0,j=0;function V(){W=S,X=P,S=I[a+=n],P=I[a+1],j+=K,K=Math.sqrt((S-W)*(S-W)+(P-X)*(P-X))}do{V()}while(a<t-n&&j+K<h);for(var tt=0===K?0:(h-j)/K,ot=(0,Mt.t7)(W,S,tt),at=(0,Mt.t7)(X,P,tt),et=a-n,ut=j,nt=h+v*c(p,e,_);a<t-n&&j+K<nt;)V();var vt,st=(0,Mt.t7)(W,S,tt=0===K?0:(nt-j)/K),dt=(0,Mt.t7)(X,P,tt);if(O){var ct=[ot,at,st,dt];(0,wt.U1)(ct,0,4,2,O,ct,ct),vt=ct[0]>ct[2]}else vt=ot>st;var St,ht=Math.PI,_t=[],It=et+n===a;if(K=0,j=ut,S=I[a=et],P=I[a+1],It)return V(),St=Math.atan2(P-X,S-W),vt&&(St+=St>0?-ht:ht),_t[0]=[pt=(st+ot)/2,mt=(dt+at)/2,(nt-h)/2,St,e],_t;for(var gt=0,Et=(e=e.replace(/\n/g," ")).length;gt<Et;){V();var Ct=Math.atan2(P-X,S-W);if(vt&&(Ct+=Ct>0?-ht:ht),void 0!==St){var Z=Ct-St;if(Z+=Z>ht?-2*ht:Z<-ht?2*ht:0,Math.abs(Z)>s)return null}St=Ct;for(var Dt=gt,Rt=0;gt<Et;++gt){var Vt=v*c(p,e[vt?Et-gt-1:gt],_);if(a+n<t&&j+K<h+Rt+Vt/2)break;Rt+=Vt}if(gt!==Dt){var $t=vt?e.substring(Et-Dt,Et-gt):e.substring(Dt,gt),pt=(0,Mt.t7)(W,S,tt=0===K?0:(h+Rt/2-j)/K),mt=(0,Mt.t7)(X,P,tt);_t.push([pt,mt,Rt/2,Ct,$t]),h+=Rt}}return _t}var Jt=T(3343),Ht=(0,D.lJ)(),Yt=[],Wt=[],kt=[],Zt=[];function De(I){return I[3].declutterBox}var ze=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Le(I,a){return("start"===a||"end"===a)&&!ze.test(I)&&(a="start"===a?"left":"right"),d[a]}function be(I,a,t){return t>0&&I.push("\n",""),I.push(a,""),I}var Je=function(){function I(a,t,n,e){this.overlaps=n,this.pixelRatio=t,this.resolution=a,this.instructions=e.instructions,this.coordinates=e.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,xt.Ue)(),this.hitDetectionInstructions=e.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=e.fillStates||{},this.strokeStates=e.strokeStates||{},this.textStates=e.textStates||{},this.widths_={},this.labels_={}}return I.prototype.createLabel=function(a,t,n,e){var h=a+t+n+e;if(this.labels_[h])return this.labels_[h];var s=e?this.strokeStates[e]:null,v=n?this.fillStates[n]:null,c=this.textStates[t],p=this.pixelRatio,_=[c.scale[0]*p,c.scale[1]*p],O=Array.isArray(a),S=c.justify?d[c.justify]:Le(Array.isArray(a)?a[0]:a,c.textAlign||m.PH),P=e&&s.lineWidth?s.lineWidth:0,W=O?a:a.split("\n").reduce(be,[]),X=(0,m.Zw)(c,W),V=X.widths,tt=X.heights,ot=X.lineWidths,at=X.width+P,et=[],ut=(at+2)*_[0],nt=(X.height+P)*_[1],st={width:ut<0?Math.floor(ut):Math.ceil(ut),height:nt<0?Math.floor(nt):Math.ceil(nt),contextInstructions:et};(1!=_[0]||1!=_[1])&&et.push("scale",_),e&&(et.push("strokeStyle",s.strokeStyle),et.push("lineWidth",P),et.push("lineCap",s.lineCap),et.push("lineJoin",s.lineJoin),et.push("miterLimit",s.miterLimit),(Ot.Id?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(et.push("setLineDash",[s.lineDash]),et.push("lineDashOffset",s.lineDashOffset))),n&&et.push("fillStyle",v.fillStyle),et.push("textBaseline","middle"),et.push("textAlign","center");for(var gt,vt=.5-S,ct=S*at+vt*P,ht=[],_t=[],It=0,St=0,pt=0,mt=0,Et=0,Ct=W.length;Et<Ct;Et+=2){var Z=W[Et];if("\n"!==Z){var Dt=W[Et+1]||c.font;Dt!==gt&&(e&&ht.push("font",Dt),n&&_t.push("font",Dt),gt=Dt),It=Math.max(It,tt[pt]);var Rt=[Z,ct+vt*V[pt]+S*(V[pt]-ot[mt]),.5*(P+It)+St];ct+=V[pt],e&&ht.push("strokeText",Rt),n&&_t.push("fillText",Rt),++pt}else St+=It,It=0,ct=S*at+vt*P,++mt}return Array.prototype.push.apply(et,ht),Array.prototype.push.apply(et,_t),this.labels_[h]=st,st},I.prototype.replayTextBackground_=function(a,t,n,e,h,s,v){a.beginPath(),a.moveTo.apply(a,t),a.lineTo.apply(a,n),a.lineTo.apply(a,e),a.lineTo.apply(a,h),a.lineTo.apply(a,t),s&&(this.alignFill_=s[2],this.fill_(a)),v&&(this.setStrokeStyle_(a,v),a.stroke())},I.prototype.calculateImageOrLabelDimensions_=function(a,t,n,e,h,s,v,c,p,_,O,S,P,W,X,K){var st,j=n-(v*=S[0]),V=e-(c*=S[1]),tt=h+p>a?a-p:h,ot=s+_>t?t-_:s,at=W[3]+tt*S[0]+W[1],et=W[0]+ot*S[1]+W[2],ut=j-W[3],nt=V-W[0];return(X||0!==O)&&(Yt[0]=ut,Zt[0]=ut,Yt[1]=nt,Wt[1]=nt,Wt[0]=ut+at,kt[0]=Wt[0],kt[1]=nt+et,Zt[1]=kt[1]),0!==O?(st=(0,xt.qC)((0,xt.Ue)(),n,e,1,1,O,-n,-e),(0,xt.nn)(st,Yt),(0,xt.nn)(st,Wt),(0,xt.nn)(st,kt),(0,xt.nn)(st,Zt),(0,D.T9)(Math.min(Yt[0],Wt[0],kt[0],Zt[0]),Math.min(Yt[1],Wt[1],kt[1],Zt[1]),Math.max(Yt[0],Wt[0],kt[0],Zt[0]),Math.max(Yt[1],Wt[1],kt[1],Zt[1]),Ht)):(0,D.T9)(Math.min(ut,ut+at),Math.min(nt,nt+et),Math.max(ut,ut+at),Math.max(nt,nt+et),Ht),P&&(j=Math.round(j),V=Math.round(V)),{drawImageX:j,drawImageY:V,drawImageW:tt,drawImageH:ot,originX:p,originY:_,declutterBox:{minX:Ht[0],minY:Ht[1],maxX:Ht[2],maxY:Ht[3],value:K},canvasTransform:st,scale:S}},I.prototype.replayImageOrLabel_=function(a,t,n,e,h,s,v){var p=e.declutterBox,_=a.canvas,O=v?v[2]*e.scale[0]/2:0;return p.minX-O<=_.width/t&&p.maxX+O>=0&&p.minY-O<=_.height/t&&p.maxY+O>=0&&(!(!s&&!v)&&this.replayTextBackground_(a,Yt,Wt,kt,Zt,s,v),(0,m._f)(a,e.canvasTransform,h,n,e.originX,e.originY,e.drawImageW,e.drawImageH,e.drawImageX,e.drawImageY,e.scale)),!0},I.prototype.fill_=function(a){if(this.alignFill_){var t=(0,xt.nn)(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;a.save(),a.translate(t[0]%n,t[1]%n),a.rotate(this.viewRotation_)}a.fill(),this.alignFill_&&a.restore()},I.prototype.setStrokeStyle_=function(a,t){a.strokeStyle=t[1],a.lineWidth=t[2],a.lineCap=t[3],a.lineJoin=t[4],a.miterLimit=t[5],a.setLineDash&&(a.lineDashOffset=t[7],a.setLineDash(t[6]))},I.prototype.drawLabelWithPointPlacement_=function(a,t,n,e){var h=this.textStates[t],s=this.createLabel(a,t,e,n),v=this.strokeStates[n],c=this.pixelRatio,p=Le(Array.isArray(a)?a[0]:a,h.textAlign||m.PH),_=d[h.textBaseline||m.ru],O=v&&v.lineWidth?v.lineWidth:0;return{label:s,anchorX:p*(s.width/c-2*h.scale[0])+2*(.5-p)*O,anchorY:_*s.height/c+2*(.5-_)*O}},I.prototype.execute_=function(a,t,n,e,h,s,v,c){var p;this.pixelCoordinates_&&(0,C.fS)(n,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=(0,wt.vT)(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),(0,xt.lk)(this.renderedTransform_,n));for(var P,W,X,K,j,V,tt,ot,at,et,ut,nt,mt,gt,Et,Ct,_=0,O=e.length,S=0,st=0,dt=0,vt=null,ct=null,ht=this.coordinateCache_,_t=this.viewRotation_,It=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,St={context:a,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:_t},pt=this.instructions!=e||this.overlaps?0:200;_<O;){var Z=e[_];switch(Z[0]){case R.BEGIN_GEOMETRY:Ct=Z[3],(mt=Z[1]).getGeometry()?void 0===v||(0,D.kK)(v,Ct.getExtent())?++_:_=Z[2]+1:_=Z[2];break;case R.BEGIN_PATH:st>pt&&(this.fill_(a),st=0),dt>pt&&(a.stroke(),dt=0),!st&&!dt&&(a.beginPath(),K=NaN,j=NaN),++_;break;case R.CIRCLE:var Rt=p[S=Z[1]],Gt=p[S+1],Pe=p[S+2]-Rt,Ae=p[S+3]-Gt,Be=Math.sqrt(Pe*Pe+Ae*Ae);a.moveTo(Rt+Be,Gt),a.arc(Rt,Gt,Be,0,2*Math.PI,!0),++_;break;case R.CLOSE_PATH:a.closePath(),++_;break;case R.CUSTOM:S=Z[1],P=Z[2];var yi=Z[4],We=6==Z.length?Z[5]:void 0;St.geometry=Z[3],St.feature=mt,_ in ht||(ht[_]=[]);var qt=ht[_];We?We(p,S,P,2,qt):(qt[0]=p[S],qt[1]=p[S+1],qt.length=2),yi(qt,St),++_;break;case R.DRAW_IMAGE:S=Z[1],P=Z[2],W=Z[4],X=Z[5];var ye=Z[6],mi=Z[7],xi=Z[8],Ei=Z[9],ke=Z[10],me=Z[11],Si=Z[12],se=Z[13],Ge=Z[14],te=Z[15];if(!(ot=Z[3])&&Z.length>=20){var xe=this.drawLabelWithPointPlacement_(at=Z[19],et=Z[20],ut=Z[21],nt=Z[22]);Z[3]=ot=xe.label,Z[4]=W=(xe.anchorX-Z[23])*this.pixelRatio,Z[5]=X=(xe.anchorY-Z[24])*this.pixelRatio,Z[6]=ye=ot.height,Z[13]=se=ot.width}var Ee=void 0;Z.length>25&&(Ee=Z[25]);var Se=void 0,he=void 0,le=void 0;Z.length>17?(Se=Z[16],he=Z[17],le=Z[18]):(Se=m.oB,he=!1,le=!1),ke&&It?me+=_t:!ke&&!It&&(me-=_t);for(var Ti=0;S<P;S+=2)if(!(Ee&&Ee[Ti++]<se/this.pixelRatio)){var Xe=[a,t,ot,Bt=this.calculateImageOrLabelDimensions_(ot.width,ot.height,p[S],p[S+1],se,ye,W,X,xi,Ei,me,Si,h,Se,he||le,mt),mi,he?vt:null,le?ct:null];if(c){if("none"===Ge)continue;if("obstacle"===Ge){c.insert(Bt.declutterBox);continue}var ue=void 0,Ie=void 0;if(te){var fe=P-S;if(!te[fe]){te[fe]=Xe;continue}if(ue=te[fe],delete te[fe],Ie=De(ue),c.collides(Ie))continue}if(c.collides(Bt.declutterBox))continue;ue&&(c.insert(Ie),this.replayImageOrLabel_.apply(this,ue)),c.insert(Bt.declutterBox)}this.replayImageOrLabel_.apply(this,Xe)}++_;break;case R.DRAW_CHARS:var Ye=Z[1],Ze=Z[2],Ce=Z[3],Oi=Z[4];nt=Z[5];var Ri=Z[6],Ne=Z[7],Ue=Z[8];ut=Z[9];var Te=Z[10];at=Z[11];var Ke=[Z[13],Z[13]],Oe=this.textStates[et=Z[12]],ee=Oe.font,ie=[Oe.scale[0]*Ne,Oe.scale[1]*Ne],ne=void 0;ee in this.widths_?ne=this.widths_[ee]:this.widths_[ee]=ne={};var je=(0,Jt.W)(p,Ye,Ze,2),Ve=Math.abs(ie[0])*(0,m.Kd)(ee,at,ne);if(Oi||Ve<=je){var re=Xt(p,Ye,Ze,2,at,(je-Ve)*d[this.textStates[et].textAlign],Ri,Math.abs(ie[0]),m.Kd,ee,ne,It?0:this.viewRotation_);t:if(re){var ae=[],Kt=void 0,ce=void 0,Lt=void 0,Pt=void 0;if(ut)for(Kt=0,ce=re.length;Kt<ce;++Kt){Lt=this.createLabel((Pt=re[Kt])[4],et,"",ut);var Bt=this.calculateImageOrLabelDimensions_(Lt.width,Lt.height,Pt[0],Pt[1],Lt.width,Lt.height,W=Pt[2]+(ie[0]<0?-Te:Te),X=Ce*Lt.height+2*(.5-Ce)*Te*ie[1]/ie[0]-Ue,0,0,Pt[3],Ke,!1,m.oB,!1,mt);if(c&&c.collides(Bt.declutterBox))break t;ae.push([a,t,Lt,Bt,1,null,null])}if(nt)for(Kt=0,ce=re.length;Kt<ce;++Kt){if(Lt=this.createLabel((Pt=re[Kt])[4],et,nt,""),Bt=this.calculateImageOrLabelDimensions_(Lt.width,Lt.height,Pt[0],Pt[1],Lt.width,Lt.height,W=Pt[2],X=Ce*Lt.height-Ue,0,0,Pt[3],Ke,!1,m.oB,!1,mt),c&&c.collides(Bt.declutterBox))break t;ae.push([a,t,Lt,Bt,1,null,null])}c&&c.load(ae.map(De));for(var Re=0,Mi=ae.length;Re<Mi;++Re)this.replayImageOrLabel_.apply(this,ae[Re])}}++_;break;case R.END_GEOMETRY:if(void 0!==s){var He=s(mt=Z[1],Ct);if(He)return He}++_;break;case R.FILL:pt?st++:this.fill_(a),++_;break;case R.MOVE_TO_LINE_TO:for(P=Z[2],tt=(Et=p[(S=Z[1])+1])+.5|0,((V=(gt=p[S])+.5|0)!==K||tt!==j)&&(a.moveTo(gt,Et),K=V,j=tt),S+=2;S<P;S+=2)V=(gt=p[S])+.5|0,tt=(Et=p[S+1])+.5|0,(S==P-2||V!==K||tt!==j)&&(a.lineTo(gt,Et),K=V,j=tt);++_;break;case R.SET_FILL_STYLE:vt=Z,this.alignFill_=Z[2],st&&(this.fill_(a),st=0,dt&&(a.stroke(),dt=0)),a.fillStyle=Z[1],++_;break;case R.SET_STROKE_STYLE:ct=Z,dt&&(a.stroke(),dt=0),this.setStrokeStyle_(a,Z),++_;break;case R.STROKE:pt?dt++:a.stroke(),++_;break;default:++_}}st&&this.fill_(a),dt&&a.stroke()},I.prototype.execute=function(a,t,n,e,h,s){this.viewRotation_=e,this.execute_(a,t,n,this.instructions,h,void 0,void 0,s)},I.prototype.executeHitDetection=function(a,t,n,e,h){return this.viewRotation_=n,this.execute_(a,1,t,this.hitDetectionInstructions,!0,e,h)},I}();const Qe=Je;var jt=T(1992),$e=T(9466),_e=["Polygon","Circle","LineString","Image","Text","Default"],qe=function(){function I(a,t,n,e,h,s){this.maxExtent_=a,this.overlaps_=e,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,xt.Ue)(),this.createExecutors_(h)}return I.prototype.clip=function(a,t){var n=this.getClipCoords(t);a.beginPath(),a.moveTo(n[0],n[1]),a.lineTo(n[2],n[3]),a.lineTo(n[4],n[5]),a.lineTo(n[6],n[7]),a.clip()},I.prototype.createExecutors_=function(a){for(var t in a){var n=this.executorsByZIndex_[t];void 0===n&&(this.executorsByZIndex_[t]=n={});var e=a[t];for(var h in e)n[h]=new Qe(this.resolution_,this.pixelRatio_,this.overlaps_,e[h])}},I.prototype.hasExecutors=function(a){for(var t in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[t],e=0,h=a.length;e<h;++e)if(a[e]in n)return!0;return!1},I.prototype.forEachFeatureAtCoordinate=function(a,t,n,e,h,s){var v=2*(e=Math.round(e))+1,c=(0,xt.qC)(this.hitDetectionTransform_,e+.5,e+.5,1/t,-1/t,-n,-a[0],-a[1]),p=!this.hitDetectionContext_;p&&(this.hitDetectionContext_=(0,jt.E4)(v,v));var O,_=this.hitDetectionContext_;_.canvas.width!==v||_.canvas.height!==v?(_.canvas.width=v,_.canvas.height=v):p||_.clearRect(0,0,v,v),void 0!==this.renderBuffer_&&(O=(0,D.lJ)(),(0,D.Wj)(O,a),(0,D.f3)(O,t*(this.renderBuffer_+e),O));var P,S=function ti(I){if(void 0!==ve[I])return ve[I];for(var a=2*I+1,t=I*I,n=new Array(t+1),e=0;e<=I;++e)for(var h=0;h<=I;++h){var s=e*e+h*h;if(s>t)break;var v=n[s];v||(n[s]=v=[]),v.push(4*((I+e)*a+(I+h))+3),e>0&&v.push(4*((I-e)*a+(I+h))+3),h>0&&(v.push(4*((I+e)*a+(I-h))+3),e>0&&v.push(4*((I-e)*a+(I-h))+3))}for(var c=[],p=(e=0,n.length);e<p;++e)n[e]&&c.push.apply(c,n[e]);return ve[I]=c,c}(e);function W(et,ut){for(var nt=_.getImageData(0,0,v,v).data,st=0,dt=S.length;st<dt;st++)if(nt[S[st]]>0){if(!s||"Image"!==P&&"Text"!==P||-1!==s.indexOf(et)){var vt=(S[st]-3)/4,ct=e-vt%v,ht=e-(vt/v|0),_t=h(et,ut,ct*ct+ht*ht);if(_t)return _t}_.clearRect(0,0,v,v);break}}var K,j,V,tt,ot,X=Object.keys(this.executorsByZIndex_).map(Number);for(X.sort(C.kK),K=X.length-1;K>=0;--K){var at=X[K].toString();for(V=this.executorsByZIndex_[at],j=_e.length-1;j>=0;--j)if(void 0!==(tt=V[P=_e[j]])&&(ot=tt.executeHitDetection(_,c,n,W,O)))return ot}},I.prototype.getClipCoords=function(a){var t=this.maxExtent_;if(!t)return null;var n=t[0],e=t[1],h=t[2],s=t[3],v=[n,e,n,s,h,s,h,e];return(0,wt.vT)(v,0,8,2,a,v),v},I.prototype.isEmpty=function(){return(0,$e.xb)(this.executorsByZIndex_)},I.prototype.execute=function(a,t,n,e,h,s,v){var c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(C.kK),this.maxExtent_&&(a.save(),this.clip(a,n));var _,O,S,P,W,X,p=s||_e;for(v&&c.reverse(),_=0,O=c.length;_<O;++_){var K=c[_].toString();for(W=this.executorsByZIndex_[K],S=0,P=p.length;S<P;++S)void 0!==(X=W[p[S]])&&X.execute(a,t,n,e,h,v)}this.maxExtent_&&a.restore()},I}(),ve={};const Me=qe;var oe=T(8587),ei=T(3620);var pe=T(9972);var Ut=T(521),ii=T(6398),we=T(3783),ge=T(1911),ni=T(8007),Fe=T(2956),ri=T(3641),ai=function(){var I=function(a,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(n[h]=e[h])})(a,t)};return function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=a}I(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qt=null,oi=function(I){function a(t,n,e,h,s,v){var c=I.call(this)||this;return c.hitDetectionImage_=null,c.image_=t||new Image,null!==h&&(c.image_.crossOrigin=h),c.canvas_={},c.color_=v,c.unlisten_=null,c.imageState_=s,c.size_=e,c.src_=n,c}return ai(a,I),a.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===Ut.Z.LOADED){Qt||(Qt=(0,jt.E4)(1,1)),Qt.drawImage(this.image_,0,0);try{Qt.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Qt=null,this.tainted_=!0}}return!0===this.tainted_},a.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(pe.Z.CHANGE)},a.prototype.handleImageError_=function(){this.imageState_=Ut.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},a.prototype.handleImageLoad_=function(){this.imageState_=Ut.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},a.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},a.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},a.prototype.getImageState=function(){return this.imageState_},a.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],n=this.size_[1],e=(0,jt.E4)(t,n);e.fillRect(0,0,t,n),this.hitDetectionImage_=e.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},a.prototype.getSize=function(){return this.size_},a.prototype.getSrc=function(){return this.src_},a.prototype.load=function(){if(this.imageState_==Ut.Z.IDLE){this.imageState_=Ut.Z.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,ri.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},a.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===Ut.Z.LOADED){var n=document.createElement("canvas");this.canvas_[t]=n,n.width=Math.ceil(this.image_.width*t),n.height=Math.ceil(this.image_.height*t);var e=n.getContext("2d");if(e.scale(t,t),e.drawImage(this.image_,0,0),e.globalCompositeOperation="multiply","multiply"===e.globalCompositeOperation||this.isTainted_())e.fillStyle=(0,we.XC)(this.color_),e.fillRect(0,0,n.width/t,n.height/t),e.globalCompositeOperation="destination-in",e.drawImage(this.image_,0,0);else{for(var h=e.getImageData(0,0,n.width,n.height),s=h.data,v=this.color_[0]/255,c=this.color_[1]/255,p=this.color_[2]/255,_=this.color_[3],O=0,S=s.length;O<S;O+=4)s[O]*=v,s[O+1]*=c,s[O+2]*=p,s[O+3]*=_;e.putImageData(h,0,0)}}},a.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},a}(ni.Z),hi=function(){var I=function(a,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(n[h]=e[h])})(a,t)};return function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=a}I(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),li=function(I){function a(t){var n=this,e=t||{};(n=I.call(this,{opacity:void 0!==e.opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode})||this).anchor_=void 0!==e.anchor?e.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",n.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",n.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",n.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;var p=void 0!==e.img?e.img:null;n.imgSize_=e.imgSize;var _=e.src;(0,ge.h)(!(void 0!==_&&p),4),(0,ge.h)(!p||p&&n.imgSize_,5),(void 0===_||0===_.length)&&p&&(_=p.src||(0,b.sq)(p)),(0,ge.h)(void 0!==_&&_.length>0,6);var O=void 0!==e.src?Ut.Z.IDLE:Ut.Z.LOADED;return n.color_=void 0!==e.color?(0,we._2)(e.color):null,n.iconImage_=function si(I,a,t,n,e,h){var s=Fe.c.get(a,n,h);return s||(s=new oi(I,a,t,n,e,h),Fe.c.set(a,n,h,s)),s}(p,_,void 0!==n.imgSize_?n.imgSize_:null,n.crossOrigin_,O,n.color_),n.offset_=void 0!==e.offset?e.offset:[0,0],n.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",n.origin_=null,n.size_=void 0!==e.size?e.size:null,n}return hi(a,I),a.prototype.clone=function(){var t=this.getScale();return new a({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},a.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var n=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!n)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=n[0]),"fraction"==this.anchorYUnits_&&(t[1]*=n[1])}if("top-left"!=this.anchorOrigin_){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+n[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}var e=this.getDisplacement();return[t[0]-e[0],t[1]+e[1]]},a.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},a.prototype.getColor=function(){return this.color_},a.prototype.getImage=function(t){return this.iconImage_.getImage(t)},a.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},a.prototype.getImageSize=function(){return this.iconImage_.getSize()},a.prototype.getImageState=function(){return this.iconImage_.getImageState()},a.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},a.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if("top-left"!=this.offsetOrigin_){var n=this.getSize(),e=this.iconImage_.getSize();if(!n||!e)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=e[0]-n[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=e[1]-n[1]-t[1])}return this.origin_=t,this.origin_},a.prototype.getSrc=function(){return this.iconImage_.getSrc()},a.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},a.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(pe.Z.CHANGE,t)},a.prototype.load=function(){this.iconImage_.load()},a.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(pe.Z.CHANGE,t)},a}(ii.Z);const ui=li;var At=.5,zt=T(8377),bt=T(1274),di=T(3481),_i=function(){var I=function(a,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(n[h]=e[h])})(a,t)};return function(a,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=a}I(a,t),a.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vi=function(I){function a(t){var n=I.call(this,t)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=(0,D.lJ)(),n.wrappedRenderedExtent_=(0,D.lJ)(),n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n.compositionContext_=null,n.opacity_=1,n}return _i(a,I),a.prototype.renderWorlds=function(t,n,e){var h=n.extent,s=n.viewState,v=s.center,c=s.resolution,p=s.projection,_=s.rotation,O=p.getExtent(),S=this.getLayer().getSource(),P=n.pixelRatio,W=n.viewHints,X=!(W[oe.Z.ANIMATING]||W[oe.Z.INTERACTING]),K=this.compositionContext_,j=Math.round(n.size[0]*P),V=Math.round(n.size[1]*P),tt=S.getWrapX()&&p.canWrapX(),ot=tt?(0,D.dz)(O):null,at=tt?Math.ceil((h[2]-O[2])/ot)+1:1,et=tt?Math.floor((h[0]-O[0])/ot):0;do{var ut=this.getRenderTransform(v,c,_,P,j,V,et*ot);t.execute(K,1,ut,_,X,void 0,e)}while(++et<at)},a.prototype.setupCompositionContext_=function(){if(1!==this.opacity_){var t=(0,jt.E4)(this.context.canvas.width,this.context.canvas.height,yt.r);this.compositionContext_=t}else this.compositionContext_=this.context},a.prototype.releaseCompositionContext_=function(){if(1!==this.opacity_){var t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,jt.jy)(this.compositionContext_),yt.r.push(this.compositionContext_.canvas),this.compositionContext_=null}},a.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())},a.prototype.renderFrame=function(t,n){var e=t.pixelRatio,h=t.layerStatesArray[t.layerIndex];(0,xt.n3)(this.pixelTransform,1/e,1/e),(0,xt.nb)(this.inversePixelTransform,this.pixelTransform);var s=(0,xt.BB)(this.pixelTransform);this.useContainer(n,s,this.getBackground(t));var v=this.context,c=v.canvas,p=this.replayGroup_,_=this.declutterExecutorGroup;if((!p||p.isEmpty())&&(!_||_.isEmpty()))return null;var O=Math.round(t.size[0]*e),S=Math.round(t.size[1]*e);c.width!=O||c.height!=S?(c.width=O,c.height=S,c.style.transform!==s&&(c.style.transform=s)):this.containerReused||v.clearRect(0,0,O,S),this.preRender(v,t);var P=t.viewState,W=P.projection;this.opacity_=h.opacity,this.setupCompositionContext_();var X=!1,K=!0;if(h.extent&&this.clipping){var j=(0,bt.dY)(h.extent,W);(X=(K=(0,D.kK)(j,t.extent))&&!(0,D.r4)(j,t.extent))&&this.clipUnrotated(this.compositionContext_,t,j)}return K&&this.renderWorlds(p,t),X&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(v,t),this.renderedRotation_!==P.rotation&&(this.renderedRotation_=P.rotation,this.hitDetectionImageData_=null),this.container},a.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var e=[this.context.canvas.width,this.context.canvas.height];(0,xt.nn)(this.pixelTransform,e);var h=this.renderedCenter_,s=this.renderedResolution_,v=this.renderedRotation_,c=this.renderedProjection_,p=this.wrappedRenderedExtent_,_=this.getLayer(),O=[],S=e[0]*At,P=e[1]*At;O.push(this.getRenderTransform(h,s,v,At,S,P,0).slice());var W=_.getSource(),X=c.getExtent();if(W.getWrapX()&&c.canWrapX()&&!(0,D.r4)(X,p)){for(var K=p[0],j=(0,D.dz)(X),V=0;K<X[0];)--V,O.push(this.getRenderTransform(h,s,v,At,S,P,j*V).slice()),K+=j;for(V=0,K=p[2];K>X[2];)++V,O.push(this.getRenderTransform(h,s,v,At,S,P,j*V).slice()),K-=j}this.hitDetectionImageData_=function fi(I,a,t,n,e,h,s){var p=(0,jt.E4)(I[0]*At,I[1]*At);p.imageSmoothingEnabled=!1;for(var _=p.canvas,O=new ei.Z(p,At,e,null,s),S=t.length,P=Math.floor(16777215/S),W={},X=1;X<=S;++X){var K=t[X-1],j=K.getStyleFunction()||n;if(n){var V=j(K,h);if(V){Array.isArray(V)||(V=[V]);for(var ot="#"+("000000"+(X*P).toString(16)).slice(-6),at=0,et=V.length;at<et;++at){var ut=V[at],nt=ut.getGeometryFunction()(K);if(nt&&(0,D.kK)(e,nt.getExtent())){var st=ut.clone(),dt=st.getFill();dt&&dt.setColor(ot);var vt=st.getStroke();vt&&(vt.setColor(ot),vt.setLineDash(null)),st.setText(void 0);var ct=ut.getImage();if(ct&&0!==ct.getOpacity()){var ht=ct.getImageSize();if(!ht)continue;var _t=(0,jt.E4)(ht[0],ht[1],void 0,{alpha:!1}),It=_t.canvas;_t.fillStyle=ot,_t.fillRect(0,0,It.width,It.height),st.setImage(new ui({img:It,imgSize:ht,anchor:ct.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ct.getOrigin(),opacity:1,size:ct.getSize(),scale:ct.getScale(),rotation:ct.getRotation(),rotateWithView:ct.getRotateWithView()}))}var St=st.getZIndex()||0;(pt=W[St])||(W[St]=pt={},pt.Polygon=[],pt.Circle=[],pt.LineString=[],pt.Point=[]),pt[nt.getType().replace("Multi","")].push(nt,st)}}}}}for(var mt=Object.keys(W).map(Number).sort(C.kK),gt=(X=0,mt.length);X<gt;++X){var pt=W[mt[X]];for(var Et in pt){var Ct=pt[Et];for(at=0,et=Ct.length;at<et;at+=2){O.setStyle(Ct[at+1]);for(var Z=0,Dt=a.length;Z<Dt;++Z)O.setTransform(a[Z]),O.drawGeometry(Ct[at])}}}return p.getImageData(0,0,_.width,_.height)}(e,O,this.renderedFeatures_,_.getStyleFunction(),p,s,v)}n(function ci(I,a,t){var n=[];if(t){var e=Math.floor(Math.round(I[0])*At),h=Math.floor(Math.round(I[1])*At),s=4*((0,Mt.uZ)(e,0,t.width-1)+(0,Mt.uZ)(h,0,t.height-1)*t.width),_=t.data[s+2]+256*(t.data[s+1]+256*t.data[s]),O=Math.floor(16777215/a.length);_&&_%O==0&&n.push(a[_/O-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},a.prototype.forEachFeatureAtCoordinate=function(t,n,e,h,s){var v=this;if(this.replayGroup_){var P,c=n.viewState.resolution,p=n.viewState.rotation,_=this.getLayer(),O={},S=function(X,K,j){var V=(0,b.sq)(X),tt=O[V];if(tt){if(!0!==tt&&j<tt.distanceSq){if(0===j)return O[V]=!0,s.splice(s.lastIndexOf(tt),1),h(X,_,K);tt.geometry=K,tt.distanceSq=j}}else{if(0===j)return O[V]=!0,h(X,_,K);s.push(O[V]={feature:X,layer:_,geometry:K,distanceSq:j,callback:h})}},W=[this.replayGroup_];return this.declutterExecutorGroup&&W.push(this.declutterExecutorGroup),W.some(function(X){return P=X.forEachFeatureAtCoordinate(t,c,p,e,S,X===v.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(K){return K.value}):null)}),P}},a.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},a.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},a.prototype.prepareFrame=function(t){var n=this.getLayer(),e=n.getSource();if(!e)return!1;var h=t.viewHints[oe.Z.ANIMATING],s=t.viewHints[oe.Z.INTERACTING],v=n.getUpdateWhileAnimating(),c=n.getUpdateWhileInteracting();if(this.ready&&!v&&h||!c&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var p=t.extent,_=t.viewState,O=_.projection,S=_.resolution,P=t.pixelRatio,W=n.getRevision(),X=n.getRenderBuffer(),K=n.getRenderOrder();void 0===K&&(K=zt.eR);var j=_.center.slice(),V=(0,D.f3)(p,X*S),tt=V.slice(),ot=[V.slice()],at=O.getExtent();if(e.getWrapX()&&O.canWrapX()&&!(0,D.r4)(at,t.extent)){var et=(0,D.dz)(at),ut=Math.max((0,D.dz)(V)/2,et);V[0]=at[0]-ut,V[2]=at[2]+ut,(0,di.Cf)(j,O);var nt=(0,D.Cf)(ot[0],O);nt[0]<at[0]&&nt[2]<at[2]?ot.push([nt[0]+et,nt[1],nt[2]+et,nt[3]]):nt[0]>at[0]&&nt[2]>at[2]&&ot.push([nt[0]-et,nt[1],nt[2]-et,nt[3]])}if(this.ready&&this.renderedResolution_==S&&this.renderedRevision_==W&&this.renderedRenderOrder_==K&&(0,D.r4)(this.wrappedRenderedExtent_,V))return(0,C.fS)(this.renderedExtent_,tt)||(this.hitDetectionImageData_=null,this.renderedExtent_=tt),this.renderedCenter_=j,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var dt,st=new lt((0,zt.Qz)(S,P),V,S,P);this.getLayer().getDeclutter()&&(dt=new lt((0,zt.Qz)(S,P),V,S,P));var ct,vt=(0,bt.Cs)();if(vt){for(var ht=0,_t=ot.length;ht<_t;++ht){var St=(0,bt.Fj)(ot[ht],O);e.loadFeatures(St,(0,bt.on)(S,O),vt)}ct=(0,bt.WO)(vt,O)}else for(ht=0,_t=ot.length;ht<_t;++ht)e.loadFeatures(ot[ht],S,O);var pt=(0,zt.se)(S,P),mt=!0,gt=function(Rt){var Gt,Vt=Rt.getStyleFunction()||n.getStyleFunction();if(Vt&&(Gt=Vt(Rt,S)),Gt){var $t=this.renderFeature(Rt,pt,Gt,st,ct,dt);mt=mt&&!$t}}.bind(this),Et=(0,bt.Fj)(V,O),Ct=e.getFeaturesInExtent(Et);for(K&&Ct.sort(K),ht=0,_t=Ct.length;ht<_t;++ht)gt(Ct[ht]);this.renderedFeatures_=Ct,this.ready=mt;var Z=st.finish(),Dt=new Me(V,S,P,e.getOverlaps(),Z,n.getRenderBuffer());return dt&&(this.declutterExecutorGroup=new Me(V,S,P,e.getOverlaps(),dt.finish(),n.getRenderBuffer())),this.renderedResolution_=S,this.renderedRevision_=W,this.renderedRenderOrder_=K,this.renderedExtent_=tt,this.wrappedRenderedExtent_=V,this.renderedCenter_=j,this.renderedProjection_=O,this.replayGroup_=Dt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},a.prototype.renderFeature=function(t,n,e,h,s,v){if(!e)return!1;var c=!1;if(Array.isArray(e))for(var p=0,_=e.length;p<_;++p)c=(0,zt.Pn)(h,t,e[p],n,this.boundHandleStyleImageChange_,s,v)||c;else c=(0,zt.Pn)(h,t,e,n,this.boundHandleStyleImageChange_,s,v);return c},a}(yt.Z);const pi=vi},8377:(Tt,ft,T)=>{"use strict";T.d(ft,{Pn:()=>N,Qz:()=>rt,eR:()=>B,se:()=>R});var it=T(521),J=T(119),M={Point:function r(f,g,l,w,F){var Y,k=l.getImage(),G=l.getText();if(k){if(k.getImageState()!=it.Z.LOADED)return;var z=f;if(F){var b=k.getDeclutterMode();if("none"!==b)if(z=F,"obstacle"===b){var U=f.getBuilder(l.getZIndex(),"Image");U.setImageStyle(k,Y),U.drawPoint(g,w)}else G&&G.getText()&&(Y={})}var E=z.getBuilder(l.getZIndex(),"Image");E.setImageStyle(k,Y),E.drawPoint(g,w)}if(G&&G.getText()){var d=f;F&&(d=F);var L=d.getBuilder(l.getZIndex(),"Text");L.setTextStyle(G,Y),L.drawText(g,w)}},LineString:function y(f,g,l,w,F){var k=l.getStroke();if(k){var G=f.getBuilder(l.getZIndex(),"LineString");G.setFillStrokeStyle(null,k),G.drawLineString(g,w)}var Y=l.getText();if(Y&&Y.getText()){var z=(F||f).getBuilder(l.getZIndex(),"Text");z.setTextStyle(Y),z.drawText(g,w)}},Polygon:function x(f,g,l,w,F){var k=l.getFill(),G=l.getStroke();if(k||G){var Y=f.getBuilder(l.getZIndex(),"Polygon");Y.setFillStrokeStyle(k,G),Y.drawPolygon(g,w)}var z=l.getText();if(z&&z.getText()){var b=(F||f).getBuilder(l.getZIndex(),"Text");b.setTextStyle(z),b.drawText(g,w)}},MultiPoint:function u(f,g,l,w,F){var Y,k=l.getImage(),G=l.getText();if(k){if(k.getImageState()!=it.Z.LOADED)return;var z=f;if(F){var b=k.getDeclutterMode();if("none"!==b)if(z=F,"obstacle"===b){var U=f.getBuilder(l.getZIndex(),"Image");U.setImageStyle(k,Y),U.drawMultiPoint(g,w)}else G&&G.getText()&&(Y={})}var E=z.getBuilder(l.getZIndex(),"Image");E.setImageStyle(k,Y),E.drawMultiPoint(g,w)}if(G&&G.getText()){var d=f;F&&(d=F);var L=d.getBuilder(l.getZIndex(),"Text");L.setTextStyle(G,Y),L.drawText(g,w)}},MultiLineString:function o(f,g,l,w,F){var k=l.getStroke();if(k){var G=f.getBuilder(l.getZIndex(),"LineString");G.setFillStrokeStyle(null,k),G.drawMultiLineString(g,w)}var Y=l.getText();if(Y&&Y.getText()){var z=(F||f).getBuilder(l.getZIndex(),"Text");z.setTextStyle(Y),z.drawText(g,w)}},MultiPolygon:function i(f,g,l,w,F){var k=l.getFill(),G=l.getStroke();if(G||k){var Y=f.getBuilder(l.getZIndex(),"Polygon");Y.setFillStrokeStyle(k,G),Y.drawMultiPolygon(g,w)}var z=l.getText();if(z&&z.getText()){var b=(F||f).getBuilder(l.getZIndex(),"Text");b.setTextStyle(z),b.drawText(g,w)}},GeometryCollection:function C(f,g,l,w,F){var G,Y,k=g.getGeometriesArray();for(G=0,Y=k.length;G<Y;++G)(0,M[k[G].getType()])(f,k[G],l,w,F)},Circle:function H(f,g,l,w,F){var k=l.getFill(),G=l.getStroke();if(k||G){var Y=f.getBuilder(l.getZIndex(),"Circle");Y.setFillStrokeStyle(k,G),Y.drawCircle(g,w)}var z=l.getText();if(z&&z.getText()){var b=(F||f).getBuilder(l.getZIndex(),"Text");b.setTextStyle(z),b.drawText(g,w)}}};function B(f,g){return parseInt((0,J.sq)(f),10)-parseInt((0,J.sq)(g),10)}function R(f,g){var l=rt(f,g);return l*l}function rt(f,g){return.5*f/g}function N(f,g,l,w,F,k,G){var Y=!1,z=l.getImage();if(z){var b=z.getImageState();b==it.Z.LOADED||b==it.Z.ERROR?z.unlistenImageChange(F):(b==it.Z.IDLE&&z.load(),z.listenImageChange(F),Y=!0)}return function D(f,g,l,w,F,k){var G=l.getGeometryFunction()(g);if(G){var Y=G.simplifyTransformed(w,F);l.getRenderer()?m(f,Y,l,g):(0,M[Y.getType()])(f,Y,l,g,k)}}(f,g,l,w,k,G),Y}function m(f,g,l,w){if("GeometryCollection"!=g.getType())f.getBuilder(l.getZIndex(),"Default").drawCustom(g,w,l.getRenderer(),l.getHitDetectionRenderer());else for(var F=g.getGeometries(),k=0,G=F.length;k<G;++k)m(f,F[k],l,w)}},5947:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>z});var it=T(2815),J=T(9889),A=T(8214),M=T(9972),B=T(4587),R=T(2909),rt=T(4702),H=T(4412),N=T(1345);function m(b,U){return[[-1/0,-1/0,1/0,1/0]]}T(1274);var o=T(1911),i=T(760),r=T(2456),u=T(119),x=T(9466),f=T(1729);function w(b,U){return function(E,d,L,Q,q){var $=this;!function l(b,U,E,d,L,Q,q){var $=new XMLHttpRequest;$.open("GET","function"==typeof b?b(E,d,L):b,!0),"arraybuffer"==U.getType()&&($.responseType="arraybuffer"),$.withCredentials=false,$.onload=function(lt){if(!$.status||$.status>=200&&$.status<300){var yt=U.getType(),Ot=void 0;"json"==yt||"text"==yt?Ot=$.responseText:"xml"==yt?(Ot=$.responseXML)||(Ot=(new DOMParser).parseFromString($.responseText,"application/xml")):"arraybuffer"==yt&&(Ot=$.response),Ot?Q(U.readFeatures(Ot,{extent:E,featureProjection:L}),U.readProjection(Ot)):q()}else q()},$.onerror=q,$.send()}(b,U,E,d,L,function(lt,yt){$.addFeatures(lt),void 0!==Q&&Q(lt)},q||N.Zn)}}var b,k=(b=function(U,E){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,L){d.__proto__=L}||function(d,L){for(var Q in L)Object.prototype.hasOwnProperty.call(L,Q)&&(d[Q]=L[Q])})(U,E)},function(U,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function d(){this.constructor=U}b(U,E),U.prototype=null===E?Object.create(E):(d.prototype=E.prototype,new d)}),G=function(b){function U(E,d,L){var Q=b.call(this,E)||this;return Q.feature=d,Q.features=L,Q}return k(U,b),U}(A.ZP),Y=function(b){function U(E){var d=this,L=E||{};(d=b.call(this,{attributions:L.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===L.wrapX||L.wrapX})||this).loader_=N.Zn,d.format_=L.format,d.overlaps_=void 0===L.overlaps||L.overlaps,d.url_=L.url,void 0!==L.loader?d.loader_=L.loader:void 0!==d.url_&&((0,o.h)(d.format_,7),d.loader_=w(d.url_,d.format_)),d.strategy_=void 0!==L.strategy?L.strategy:m;var q,$,Q=void 0===L.useSpatialIndex||L.useSpatialIndex;return d.featuresRtree_=Q?new R.Z:null,d.loadedExtentsRtree_=new R.Z,d.loadingExtentsCount_=0,d.nullGeometryFeatures_={},d.idIndex_={},d.uidIndex_={},d.featureChangeKeys_={},d.featuresCollection_=null,Array.isArray(L.features)?$=L.features:L.features&&($=(q=L.features).getArray()),!Q&&void 0===q&&(q=new it.Z($)),void 0!==$&&d.addFeaturesInternal($),void 0!==q&&d.bindFeaturesCollection_(q),d}return k(U,b),U.prototype.addFeature=function(E){this.addFeatureInternal(E),this.changed()},U.prototype.addFeatureInternal=function(E){var d=(0,u.sq)(E);if(this.addToIndex_(d,E)){this.setupChangeEvents_(d,E);var L=E.getGeometry();if(L){var Q=L.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(Q,E)}else this.nullGeometryFeatures_[d]=E;this.dispatchEvent(new G(H.Z.ADDFEATURE,E))}else this.featuresCollection_&&this.featuresCollection_.remove(E)},U.prototype.setupChangeEvents_=function(E,d){this.featureChangeKeys_[E]=[(0,f.oL)(d,M.Z.CHANGE,this.handleFeatureChange_,this),(0,f.oL)(d,B.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]},U.prototype.addToIndex_=function(E,d){var L=!0,Q=d.getId();return void 0!==Q&&(Q.toString()in this.idIndex_?L=!1:this.idIndex_[Q.toString()]=d),L&&((0,o.h)(!(E in this.uidIndex_),30),this.uidIndex_[E]=d),L},U.prototype.addFeatures=function(E){this.addFeaturesInternal(E),this.changed()},U.prototype.addFeaturesInternal=function(E){for(var d=[],L=[],Q=[],q=0,$=E.length;q<$;q++){var yt=(0,u.sq)(lt=E[q]);this.addToIndex_(yt,lt)&&L.push(lt)}q=0;for(var Ot=L.length;q<Ot;q++){var lt;yt=(0,u.sq)(lt=L[q]),this.setupChangeEvents_(yt,lt);var xt=lt.getGeometry();if(xt){var Mt=xt.getExtent();d.push(Mt),Q.push(lt)}else this.nullGeometryFeatures_[yt]=lt}if(this.featuresRtree_&&this.featuresRtree_.load(d,Q),this.hasListener(H.Z.ADDFEATURE)){q=0;for(var wt=L.length;q<wt;q++)this.dispatchEvent(new G(H.Z.ADDFEATURE,L[q]))}},U.prototype.bindFeaturesCollection_=function(E){var d=!1;this.addEventListener(H.Z.ADDFEATURE,function(L){d||(d=!0,E.push(L.feature),d=!1)}),this.addEventListener(H.Z.REMOVEFEATURE,function(L){d||(d=!0,E.remove(L.feature),d=!1)}),E.addEventListener(J.Z.ADD,function(L){d||(d=!0,this.addFeature(L.element),d=!1)}.bind(this)),E.addEventListener(J.Z.REMOVE,function(L){d||(d=!0,this.removeFeature(L.element),d=!1)}.bind(this)),this.featuresCollection_=E},U.prototype.clear=function(E){if(E){for(var d in this.featureChangeKeys_)this.featureChangeKeys_[d].forEach(f.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var Q=function(lt){this.removeFeatureInternal(lt)}.bind(this);for(var q in this.featuresRtree_.forEach(Q),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[q])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var $=new G(H.Z.CLEAR);this.dispatchEvent($),this.changed()},U.prototype.forEachFeature=function(E){if(this.featuresRtree_)return this.featuresRtree_.forEach(E);this.featuresCollection_&&this.featuresCollection_.forEach(E)},U.prototype.forEachFeatureAtCoordinateDirect=function(E,d){return this.forEachFeatureInExtent([E[0],E[1],E[0],E[1]],function(Q){if(Q.getGeometry().intersectsCoordinate(E))return d(Q)})},U.prototype.forEachFeatureInExtent=function(E,d){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(E,d);this.featuresCollection_&&this.featuresCollection_.forEach(d)},U.prototype.forEachFeatureIntersectingExtent=function(E,d){return this.forEachFeatureInExtent(E,function(L){if(L.getGeometry().intersectsExtent(E)){var q=d(L);if(q)return q}})},U.prototype.getFeaturesCollection=function(){return this.featuresCollection_},U.prototype.getFeatures=function(){var E;return this.featuresCollection_?E=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(E=this.featuresRtree_.getAll(),(0,x.xb)(this.nullGeometryFeatures_)||(0,r.l7)(E,(0,x.KX)(this.nullGeometryFeatures_))),E},U.prototype.getFeaturesAtCoordinate=function(E){var d=[];return this.forEachFeatureAtCoordinateDirect(E,function(L){d.push(L)}),d},U.prototype.getFeaturesInExtent=function(E,d){var L=this;if(this.featuresRtree_){if(!(d&&d.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(E);var q=(0,i.MV)(E,d);return[].concat.apply([],q.map(function($){return L.featuresRtree_.getInExtent($)}))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},U.prototype.getClosestFeatureToCoordinate=function(E,d){var L=E[0],Q=E[1],q=null,$=[NaN,NaN],lt=1/0,yt=[-1/0,-1/0,1/0,1/0],Ot=d||N.uX;return this.featuresRtree_.forEachInExtent(yt,function(xt){if(Ot(xt)){var Mt=xt.getGeometry(),wt=lt;if((lt=Mt.closestPointXY(L,Q,$,lt))<wt){q=xt;var Xt=Math.sqrt(lt);yt[0]=L-Xt,yt[1]=Q-Xt,yt[2]=L+Xt,yt[3]=Q+Xt}}}),q},U.prototype.getExtent=function(E){return this.featuresRtree_.getExtent(E)},U.prototype.getFeatureById=function(E){var d=this.idIndex_[E.toString()];return void 0!==d?d:null},U.prototype.getFeatureByUid=function(E){var d=this.uidIndex_[E];return void 0!==d?d:null},U.prototype.getFormat=function(){return this.format_},U.prototype.getOverlaps=function(){return this.overlaps_},U.prototype.getUrl=function(){return this.url_},U.prototype.handleFeatureChange_=function(E){var d=E.target,L=(0,u.sq)(d),Q=d.getGeometry();if(Q){var q=Q.getExtent();L in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[L],this.featuresRtree_&&this.featuresRtree_.insert(q,d)):this.featuresRtree_&&this.featuresRtree_.update(q,d)}else L in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(d),this.nullGeometryFeatures_[L]=d);var $=d.getId();if(void 0!==$){var lt=$.toString();this.idIndex_[lt]!==d&&(this.removeFromIdIndex_(d),this.idIndex_[lt]=d)}else this.removeFromIdIndex_(d),this.uidIndex_[L]=d;this.changed(),this.dispatchEvent(new G(H.Z.CHANGEFEATURE,d))},U.prototype.hasFeature=function(E){var d=E.getId();return void 0!==d?d in this.idIndex_:(0,u.sq)(E)in this.uidIndex_},U.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,x.xb)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},U.prototype.loadFeatures=function(E,d,L){for(var Q=this.loadedExtentsRtree_,q=this.strategy_(E,d,L),$=function(xt,Mt){var wt=q[xt];Q.forEachInExtent(wt,function(Jt){return(0,i.r4)(Jt.extent,wt)})||(++lt.loadingExtentsCount_,lt.dispatchEvent(new G(H.Z.FEATURESLOADSTART)),lt.loader_.call(lt,wt,d,L,function(Jt){--this.loadingExtentsCount_,this.dispatchEvent(new G(H.Z.FEATURESLOADEND,void 0,Jt))}.bind(lt),function(){--this.loadingExtentsCount_,this.dispatchEvent(new G(H.Z.FEATURESLOADERROR))}.bind(lt)),Q.insert(wt,{extent:wt.slice()}))},lt=this,yt=0,Ot=q.length;yt<Ot;++yt)$(yt);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},U.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),b.prototype.refresh.call(this)},U.prototype.removeLoadedExtent=function(E){var L,d=this.loadedExtentsRtree_;d.forEachInExtent(E,function(Q){if((0,i.fS)(Q.extent,E))return L=Q,!0}),L&&d.remove(L)},U.prototype.removeFeature=function(E){if(E){var d=(0,u.sq)(E);d in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[d]:this.featuresRtree_&&this.featuresRtree_.remove(E),this.removeFeatureInternal(E)&&this.changed()}},U.prototype.removeFeatureInternal=function(E){var d=(0,u.sq)(E),L=this.featureChangeKeys_[d];if(L){L.forEach(f.bN),delete this.featureChangeKeys_[d];var Q=E.getId();return void 0!==Q&&delete this.idIndex_[Q.toString()],delete this.uidIndex_[d],this.dispatchEvent(new G(H.Z.REMOVEFEATURE,E)),E}},U.prototype.removeFromIdIndex_=function(E){var d=!1;for(var L in this.idIndex_)if(this.idIndex_[L]===E){delete this.idIndex_[L],d=!0;break}return d},U.prototype.setLoader=function(E){this.loader_=E},U.prototype.setUrl=function(E){(0,o.h)(this.format_,7),this.url_=E,this.setLoader(w(E,this.format_))},U}(rt.Z);const z=Y},4412:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>it});const it={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2909:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>R});var it=T(2402),J=T(760),A=T(119),M=T(9466);const R=function(){function rt(H){this.rbush_=new it(H),this.items_={}}return rt.prototype.insert=function(H,N){var D={minX:H[0],minY:H[1],maxX:H[2],maxY:H[3],value:N};this.rbush_.insert(D),this.items_[(0,A.sq)(N)]=D},rt.prototype.load=function(H,N){for(var D=new Array(N.length),m=0,C=N.length;m<C;m++){var y=H[m],o=N[m],i={minX:y[0],minY:y[1],maxX:y[2],maxY:y[3],value:o};D[m]=i,this.items_[(0,A.sq)(o)]=i}this.rbush_.load(D)},rt.prototype.remove=function(H){var N=(0,A.sq)(H),D=this.items_[N];return delete this.items_[N],null!==this.rbush_.remove(D)},rt.prototype.update=function(H,N){var D=this.items_[(0,A.sq)(N)];(0,J.fS)([D.minX,D.minY,D.maxX,D.maxY],H)||(this.remove(N),this.insert(H,N))},rt.prototype.getAll=function(){return this.rbush_.all().map(function(N){return N.value})},rt.prototype.getInExtent=function(H){return this.rbush_.search({minX:H[0],minY:H[1],maxX:H[2],maxY:H[3]}).map(function(m){return m.value})},rt.prototype.forEach=function(H){return this.forEach_(this.getAll(),H)},rt.prototype.forEachInExtent=function(H,N){return this.forEach_(this.getInExtent(H),N)},rt.prototype.forEach_=function(H,N){for(var D,m=0,C=H.length;m<C;m++)if(D=N(H[m]))return D;return D},rt.prototype.isEmpty=function(){return(0,M.xb)(this.items_)},rt.prototype.clear=function(){this.rbush_.clear(),this.items_={}},rt.prototype.getExtent=function(H){var N=this.rbush_.toJSON();return(0,J.T9)(N.minX,N.minY,N.maxX,N.maxY,H)},rt.prototype.concat=function(H){for(var N in this.rbush_.load(H.rbush_.all()),H.items_)this.items_[N]=H.items_[N]},rt}()},949:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>C});var y,it=T(521),J=T(6398),A=T(3783),M=T(5813),B=T(1992),R=T(4686),rt=(y=function(o,i){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,u){r.__proto__=u}||function(r,u){for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&(r[x]=u[x])})(o,i)},function(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=o}y(o,i),o.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}),H=function(y){function o(i){var r=this;return(r=y.call(this,{opacity:1,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,rotation:void 0!==i.rotation?i.rotation:0,scale:void 0!==i.scale?i.scale:1,displacement:void 0!==i.displacement?i.displacement:[0,0],declutterMode:i.declutterMode})||this).canvas_=void 0,r.hitDetectionCanvas_=null,r.fill_=void 0!==i.fill?i.fill:null,r.origin_=[0,0],r.points_=i.points,r.radius_=void 0!==i.radius?i.radius:i.radius1,r.radius2_=i.radius2,r.angle_=void 0!==i.angle?i.angle:0,r.stroke_=void 0!==i.stroke?i.stroke:null,r.size_=null,r.renderOptions_=null,r.render(),r}return rt(o,y),o.prototype.clone=function(){var i=this.getScale(),r=new o({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(i)?i.slice():i,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r},o.prototype.getAnchor=function(){var i=this.size_;if(!i)return null;var r=this.getDisplacement();return[i[0]/2-r[0],i[1]/2+r[1]]},o.prototype.getAngle=function(){return this.angle_},o.prototype.getFill=function(){return this.fill_},o.prototype.setFill=function(i){this.fill_=i,this.render()},o.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},o.prototype.getImage=function(i){var r=this.canvas_[i];if(!r){var u=this.renderOptions_,x=(0,B.E4)(u.size*i,u.size*i);this.draw_(u,x,i),this.canvas_[i]=r=x.canvas}return r},o.prototype.getPixelRatio=function(i){return i},o.prototype.getImageSize=function(){return this.size_},o.prototype.getImageState=function(){return it.Z.LOADED},o.prototype.getOrigin=function(){return this.origin_},o.prototype.getPoints=function(){return this.points_},o.prototype.getRadius=function(){return this.radius_},o.prototype.getRadius2=function(){return this.radius2_},o.prototype.getSize=function(){return this.size_},o.prototype.getStroke=function(){return this.stroke_},o.prototype.setStroke=function(i){this.stroke_=i,this.render()},o.prototype.listenImageChange=function(i){},o.prototype.load=function(){},o.prototype.unlistenImageChange=function(i){},o.prototype.calculateLineJoinSize_=function(i,r,u){if(0===r||this.points_===1/0||"bevel"!==i&&"miter"!==i)return r;var x=this.radius_,f=void 0===this.radius2_?x:this.radius2_;if(x<f){var g=x;x=f,f=g}var w=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),F=f*Math.sin(w),G=x-Math.sqrt(f*f-F*F),Y=Math.sqrt(F*F+G*G),z=Y/F;if("miter"===i&&z<=u)return z*r;var b=r/2/z,U=r/2*(G/Y),d=Math.sqrt((x+b)*(x+b)+U*U)-x;if(void 0===this.radius2_||"bevel"===i)return 2*d;var L=x*Math.sin(w),q=f-Math.sqrt(x*x-L*L),lt=Math.sqrt(L*L+q*q)/L;return lt<=u?2*Math.max(d,lt*r/2-f-x):2*d},o.prototype.createRenderOptions=function(){var f,i=R.rc,r=0,u=null,x=0,g=0;this.stroke_&&(null===(f=this.stroke_.getColor())&&(f=R.Tx),f=(0,M.y)(f),void 0===(g=this.stroke_.getWidth())&&(g=R.yC),u=this.stroke_.getLineDash(),x=this.stroke_.getLineDashOffset(),void 0===(i=this.stroke_.getLineJoin())&&(i=R.rc),void 0===(r=this.stroke_.getMiterLimit())&&(r=R.V4));var l=this.calculateLineJoinSize_(i,g,r),w=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:f,strokeWidth:g,size:Math.ceil(2*w+l),lineDash:u,lineDashOffset:x,lineJoin:i,miterLimit:r}},o.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var i=this.renderOptions_.size;this.canvas_={},this.size_=[i,i]},o.prototype.draw_=function(i,r,u){if(r.scale(u,u),r.translate(i.size/2,i.size/2),this.createPath_(r),this.fill_){var x=this.fill_.getColor();null===x&&(x=R.bL),r.fillStyle=(0,M.y)(x),r.fill()}this.stroke_&&(r.strokeStyle=i.strokeStyle,r.lineWidth=i.strokeWidth,r.setLineDash&&i.lineDash&&(r.setLineDash(i.lineDash),r.lineDashOffset=i.lineDashOffset),r.lineJoin=i.lineJoin,r.miterLimit=i.miterLimit,r.stroke())},o.prototype.createHitDetectionCanvas_=function(i){if(this.fill_){var r=this.fill_.getColor(),u=0;if("string"==typeof r&&(r=(0,A._2)(r)),null===r?u=1:Array.isArray(r)&&(u=4===r.length?r[3]:1),0===u){var x=(0,B.E4)(i.size,i.size);this.hitDetectionCanvas_=x.canvas,this.drawHitDetectionCanvas_(i,x)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},o.prototype.createPath_=function(i){var r=this.points_,u=this.radius_;if(r===1/0)i.arc(0,0,u,0,2*Math.PI);else{var x=void 0===this.radius2_?u:this.radius2_;void 0!==this.radius2_&&(r*=2);for(var f=this.angle_-Math.PI/2,g=2*Math.PI/r,l=0;l<r;l++){var w=f+l*g,F=l%2==0?u:x;i.lineTo(F*Math.cos(w),F*Math.sin(w))}i.closePath()}},o.prototype.drawHitDetectionCanvas_=function(i,r){r.translate(i.size/2,i.size/2),this.createPath_(r),r.fillStyle=R.bL,r.fill(),this.stroke_&&(r.strokeStyle=i.strokeStyle,r.lineWidth=i.strokeWidth,i.lineDash&&(r.setLineDash(i.lineDash),r.lineDashOffset=i.lineDashOffset),r.lineJoin=i.lineJoin,r.miterLimit=i.miterLimit,r.stroke())},o}(J.Z);const N=H;var D=function(){var y=function(o,i){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,u){r.__proto__=u}||function(r,u){for(var x in u)Object.prototype.hasOwnProperty.call(u,x)&&(r[x]=u[x])})(o,i)};return function(o,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=o}y(o,i),o.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),m=function(y){function o(i){var r=i||{};return y.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,scale:void 0!==r.scale?r.scale:1,rotation:void 0!==r.rotation?r.rotation:0,rotateWithView:void 0!==r.rotateWithView&&r.rotateWithView,displacement:void 0!==r.displacement?r.displacement:[0,0],declutterMode:r.declutterMode})||this}return D(o,y),o.prototype.clone=function(){var i=this.getScale(),r=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(i)?i.slice():i,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return r.setOpacity(this.getOpacity()),r},o.prototype.setRadius=function(i){this.radius_=i,this.render()},o}(N);const C=m},5044:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>J});const J=function(){function A(M){var B=M||{};this.color_=void 0!==B.color?B.color:null}return A.prototype.clone=function(){var M=this.getColor();return new A({color:Array.isArray(M)?M.slice():M||void 0})},A.prototype.getColor=function(){return this.color_},A.prototype.setColor=function(M){this.color_=M},A}()},6398:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>M});var it=T(119),J=T(1750);const M=function(){function B(R){this.opacity_=R.opacity,this.rotateWithView_=R.rotateWithView,this.rotation_=R.rotation,this.scale_=R.scale,this.scaleArray_=(0,J.Pq)(R.scale),this.displacement_=R.displacement,this.declutterMode_=R.declutterMode}return B.prototype.clone=function(){var R=this.getScale();return new B({opacity:this.getOpacity(),scale:Array.isArray(R)?R.slice():R,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})},B.prototype.getOpacity=function(){return this.opacity_},B.prototype.getRotateWithView=function(){return this.rotateWithView_},B.prototype.getRotation=function(){return this.rotation_},B.prototype.getScale=function(){return this.scale_},B.prototype.getScaleArray=function(){return this.scaleArray_},B.prototype.getDisplacement=function(){return this.displacement_},B.prototype.getDeclutterMode=function(){return this.declutterMode_},B.prototype.getAnchor=function(){return(0,it.O3)()},B.prototype.getImage=function(R){return(0,it.O3)()},B.prototype.getHitDetectionImage=function(){return(0,it.O3)()},B.prototype.getPixelRatio=function(R){return 1},B.prototype.getImageState=function(){return(0,it.O3)()},B.prototype.getImageSize=function(){return(0,it.O3)()},B.prototype.getOrigin=function(){return(0,it.O3)()},B.prototype.getSize=function(){return(0,it.O3)()},B.prototype.setDisplacement=function(R){this.displacement_=R},B.prototype.setOpacity=function(R){this.opacity_=R},B.prototype.setRotateWithView=function(R){this.rotateWithView_=R},B.prototype.setRotation=function(R){this.rotation_=R},B.prototype.setScale=function(R){this.scale_=R,this.scaleArray_=(0,J.Pq)(R)},B.prototype.listenImageChange=function(R){(0,it.O3)()},B.prototype.load=function(){(0,it.O3)()},B.prototype.unlistenImageChange=function(R){(0,it.O3)()},B}()},6785:(Tt,ft,T)=>{"use strict";T.d(ft,{Z:()=>J});const J=function(){function A(M){var B=M||{};this.color_=void 0!==B.color?B.color:null,this.lineCap_=B.lineCap,this.lineDash_=void 0!==B.lineDash?B.lineDash:null,this.lineDashOffset_=B.lineDashOffset,this.lineJoin_=B.lineJoin,this.miterLimit_=B.miterLimit,this.width_=B.width}return A.prototype.clone=function(){var M=this.getColor();return new A({color:Array.isArray(M)?M.slice():M||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},A.prototype.getColor=function(){return this.color_},A.prototype.getLineCap=function(){return this.lineCap_},A.prototype.getLineDash=function(){return this.lineDash_},A.prototype.getLineDashOffset=function(){return this.lineDashOffset_},A.prototype.getLineJoin=function(){return this.lineJoin_},A.prototype.getMiterLimit=function(){return this.miterLimit_},A.prototype.getWidth=function(){return this.width_},A.prototype.setColor=function(M){this.color_=M},A.prototype.setLineCap=function(M){this.lineCap_=M},A.prototype.setLineDash=function(M){this.lineDash_=M},A.prototype.setLineDashOffset=function(M){this.lineDashOffset_=M},A.prototype.setLineJoin=function(M){this.lineJoin_=M},A.prototype.setMiterLimit=function(M){this.miterLimit_=M},A.prototype.setWidth=function(M){this.width_=M},A}()},109:(Tt,ft,T)=>{"use strict";T.d(ft,{J$:()=>R,Ly:()=>N,ZP:()=>m,yF:()=>H});var it=T(949),J=T(5044),A=T(6785),M=T(1911),B=function(){function C(y){var o=y||{};this.geometry_=null,this.geometryFunction_=D,void 0!==o.geometry&&this.setGeometry(o.geometry),this.fill_=void 0!==o.fill?o.fill:null,this.image_=void 0!==o.image?o.image:null,this.renderer_=void 0!==o.renderer?o.renderer:null,this.hitDetectionRenderer_=void 0!==o.hitDetectionRenderer?o.hitDetectionRenderer:null,this.stroke_=void 0!==o.stroke?o.stroke:null,this.text_=void 0!==o.text?o.text:null,this.zIndex_=o.zIndex}return C.prototype.clone=function(){var y=this.getGeometry();return y&&"object"==typeof y&&(y=y.clone()),new C({geometry:y,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},C.prototype.getRenderer=function(){return this.renderer_},C.prototype.setRenderer=function(y){this.renderer_=y},C.prototype.setHitDetectionRenderer=function(y){this.hitDetectionRenderer_=y},C.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},C.prototype.getGeometry=function(){return this.geometry_},C.prototype.getGeometryFunction=function(){return this.geometryFunction_},C.prototype.getFill=function(){return this.fill_},C.prototype.setFill=function(y){this.fill_=y},C.prototype.getImage=function(){return this.image_},C.prototype.setImage=function(y){this.image_=y},C.prototype.getStroke=function(){return this.stroke_},C.prototype.setStroke=function(y){this.stroke_=y},C.prototype.getText=function(){return this.text_},C.prototype.setText=function(y){this.text_=y},C.prototype.getZIndex=function(){return this.zIndex_},C.prototype.setGeometry=function(y){"function"==typeof y?this.geometryFunction_=y:"string"==typeof y?this.geometryFunction_=function(o){return o.get(y)}:y?void 0!==y&&(this.geometryFunction_=function(){return y}):this.geometryFunction_=D,this.geometry_=y},C.prototype.setZIndex=function(y){this.zIndex_=y},C}();function R(C){var y,o;"function"==typeof C?y=C:(Array.isArray(C)?o=C:((0,M.h)("function"==typeof C.getZIndex,41),o=[C]),y=function(){return o});return y}var rt=null;function H(C,y){if(!rt){var o=new J.Z({color:"rgba(255,255,255,0.4)"}),i=new A.Z({color:"#3399CC",width:1.25});rt=[new B({image:new it.Z({fill:o,stroke:i,radius:5}),fill:o,stroke:i})]}return rt}function N(){var C={},y=[255,255,255,1],o=[0,153,255,1];return C.Polygon=[new B({fill:new J.Z({color:[255,255,255,.5]})})],C.MultiPolygon=C.Polygon,C.LineString=[new B({stroke:new A.Z({color:y,width:5})}),new B({stroke:new A.Z({color:o,width:3})})],C.MultiLineString=C.LineString,C.Circle=C.Polygon.concat(C.LineString),C.Point=[new B({image:new it.Z({radius:6,fill:new J.Z({color:o}),stroke:new A.Z({color:y,width:1.5})}),zIndex:1/0})],C.MultiPoint=C.Point,C.GeometryCollection=C.Polygon.concat(C.LineString,C.Point),C}function D(C){return C.getGeometry()}const m=B}}]);