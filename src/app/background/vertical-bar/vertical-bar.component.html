<div id="sidebar-container" class="sticky-top hide-max-width show">

    <div id="website-title" class="d-flex justify-content-center py-3">
      <span class="text-dark text-center">AV</span>
    </div>

    <ul class="list-group">
        <ng-container *ngTemplateOutlet="menuTitleBuilder; context:{title:'HOME', bgColor:'bg-orange-color'}"></ng-container>
        <ng-container *ngTemplateOutlet="topicPagesBuilder; context:{topicPages: homePages}"></ng-container>

        <ng-container *ngTemplateOutlet="menuTitleBuilder; context:{title:'CV', bgColor:'bg-blue-color'}"></ng-container>
        <ng-container *ngTemplateOutlet="topicPagesBuilder; context:{topicPages: resumePages}"></ng-container>

        <ng-container *ngTemplateOutlet="menuTitleBuilder; context:{title:'PROJETS', bgColor:'bg-green-color'}"></ng-container>
        <ng-container *ngTemplateOutlet="topicPagesBuilder; context:{topicPages: projectPages}"></ng-container>

    </ul>
    <!-- List Group END-->
</div>



<ng-template #menuTitleBuilder let-title='title' let-bgColor="bgColor">
  <li class="list-group-item item-center" [ngClass]="bgColor">
      <div class="d-flex w-100 justify-content-center" >
        <small class="text-white font-weight-bold">{{ title }}</small>
      </div>
  </li>
</ng-template>


<ng-template #topicPagesBuilder let-topicPages='topicPages'>
  <ng-container *ngFor="let page of topicPages">

    <ng-container *ngIf="page.route">
    <a class="topic-item px-2 py-2 border bg-light" [title]="page.title" [routerLink]="page.route" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact:true}" data-toggle="collapse" [attr.data-target]="'#nav-' + page.id">
      <div class="d-flex w-100 justify-content-between item-center" >

        <span class="">
          <fa-icon [icon]="page.icon" class=""></fa-icon>
          <span class="ml-2 hide-mean-width">{{page.title}}</span>
        </span>

        <fa-icon [icon]="caretRightIcon" class="hide-mean-width float-right"></fa-icon>
      </div>
    </a>
    </ng-container>

    <ng-container *ngIf="page.url">
    <a class="topic-item px-2 py-2 border bg-light" [href]="page.route" target="_blank" rel="noopener noreferrer">
      <div class="d-flex w-100 justify-content-between item-center" >

        <span class="">
          <fa-icon [icon]="page.icon" class=""></fa-icon>
          <span class="ml-2 hide-mean-width">{{page.title}}</span>
        </span>

        <fa-icon [icon]="caretRightIcon" class="hide-mean-width float-right"></fa-icon>
      </div>
    </a>
    </ng-container>

    <!-- Submenu content -->
    <div [id]="'nav-' + page.id" class="collapse sidebar-submenu" *ngIf="page.sub_menus">
      <ng-container *ngFor="let menu of page.sub_menus">
      <a [routerLink]="menu.route" [fragment]="menu.fragment" [title]="menu.title" class="list-group-item list-group-item-action bg-white">

      <div class="w-100 justify-content-center item-center" >

        <span class="font-italic text-muted" [class.active]="(activeFragment | async) === menu.fragment">
          <fa-icon [icon]="caretRightIcon" class="float-right"></fa-icon>
          <fa-icon [icon]="menu.icon" class=""></fa-icon>
          <span class="ml-2 hide-mean-width font-italic">{{menu.title}}</span>
        </span>
      </div>

      </a>
      </ng-container>
    </div>
  </ng-container>
</ng-template>
