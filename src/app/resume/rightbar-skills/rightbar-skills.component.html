<section id="skills" class="border bg-light rounded-3 p-4">

  <section class="row">

    <div class="col-lg-12 mx-auto">
      <h5 class="fw-bolder mb-4">
        <fa-icon class="me-2" [icon]="skillIcon"></fa-icon>Compétences
        <fa-icon class="cursor float-end me-2" [icon]="expandIcon" data-bs-toggle="collapse" data-bs-target="#skills-cards" aria-hidden="true"></fa-icon>
      </h5>
    </div>
    <div id="skills-cards" class="col-12 collapse show item card">
      <div class="row">

        <div class="col-12" *ngIf="isActivitiesDataAvailable">
          <div class="card-body pb-0">

            <h5 class="border p-2 bg-color-themes pointer text-center text-white mb-4" data-bs-toggle="collapse" data-bs-target=".themes-multi-collapse">
              <fa-icon class="me-2" [icon]="skillIcon"></fa-icon>
              Thématiques
            </h5>
            <ng-container *ngTemplateOutlet="skillDetails; context:{category:'themes'}"></ng-container>
          </div>

        </div>

        <div class="col-12" *ngIf="isActivitiesDataAvailable">
          <div class="card-body pb-0">

            <h5 class="border p-2 bg-color-technics pointer text-center text-white mb-4" data-bs-toggle="collapse" data-bs-target=".technics-multi-collapse">
              <fa-icon class="me-2" [icon]="skillIcon"></fa-icon>
              Techniques
            </h5>

            <ng-container *ngTemplateOutlet="skillDetails; context:{category:'technics'}"></ng-container>
          </div>

        </div>

        <div class="col-12" *ngIf="isActivitiesDataAvailable">
          <div class="card-body pb-0">

            <h5 class="border p-2 bg-color-tools pointer text-center text-white mb-4" data-bs-toggle="collapse" data-bs-target=".tools-multi-collapse">
              <fa-icon class="me-2" [icon]="skillIcon"></fa-icon>
              Outils
            </h5>
            <ng-container *ngTemplateOutlet="skillDetails; context:{category:'tools'}"></ng-container>
          </div>
        </div>
      </div>

  </div>
</section>


<ng-template #skillDetails let-category='category'>
  <div class="row justify-content-around">

    <div class="skills col-5" *ngFor="let skill of skillsData[category]; let idx = index">
      <h6 [ngClass]="{ 'collapsed':!skill.active || !skill.enabled, 'pointer':skill.active }" class="" data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse' + category + idx" [attr.aria-expanded]="{ 'true':skill.active, 'false':!skill.active}" [attr.aria-controls]="'#collapse' + category + idx"><a><fa-icon class="me-2 rotation" [icon]="arrowDownIcon"></fa-icon>{{ skill.name }}</a></h6>

      <div *ngIf="skill.enabled; then skillDetails"></div>
      <ng-template #skillDetails>
      <div [ngClass]="{ 'show':skill.active }" [class]="'col-lg-12 collapse '+ category + '-multi-collapse'" [attr.id]="'collapse' + category + idx">


        <ul class="tutu">
          <li class="small" *ngFor="let skill_detail of skill.details">
            <span>{{ skill_detail }}</span>
          </li>
        </ul>
      </div>
      </ng-template>
    </div>
  </div>

</ng-template>
