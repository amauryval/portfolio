<div class="container-fluid">
  <div class="row justify-content-center" *ngIf="selectedblogTopics" [@fadeInOut]>

    <div class="col-11 my-4 blog-content">
      <div class="grid-container">

        <div class="mb-4 feat-topic bg-white" *ngFor="let topic of selectedblogTopics">

          <div class="card-header bg-dark bg-gradient text-white">
            <h4 class="fs-6">{{ topic.title }}</h4>
          </div>

          <div class="card-body">

            <div class="d-flex flex-column py-2">
              <img [src]="topic.image | safeUrl"  class="card-img">
            </div>

            <div class="d-flex flex-row justify-content-end">
              <div class="fst-italic">{{ topic.date | date: 'dd MMMM y'}}</div>
            </div>

            <div class="d-flex flex-column py-2">

              <div class="py-1">
                <span class="fw-bold small me-2">Catégorie(s):</span>
                <ng-container *ngFor="let category of topic.categories">
                  <span class="badge rounded-pill mx-1" [style]="'background-color:' + this.getTagColor(category, 5) + ';color: white'">{{category}}</span>
                </ng-container>
              </div>

              <div class="py-1">
                <span class="fw-bold small me-2">Tag(s):</span>
                  <ng-container *ngFor="let tag of topic.tags">
                      <span class="badge rounded-pill mx-1" [style]="'background-color:' + this.getTagColor(tag, 7) + ';color: white'">{{tag}}</span>
                  </ng-container>
              </div>

              <p class="card-text">{{ topic.resume }}</p>
            </div>

            <a [href]="topic.url" target="_blank" rel="noopener noreferrer" class="btn btn-warning mt-auto fw-bold">Accéder</a>

          </div>



          <div class="card-footer">
          </div>


        </div>

      </div>
    </div>

    <div class="col-12 legend-container">
      <div class="row justfiy-content-center">

        <div class="col-9">
          <button class="btn btn-dark me-2" type="button" checked autocomplete="off" (click)="showHideLegend()">
            <fa-icon class="" [icon]="tagsIcon"></fa-icon>
            Légende
          </button>
        </div>

        <div class="col-12 bg-white legend-content text-center py-3" *ngIf="isLegendDisplayed">
          <ng-container *ngTemplateOutlet="controler"></ng-container>
        </div>

        <div class="col-12 bg-white legend-content text-center py-3" *ngIf="!isLegendDisplayed">
        </div>

      </div>

    </div>


  </div>
</div>








<ng-template #controler>
  <div class="row">
    <div class="col-lg-3">

      <h6>Filtrage par catégories</h6>

      <div class="btn-toolbar my-2 d-flex justify-content-center" role="toolbar">

        <div class="btn-group my-1 mx-1" role="group">
          <button class="btn btn-secondary btn-sm" [ngClass]="currentCategory === null ? 'fw-bolderer' : 'inactive'" (click)="resetContent()">
            <fa-icon class="me-2" [icon]="tagIcon"></fa-icon>Tous
          </button>
        </div>

        <div class="btn-group my-1 mx-1" role="group" *ngFor="let category of allCategories">
          <button class="btn btn-secondary btn-sm" [ngClass]="currentCategory === category ? 'fw-bolderer' : 'inactive'" (click)="selectContentByCategory(category)">
            <fa-icon class="me-2" [icon]="tagIcon"></fa-icon>{{ category }}
          </button>
        </div>

      </div>
    </div>

    <div class="col-lg-9">

      <h6>Filtrage par tags</h6>

      <div class="btn-toolbar my-2 d-flex" role="toolbar">

        <div class="btn-group my-1 mx-1" role="group" *ngFor="let tag of allTags">
          <button class="btn btn-secondary btn-sm" [ngClass]="currentTag === tag ? 'fw-bolderer' : 'inactive'" (click)="selectContentByTag(tag)">
            <fa-icon class="me-2" [icon]="tagIcon"></fa-icon>{{ tag }}
          </button>
        </div>

      </div>

    </div>

  </div>
</ng-template>
