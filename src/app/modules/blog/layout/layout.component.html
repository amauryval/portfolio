<div class="container-fluid g-0" [@fadeInOut]>
  <div class="d-flex flex-column" *ngIf="selectedblogTopics">

      <div class="m-4 grid-container">

        <div class="mb-4 card feat-topic bg-white" *ngFor="let topic of selectedblogTopics">

          <div class="card-header p-2 bg-dark bg-gradient text-white">
            <span class="fs-6 fw-bold">{{ topic.title }}</span>
          </div>

          <div class="card-body">

            <div class="d-flex flex-column py-2">
              <img [src]="topic.image | safeUrl"  class="card-img img-thumbnail">
            </div>

            <div class="d-flex flex-row justify-content-end">
              <div class="fst-italic small">Le {{ topic.date | date: 'dd MMMM y'}}</div>
            </div>

            <div class="d-flex flex-column pb-2">

              <div class="py-1">
                <span class="fw-bold small me-2">Catégorie(s):</span>
                <ng-container *ngFor="let category of topic.categories">
                  <span class="badge rounded-pill mx-1" [style]="'background-color:' + this.getTagColor(category, seedCategory) + ';color: white'">{{category}}</span>
                </ng-container>
              </div>

              <div class="">
                <span class="fw-bold small me-2">Tag(s):</span>
                  <ng-container *ngFor="let tag of topic.tags">
                      <span class="badge rounded-pill mx-1" [style]="'background-color:' + this.getTagColor(tag, seedTag) + ';color: white'">{{tag}}</span>
                  </ng-container>
              </div>

              <p class="card-text my-2">{{ topic.resume }}</p>
            </div>

            <a [href]="topic.url" target="_blank" rel="noopener noreferrer" class="btn btn-warning mt-auto fw-bold">Accéder</a>

          </div>

          <div class="card-footer">
          </div>

        </div>

      </div>

    <div class="d-flex flex-column legend-container">

      <div class="mx-3">
        <button class="btn btn-dark me-2 shadow" type="button" checked autocomplete="off" (click)="showHideLegend()">
          <fa-icon class="" [icon]="tagsIcon"></fa-icon>
          Légende
        </button>
      </div>

      <div class="bg-white legend-content text-center py-3" *ngIf="isLegendDisplayed">
        <ng-container *ngTemplateOutlet="controler"></ng-container>
      </div>

      <div class="bg-white legend-content text-center py-3" *ngIf="!isLegendDisplayed">
      </div>

    </div>

  </div>
</div>




<ng-template #controler>
  <div class="d-flex flex-column flex-xl-row justify-content-around align-items-center">
    <div class="d-flex flex-column m-2">

      <h6>Filtrage par catégories</h6>

      <div class="btn-toolbar my-2 d-flex justify-content-center" role="toolbar">

        <div class="btn-group my-1 mx-1" role="group">
          <button class="btn btn-secondary btn-sm" [ngClass]="currentCategory === null ? 'fw-bolderer' : 'inactive'" (click)="resetContent()">
            <fa-icon class="me-2" [icon]="tagIcon"></fa-icon>Tous
          </button>
        </div>

        <div class="btn-group my-1 mx-1" role="group" *ngFor="let category of allCategories">
          <button class="btn btn-sm btn-secondary btn-sm" [ngClass]="currentCategory === category ? 'fw-bolderer' : 'inactive'" (click)="selectContentByCategory(category)">
            <fa-icon class="me-2" [icon]="tagIcon" [style]="'color:' + this.getTagColor(category, seedCategory)+ ';'"></fa-icon>{{ category }}
          </button>
        </div>

      </div>
    </div>

    <div class="d-flex flex-column mx-2">

      <h6>Filtrage par tags</h6>

      <div class="btn-toolbar my-2 d-flex justify-content-center" role="toolbar">

        <div class="btn-group my-1 mx-1" role="group" *ngFor="let tag of allTags">
          <button class="btn btn-sm btn-secondary btn-sm" [ngClass]="currentTag === tag ? 'fw-bolderer' : 'inactive'" (click)="selectContentByTag(tag)">
            <fa-icon class="me-2" [icon]="tagIcon" [style]="'color:' + this.getTagColor(tag, seedTag)+ ';'"></fa-icon>{{ tag }}
          </button>
        </div>

      </div>

    </div>

  </div>
</ng-template>
