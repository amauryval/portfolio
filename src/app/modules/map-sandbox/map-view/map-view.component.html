<div id="mapTools" class="">
  <div class="d-flex flex-column flex-sm-row">

    <div id="geomSelector" class="d-flex flex-row m-2">
      <div  class="d-flex flex-row ">

        <button type="button" class="button-title btn btn-warning rounded p-2 shadow">
          <span class="fw-bold vertical-text">CREER</span>
        </button>

        <div id="geomList" class="btn-group-vertical my-2 align-self-center bg-white shadow rounded-end" role="group" aria-label="">
          <ng-container *ngFor="let feature of createModesSupported">

              <input type="radio" class="border btn-check m-0" name="btnRadio" [id]="'btnradio-selector-' + feature.mode" [checked]="drawModeSelected === feature.mode" autocomplete="off">
              <label class="w-100 border-secondary px-0"  [for]="'btnradio-selector-' + feature.mode" (click)="activateDrawing(feature.mode)">
                <div class="dropdown-item small d-flex flex-row" [ngClass]="drawModeSelected === feature.mode ? 'bg-warning' :  ''">
                  <fa-icon [ngClass]="'me-2 ' + feature.mode" [icon]="feature.icon" ></fa-icon>
                  <span>{{ feature.label }}</span>
                </div>
              </label>

          </ng-container>
        </div>
      </div>

    </div>

    <div id="modifySelector" class="d-flex flex-row m-2">
      <div  class="d-flex flex-row ">

        <button type="button" class="button-title btn btn-danger rounded p-2 shadow">
          <span class="fw-bold vertical-text">EDITER</span>
        </button>

        <div id="geomList" class="btn-group-vertical my-2 align-self-center bg-white shadow rounded-end" role="group" aria-label="">
          <ng-container *ngFor="let feature of modifyModesSupported">

              <input type="radio" class="border btn-check m-0" name="btnRadio" [id]="'btnradio-selector-' + feature.mode" [checked]="modifyModeSelected === feature.mode" autocomplete="off">
              <label class="w-100 border-secondary px-0"  [for]="'btnradio-selector-' + feature.mode" (click)="activateModifiying(feature.mode)">
                <div class="dropdown-item small d-flex flex-row" [ngClass]="modifyModeSelected === feature.mode ? 'bg-danger' :  ''">
                  <fa-icon [ngClass]="'me-2 ' + feature.mode" [icon]="feature.icon" ></fa-icon>
                  <span>{{ feature.label }}</span>
                </div>
              </label>

          </ng-container>
        </div>
      </div>

    </div>

  </div>



  <div id="featuresContainer" class="d-flex flex-column m-2">
    <div  class="d-flex flex-row ">

      <button type="button" class="button-title btn btn-dark rounded p-2 shadow">
        <span class="fw-bold vertical-text">
          <span class="badge bg-success my-2 horizontal-text">{{this.featuresCount}}</span>OBJET<span class="horizontal-text">(S)</span>
        </span>
      </button>

      <div id="featuresList" class="overflow-auto btn-group-vertical justify-content-start my-2 bg-white rounded-end shadow" role="group" aria-label="">

        <input type="radio" class="border btn-check m-0" name="btnradio" id="btnradio-feature-cancel" [checked]="featureSelectedId === null" autocomplete="off">
        <label class="w-100 border-warning px-0"  for="btnradio-feature-cancel" (click)="selectAndDisplayFeature(null)">
          <div class="dropdown-item small d-flex flex-row" [ngClass]="featureSelectedId === null ? 'bg-secondary text-white' :  'text-black'">
            <fa-icon class="me-2" [icon]="disabledIcon" ></fa-icon>
            <span>Désélectioner</span>
          </div>
        </label>

        <ng-container *ngFor="let feature of allFeatures">
          <input type="radio" class="border btn-check m-0" name="btnradio" [id]="'btnradio-feature-' + feature.id" [checked]="featureSelectedId === feature.id" autocomplete="off">
          <label class="w-100 border-warning px-0"  [for]="'btnradio-feature-' + feature.id" (click)="selectAndDisplayFeature(feature.id)">
              <div class="dropdown-item small d-flex flex-row" [ngClass]="featureSelectedId === feature.id ? 'bg-secondary text-white' :  'text-black'">
                <fa-icon *ngIf="feature.geom_type === 'Point'" class="me-2" [icon]="pointIcon" ></fa-icon>
                <fa-icon *ngIf="feature.geom_type === 'LineString'" class="me-2" [icon]="lineStringIcon"></fa-icon>
                <fa-icon *ngIf="feature.geom_type === 'Polygon'" class="me-2" [icon]="polygonIcon"></fa-icon>
                <span>{{ feature.name }}</span>
              </div>
          </label>
        </ng-container>
    </div>

  </div>

</div>



<div id="mapToasts" class="position-fixed bottom-0 end-0 p-3 d-flex flex-row" style="z-index: 11">
  <div class="toast toastFeature faded" role="alert" aria-live="assertive" aria-atomic="true" *ngFor="let feature of toastsFeatureProperties">
    <div class="toast-header justify-content-between">

      <fa-icon class="me-2" [icon]="feature.icon" ></fa-icon>
      <strong>{{ feature.name }}</strong>
      <em class="ms-2 me-auto me-auto">({{ feature.geom_type }})</em>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>

    </div>

    <div class="toast-body bg-white">

      <div id="toastActions" class="d-flex flex-row justify-content-start align-items-center">
        <span class="fw-bold">Actions :</span>

        <span class="badge bg-danger rounded m-1" (click)="removeFeature(feature.id)"  data-bs-toggle="tooltip" data-bs-placement="bottom" title="Supprimer">
          <fa-icon class="m-0" [icon]="disabledIcon" ></fa-icon>
        </span>

        <span class="badge bg-dark rounded m-1 small" (click)="copyToClipboard(feature.wkt)" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Copier le WKT">
          WKT
        </span>

      </div>

      <div class="d-flex flex-row justify-content-between">
        <span>Créé à {{ feature.created_at | date: 'HH:mm:ss' }}</span>
        <span>Modifié à {{ feature.updated_at | date: 'HH:mm:ss' }}</span>
      </div>

        <span class=" ext-truncate">{{ feature.wkt }}</span>


    </div>
  </div>
</div>
