(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[152],{2402:function(pt){pt.exports=function(){"use strict";function rt(r,d,g,h,_){!function f(s,o,L,k,A){for(;k>L;){if(k-L>600){var w=k-L+1,X=o-L+1,m=Math.log(w),v=.5*Math.exp(2*m/3),F=.5*Math.sqrt(m*v*(w-v)/w)*(X-w/2<0?-1:1);f(s,o,Math.max(L,Math.floor(o-X*v/w+F)),Math.min(k,Math.floor(o+(w-X)*v/w+F)),A)}var nt=s[o],$=L,at=k;for(I(s,L,o),A(s[k],nt)>0&&I(s,L,k);$<at;){for(I(s,$,at),$++,at--;A(s[$],nt)<0;)$++;for(;A(s[at],nt)>0;)at--}0===A(s[L],nt)?I(s,L,at):I(s,++at,k),at<=o&&(L=at+1),o<=at&&(k=at-1)}}(r,d,g||0,h||r.length-1,_||j)}function I(r,d,g){var h=r[d];r[d]=r[g],r[g]=h}function j(r,d){return r<d?-1:r>d?1:0}var Z=function(r){void 0===r&&(r=9),this._maxEntries=Math.max(4,r),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function H(r,d,g){if(!g)return d.indexOf(r);for(var h=0;h<d.length;h++)if(g(r,d[h]))return h;return-1}function D(r,d){Y(r,0,r.children.length,d,r)}function Y(r,d,g,h,_){_||(_=a(null)),_.minX=1/0,_.minY=1/0,_.maxX=-1/0,_.maxY=-1/0;for(var f=d;f<g;f++){var s=r.children[f];T(_,r.leaf?h(s):s)}return _}function T(r,d){return r.minX=Math.min(r.minX,d.minX),r.minY=Math.min(r.minY,d.minY),r.maxX=Math.max(r.maxX,d.maxX),r.maxY=Math.max(r.maxY,d.maxY),r}function ot(r,d){return r.minX-d.minX}function K(r,d){return r.minY-d.minY}function b(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function u(r){return r.maxX-r.minX+(r.maxY-r.minY)}function p(r,d){return r.minX<=d.minX&&r.minY<=d.minY&&d.maxX<=r.maxX&&d.maxY<=r.maxY}function i(r,d){return d.minX<=r.maxX&&d.minY<=r.maxY&&d.maxX>=r.minX&&d.maxY>=r.minY}function a(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S(r,d,g,h,_){for(var f=[d,g];f.length;)if(!((g=f.pop())-(d=f.pop())<=h)){var s=d+Math.ceil((g-d)/h/2)*h;rt(r,s,d,g,_),f.push(d,s,s,g)}}return Z.prototype.all=function(){return this._all(this.data,[])},Z.prototype.search=function(r){var d=this.data,g=[];if(!i(r,d))return g;for(var h=this.toBBox,_=[];d;){for(var f=0;f<d.children.length;f++){var s=d.children[f],o=d.leaf?h(s):s;i(r,o)&&(d.leaf?g.push(s):p(r,o)?this._all(s,g):_.push(s))}d=_.pop()}return g},Z.prototype.collides=function(r){var d=this.data;if(!i(r,d))return!1;for(var g=[];d;){for(var h=0;h<d.children.length;h++){var _=d.children[h],f=d.leaf?this.toBBox(_):_;if(i(r,f)){if(d.leaf||p(r,f))return!0;g.push(_)}}d=g.pop()}return!1},Z.prototype.load=function(r){if(!r||!r.length)return this;if(r.length<this._minEntries){for(var d=0;d<r.length;d++)this.insert(r[d]);return this}var g=this._build(r.slice(),0,r.length-1,0);if(this.data.children.length)if(this.data.height===g.height)this._splitRoot(this.data,g);else{if(this.data.height<g.height){var h=this.data;this.data=g,g=h}this._insert(g,this.data.height-g.height-1,!0)}else this.data=g;return this},Z.prototype.insert=function(r){return r&&this._insert(r,this.data.height-1),this},Z.prototype.clear=function(){return this.data=a([]),this},Z.prototype.remove=function(r,d){if(!r)return this;for(var g,h,_,f=this.data,s=this.toBBox(r),o=[],L=[];f||o.length;){if(f||(f=o.pop(),h=o[o.length-1],g=L.pop(),_=!0),f.leaf){var k=H(r,f.children,d);if(-1!==k)return f.children.splice(k,1),o.push(f),this._condense(o),this}_||f.leaf||!p(f,s)?h?(g++,f=h.children[g],_=!1):f=null:(o.push(f),L.push(g),g=0,h=f,f=f.children[0])}return this},Z.prototype.toBBox=function(r){return r},Z.prototype.compareMinX=function(r,d){return r.minX-d.minX},Z.prototype.compareMinY=function(r,d){return r.minY-d.minY},Z.prototype.toJSON=function(){return this.data},Z.prototype.fromJSON=function(r){return this.data=r,this},Z.prototype._all=function(r,d){for(var g=[];r;)r.leaf?d.push.apply(d,r.children):g.push.apply(g,r.children),r=g.pop();return d},Z.prototype._build=function(r,d,g,h){var _,f=g-d+1,s=this._maxEntries;if(f<=s)return D(_=a(r.slice(d,g+1)),this.toBBox),_;h||(h=Math.ceil(Math.log(f)/Math.log(s)),s=Math.ceil(f/Math.pow(s,h-1))),(_=a([])).leaf=!1,_.height=h;var o=Math.ceil(f/s),L=o*Math.ceil(Math.sqrt(s));S(r,d,g,L,this.compareMinX);for(var k=d;k<=g;k+=L){var A=Math.min(k+L-1,g);S(r,k,A,o,this.compareMinY);for(var w=k;w<=A;w+=o){var X=Math.min(w+o-1,A);_.children.push(this._build(r,w,X,h-1))}}return D(_,this.toBBox),_},Z.prototype._chooseSubtree=function(r,d,g,h){for(;h.push(d),!d.leaf&&h.length-1!==g;){for(var _=1/0,f=1/0,s=void 0,o=0;o<d.children.length;o++){var L=d.children[o],k=b(L),A=(w=r,X=L,(Math.max(X.maxX,w.maxX)-Math.min(X.minX,w.minX))*(Math.max(X.maxY,w.maxY)-Math.min(X.minY,w.minY))-k);A<f?(f=A,_=k<_?k:_,s=L):A===f&&k<_&&(_=k,s=L)}d=s||d.children[0]}var w,X;return d},Z.prototype._insert=function(r,d,g){var h=g?r:this.toBBox(r),_=[],f=this._chooseSubtree(h,this.data,d,_);for(f.children.push(r),T(f,h);d>=0&&_[d].children.length>this._maxEntries;)this._split(_,d),d--;this._adjustParentBBoxes(h,_,d)},Z.prototype._split=function(r,d){var g=r[d],h=g.children.length,_=this._minEntries;this._chooseSplitAxis(g,_,h);var f=this._chooseSplitIndex(g,_,h),s=a(g.children.splice(f,g.children.length-f));s.height=g.height,s.leaf=g.leaf,D(g,this.toBBox),D(s,this.toBBox),d?r[d-1].children.push(s):this._splitRoot(g,s)},Z.prototype._splitRoot=function(r,d){this.data=a([r,d]),this.data.height=r.height+1,this.data.leaf=!1,D(this.data,this.toBBox)},Z.prototype._chooseSplitIndex=function(r,d,g){for(var h,_,f,s,o,L,k,A=1/0,w=1/0,X=d;X<=g-d;X++){var m=Y(r,0,X,this.toBBox),v=Y(r,X,g,this.toBBox),F=(_=m,f=v,void 0,void 0,void 0,void 0,s=Math.max(_.minX,f.minX),o=Math.max(_.minY,f.minY),L=Math.min(_.maxX,f.maxX),k=Math.min(_.maxY,f.maxY),Math.max(0,L-s)*Math.max(0,k-o)),N=b(m)+b(v);F<A?(A=F,h=X,w=N<w?N:w):F===A&&N<w&&(w=N,h=X)}return h||g-d},Z.prototype._chooseSplitAxis=function(r,d,g){var h=r.leaf?this.compareMinX:ot,_=r.leaf?this.compareMinY:K;this._allDistMargin(r,d,g,h)<this._allDistMargin(r,d,g,_)&&r.children.sort(h)},Z.prototype._allDistMargin=function(r,d,g,h){r.children.sort(h);for(var _=this.toBBox,f=Y(r,0,d,_),s=Y(r,g-d,g,_),o=u(f)+u(s),L=d;L<g-d;L++){var k=r.children[L];T(f,r.leaf?_(k):k),o+=u(f)}for(var A=g-d-1;A>=d;A--){var w=r.children[A];T(s,r.leaf?_(w):w),o+=u(s)}return o},Z.prototype._adjustParentBBoxes=function(r,d,g){for(var h=g;h>=0;h--)T(d[h],r)},Z.prototype._condense=function(r){for(var d=r.length-1,g=void 0;d>=0;d--)0===r[d].children.length?d>0?(g=r[d-1].children).splice(g.indexOf(r[d]),1):this.clear():D(r[d],this.toBBox)},Z}()},3171:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>ot});var j=I(3632),Z=I(9972),H=I(1911),D=I(1729);class Y extends j.Z{constructor(b){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),b&&("function"==typeof b.getSimplifiedGeometry?this.setGeometry(b):this.setProperties(b))}clone(){const b=new Y(this.hasProperties()?this.getProperties():null);b.setGeometryName(this.getGeometryName());const u=this.getGeometry();u&&b.setGeometry(u.clone());const p=this.getStyle();return p&&b.setStyle(p),b}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,D.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const b=this.getGeometry();b&&(this.geometryChangeKey_=(0,D.oL)(b,Z.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(b){this.set(this.geometryName_,b)}setStyle(b){this.style_=b,this.styleFunction_=b?function T(K){if("function"==typeof K)return K;{let b;return Array.isArray(K)?b=K:((0,H.h)("function"==typeof K.getZIndex,41),b=[K]),function(){return b}}}(b):void 0,this.changed()}setId(b){this.id_=b,this.changed()}setGeometryName(b){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=b,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const ot=Y},5813:(pt,rt,I)=>{"use strict";I.d(rt,{y:()=>Z});var j=I(3783);function Z(H){return Array.isArray(H)?(0,j.BB)(H):H}},3343:(pt,rt,I)=>{"use strict";function j(H,D,Y,T){let ot=H[D],K=H[D+1],b=0;for(let u=D+T;u<Y;u+=T){const p=H[u],i=H[u+1];b+=Math.sqrt((p-ot)*(p-ot)+(i-K)*(i-K)),ot=p,K=i}return b}I.d(rt,{W:()=>j})},6107:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>f});var j=I(4593),Z=I(2402),H=I(109),D=I(7392),Y=I(5044),T=I(9570),ot=I(8225),K=I(6785),b=I(1750);class p{constructor(o){this.font_=(o=o||{}).font,this.rotation_=o.rotation,this.rotateWithView_=o.rotateWithView,this.scale_=o.scale,this.scaleArray_=(0,b.Pq)(void 0!==o.scale?o.scale:1),this.text_=o.text,this.textAlign_=o.textAlign,this.justify_=o.justify,this.textBaseline_=o.textBaseline,this.fill_=void 0!==o.fill?o.fill:new Y.Z({color:"#333"}),this.maxAngle_=void 0!==o.maxAngle?o.maxAngle:Math.PI/4,this.placement_=void 0!==o.placement?o.placement:"point",this.overflow_=!!o.overflow,this.stroke_=void 0!==o.stroke?o.stroke:null,this.offsetX_=void 0!==o.offsetX?o.offsetX:0,this.offsetY_=void 0!==o.offsetY?o.offsetY:0,this.backgroundFill_=o.backgroundFill?o.backgroundFill:null,this.backgroundStroke_=o.backgroundStroke?o.backgroundStroke:null,this.padding_=void 0===o.padding?null:o.padding}clone(){const o=this.getScale();return new p({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(o)?o.slice():o,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(o){this.overflow_=o}setFont(o){this.font_=o}setMaxAngle(o){this.maxAngle_=o}setOffsetX(o){this.offsetX_=o}setOffsetY(o){this.offsetY_=o}setPlacement(o){this.placement_=o}setRotateWithView(o){this.rotateWithView_=o}setFill(o){this.fill_=o}setRotation(o){this.rotation_=o}setScale(o){this.scale_=o,this.scaleArray_=(0,b.Pq)(void 0!==o?o:1)}setStroke(o){this.stroke_=o}setText(o){this.text_=o}setTextAlign(o){this.textAlign_=o}setJustify(o){this.justify_=o}setTextBaseline(o){this.textBaseline_=o}setBackgroundFill(o){this.backgroundFill_=o}setBackgroundStroke(o){this.backgroundStroke_=o}setPadding(o){this.padding_=o}}const i=p;function a(s){return new H.ZP({fill:S(s,""),stroke:r(s,""),text:d(s),image:g(s)})}function S(s,o){const L=s[o+"fill-color"];if(L)return new Y.Z({color:L})}function r(s,o){const L=s[o+"stroke-width"],k=s[o+"stroke-color"];if(L||k)return new K.Z({width:L,color:k,lineCap:s[o+"stroke-line-cap"],lineJoin:s[o+"stroke-line-join"],lineDash:s[o+"stroke-line-dash"],lineDashOffset:s[o+"stroke-line-dash-offset"],miterLimit:s[o+"stroke-miter-limit"]})}function d(s){const o=s["text-value"];return o?new i({text:o,font:s["text-font"],maxAngle:s["text-max-angle"],offsetX:s["text-offset-x"],offsetY:s["text-offset-y"],overflow:s["text-overflow"],placement:s["text-placement"],scale:s["text-scale"],rotateWithView:s["text-rotate-with-view"],rotation:s["text-rotation"],textAlign:s["text-align"],justify:s["text-justify"],textBaseline:s["text-baseline"],padding:s["text-padding"],fill:S(s,"text-"),backgroundFill:S(s,"text-background-"),stroke:r(s,"text-"),backgroundStroke:r(s,"text-background-")}):void 0}function g(s){const o=s["icon-src"],L=s["icon-img"];if(o||L)return new T.Z({src:o,img:L,imgSize:s["icon-img-size"],anchor:s["icon-anchor"],anchorOrigin:s["icon-anchor-origin"],anchorXUnits:s["icon-anchor-x-units"],anchorYUnits:s["icon-anchor-y-units"],color:s["icon-color"],crossOrigin:s["icon-cross-origin"],offset:s["icon-offset"],displacement:s["icon-displacement"],opacity:s["icon-opacity"],scale:s["icon-scale"],rotation:s["icon-rotation"],rotateWithView:s["icon-rotate-with-view"],size:s["icon-size"],declutterMode:s["icon-declutter-mode"]});const k=s["shape-points"];if(k){const w="shape-";return new ot.Z({points:k,fill:S(s,w),stroke:r(s,w),radius:s["shape-radius"],radius1:s["shape-radius1"],radius2:s["shape-radius2"],angle:s["shape-angle"],displacement:s["shape-displacement"],rotation:s["shape-rotation"],rotateWithView:s["shape-rotate-with-view"],scale:s["shape-scale"],declutterMode:s["shape-declutter-mode"]})}const A=s["circle-radius"];if(A){const w="circle-";return new D.Z({radius:A,fill:S(s,w),stroke:r(s,w),displacement:s["circle-displacement"],scale:s["circle-scale"],rotation:s["circle-rotation"],rotateWithView:s["circle-rotate-with-view"],declutterMode:s["circle-declutter-mode"]})}}const f=class _ extends j.Z{constructor(o){o=o||{};const L=Object.assign({},o);delete L.style,delete L.renderBuffer,delete L.updateWhileAnimating,delete L.updateWhileInteracting,super(L),this.declutter_=void 0!==o.declutter&&o.declutter,this.renderBuffer_=void 0!==o.renderBuffer?o.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(o.style),this.updateWhileAnimating_=void 0!==o.updateWhileAnimating&&o.updateWhileAnimating,this.updateWhileInteracting_=void 0!==o.updateWhileInteracting&&o.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(o){return super.getFeatures(o)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(o){o.declutterTree||(o.declutterTree=new Z(9)),this.getRenderer().renderDeclutter(o)}setRenderOrder(o){this.set("renderOrder",o)}setStyle(o){let L;if(void 0===o)L=H.yF;else if(null===o)L=null;else if("function"==typeof o)L=o;else if(o instanceof H.ZP)L=o;else if(Array.isArray(o)){const k=o.length,A=new Array(k);for(let w=0;w<k;++w){const X=o[w];A[w]=X instanceof H.ZP?X:a(X)}L=A}else L=a(o);this.style_=L,this.styleFunction_=null===o?void 0:(0,H.J$)(this.style_),this.changed()}}},7639:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>Z});const Z=class j{drawCustom(D,Y,T,ot){}drawGeometry(D){}setStyle(D){}drawCircle(D,Y){}drawFeature(D,Y){}drawGeometryCollection(D,Y){}drawLineString(D,Y){}drawMultiLineString(D,Y){}drawMultiPoint(D,Y){}drawMultiPolygon(D,Y){}drawPoint(D,Y){}drawPolygon(D,Y){}drawText(D,Y){}setFillStrokeStyle(D,Y){}setImageStyle(D,Y){}setTextStyle(D,Y){}}},3620:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>u});var j=I(7639),Z=I(5813),H=I(483),D=I(4686),Y=I(2456),T=I(760),ot=I(874),K=I(2774);const u=class b extends j.Z{constructor(i,a,S,r,d,g,h){super(),this.context_=i,this.pixelRatio_=a,this.extent_=S,this.transform_=r,this.viewRotation_=d,this.squaredTolerance_=g,this.userTransform_=h,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,H.Ue)()}drawImages_(i,a,S,r){if(!this.image_)return;const d=(0,ot.vT)(i,a,S,r,this.transform_,this.pixelCoordinates_),g=this.context_,h=this.tmpLocalTransform_,_=g.globalAlpha;1!=this.imageOpacity_&&(g.globalAlpha=_*this.imageOpacity_);let f=this.imageRotation_;this.imageRotateWithView_&&(f+=this.viewRotation_);for(let s=0,o=d.length;s<o;s+=2){const L=d[s]-this.imageAnchorX_,k=d[s+1]-this.imageAnchorY_;if(0!==f||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const A=L+this.imageAnchorX_,w=k+this.imageAnchorY_;(0,H.qC)(h,A,w,1,1,f,-A,-w),g.setTransform.apply(g,h),g.translate(A,w),g.scale(this.imageScale_[0],this.imageScale_[1]),g.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),g.setTransform(1,0,0,1,0,0)}else g.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,L,k,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(g.globalAlpha=_)}drawText_(i,a,S,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const d=(0,ot.vT)(i,a,S,r,this.transform_,this.pixelCoordinates_),g=this.context_;let h=this.textRotation_;for(this.textRotateWithView_&&(h+=this.viewRotation_);a<S;a+=r){const _=d[a]+this.textOffsetX_,f=d[a+1]+this.textOffsetY_;0!==h||1!=this.textScale_[0]||1!=this.textScale_[1]?(g.translate(_-this.textOffsetX_,f-this.textOffsetY_),g.rotate(h),g.translate(this.textOffsetX_,this.textOffsetY_),g.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&g.strokeText(this.text_,0,0),this.textFillState_&&g.fillText(this.text_,0,0),g.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&g.strokeText(this.text_,_,f),this.textFillState_&&g.fillText(this.text_,_,f))}}moveToLineTo_(i,a,S,r,d){const g=this.context_,h=(0,ot.vT)(i,a,S,r,this.transform_,this.pixelCoordinates_);g.moveTo(h[0],h[1]);let _=h.length;d&&(_-=2);for(let f=2;f<_;f+=2)g.lineTo(h[f],h[f+1]);return d&&g.closePath(),S}drawRings_(i,a,S,r){for(let d=0,g=S.length;d<g;++d)a=this.moveToLineTo_(i,a,S[d],r,!0);return a}drawCircle(i){if((0,T.kK)(this.extent_,i.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const a=(0,K.Kr)(i,this.transform_,this.pixelCoordinates_),S=a[2]-a[0],r=a[3]-a[1],d=Math.sqrt(S*S+r*r),g=this.context_;g.beginPath(),g.arc(a[0],a[1],d,0,2*Math.PI),this.fillState_&&g.fill(),this.strokeState_&&g.stroke()}""!==this.text_&&this.drawText_(i.getCenter(),0,2,2)}}setStyle(i){this.setFillStrokeStyle(i.getFill(),i.getStroke()),this.setImageStyle(i.getImage()),this.setTextStyle(i.getText())}setTransform(i){this.transform_=i}drawGeometry(i){switch(i.getType()){case"Point":this.drawPoint(i);break;case"LineString":this.drawLineString(i);break;case"Polygon":this.drawPolygon(i);break;case"MultiPoint":this.drawMultiPoint(i);break;case"MultiLineString":this.drawMultiLineString(i);break;case"MultiPolygon":this.drawMultiPolygon(i);break;case"GeometryCollection":this.drawGeometryCollection(i);break;case"Circle":this.drawCircle(i)}}drawFeature(i,a){const S=a.getGeometryFunction()(i);!S||!(0,T.kK)(this.extent_,S.getExtent())||(this.setStyle(a),this.drawGeometry(S))}drawGeometryCollection(i){const a=i.getGeometriesArray();for(let S=0,r=a.length;S<r;++S)this.drawGeometry(a[S])}drawPoint(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const a=i.getFlatCoordinates(),S=i.getStride();this.image_&&this.drawImages_(a,0,a.length,S),""!==this.text_&&this.drawText_(a,0,a.length,S)}drawMultiPoint(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const a=i.getFlatCoordinates(),S=i.getStride();this.image_&&this.drawImages_(a,0,a.length,S),""!==this.text_&&this.drawText_(a,0,a.length,S)}drawLineString(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,T.kK)(this.extent_,i.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const a=this.context_,S=i.getFlatCoordinates();a.beginPath(),this.moveToLineTo_(S,0,S.length,i.getStride(),!1),a.stroke()}if(""!==this.text_){const a=i.getFlatMidpoint();this.drawText_(a,0,2,2)}}}drawMultiLineString(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const a=i.getExtent();if((0,T.kK)(this.extent_,a)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const S=this.context_,r=i.getFlatCoordinates();let d=0;const g=i.getEnds(),h=i.getStride();S.beginPath();for(let _=0,f=g.length;_<f;++_)d=this.moveToLineTo_(r,d,g[_],h,!1);S.stroke()}if(""!==this.text_){const S=i.getFlatMidpoints();this.drawText_(S,0,S.length,2)}}}drawPolygon(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,T.kK)(this.extent_,i.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const a=this.context_;a.beginPath(),this.drawRings_(i.getOrientedFlatCoordinates(),0,i.getEnds(),i.getStride()),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}if(""!==this.text_){const a=i.getFlatInteriorPoint();this.drawText_(a,0,2,2)}}}drawMultiPolygon(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,T.kK)(this.extent_,i.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const a=this.context_,S=i.getOrientedFlatCoordinates();let r=0;const d=i.getEndss(),g=i.getStride();a.beginPath();for(let h=0,_=d.length;h<_;++h)r=this.drawRings_(S,r,d[h],g);this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}if(""!==this.text_){const a=i.getFlatInteriorPoints();this.drawText_(a,0,a.length,2)}}}setContextFillState_(i){const a=this.context_,S=this.contextFillState_;S?S.fillStyle!=i.fillStyle&&(S.fillStyle=i.fillStyle,a.fillStyle=i.fillStyle):(a.fillStyle=i.fillStyle,this.contextFillState_={fillStyle:i.fillStyle})}setContextStrokeState_(i){const a=this.context_,S=this.contextStrokeState_;S?(S.lineCap!=i.lineCap&&(S.lineCap=i.lineCap,a.lineCap=i.lineCap),(0,Y.fS)(S.lineDash,i.lineDash)||a.setLineDash(S.lineDash=i.lineDash),S.lineDashOffset!=i.lineDashOffset&&(S.lineDashOffset=i.lineDashOffset,a.lineDashOffset=i.lineDashOffset),S.lineJoin!=i.lineJoin&&(S.lineJoin=i.lineJoin,a.lineJoin=i.lineJoin),S.lineWidth!=i.lineWidth&&(S.lineWidth=i.lineWidth,a.lineWidth=i.lineWidth),S.miterLimit!=i.miterLimit&&(S.miterLimit=i.miterLimit,a.miterLimit=i.miterLimit),S.strokeStyle!=i.strokeStyle&&(S.strokeStyle=i.strokeStyle,a.strokeStyle=i.strokeStyle)):(a.lineCap=i.lineCap,a.setLineDash(i.lineDash),a.lineDashOffset=i.lineDashOffset,a.lineJoin=i.lineJoin,a.lineWidth=i.lineWidth,a.miterLimit=i.miterLimit,a.strokeStyle=i.strokeStyle,this.contextStrokeState_={lineCap:i.lineCap,lineDash:i.lineDash,lineDashOffset:i.lineDashOffset,lineJoin:i.lineJoin,lineWidth:i.lineWidth,miterLimit:i.miterLimit,strokeStyle:i.strokeStyle})}setContextTextState_(i){const a=this.context_,S=this.contextTextState_,r=i.textAlign?i.textAlign:D.PH;S?(S.font!=i.font&&(S.font=i.font,a.font=i.font),S.textAlign!=r&&(S.textAlign=r,a.textAlign=r),S.textBaseline!=i.textBaseline&&(S.textBaseline=i.textBaseline,a.textBaseline=i.textBaseline)):(a.font=i.font,a.textAlign=r,a.textBaseline=i.textBaseline,this.contextTextState_={font:i.font,textAlign:r,textBaseline:i.textBaseline})}setFillStrokeStyle(i,a){if(i){const S=i.getColor();this.fillState_={fillStyle:(0,Z.y)(S||D.bL)}}else this.fillState_=null;if(a){const S=a.getColor(),r=a.getLineCap(),d=a.getLineDash(),g=a.getLineDashOffset(),h=a.getLineJoin(),_=a.getWidth(),f=a.getMiterLimit(),s=d||D.X9;this.strokeState_={lineCap:void 0!==r?r:D.mb,lineDash:1===this.pixelRatio_?s:s.map(o=>o*this.pixelRatio_),lineDashOffset:(g||D.He)*this.pixelRatio_,lineJoin:void 0!==h?h:D.rc,lineWidth:(void 0!==_?_:D.yC)*this.pixelRatio_,miterLimit:void 0!==f?f:D.V4,strokeStyle:(0,Z.y)(S||D.Tx)}}else this.strokeState_=null}setImageStyle(i){let a;if(!i||!(a=i.getSize()))return void(this.image_=null);const S=i.getPixelRatio(this.pixelRatio_),r=i.getAnchor(),d=i.getOrigin();this.image_=i.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*S,this.imageAnchorY_=r[1]*S,this.imageHeight_=a[1]*S,this.imageOpacity_=i.getOpacity(),this.imageOriginX_=d[0],this.imageOriginY_=d[1],this.imageRotateWithView_=i.getRotateWithView(),this.imageRotation_=i.getRotation();const g=i.getScaleArray();this.imageScale_=[g[0]*this.pixelRatio_/S,g[1]*this.pixelRatio_/S],this.imageWidth_=a[0]*S}setTextStyle(i){if(i){const a=i.getFill();if(a){const k=a.getColor();this.textFillState_={fillStyle:(0,Z.y)(k||D.bL)}}else this.textFillState_=null;const S=i.getStroke();if(S){const k=S.getColor(),A=S.getLineCap(),w=S.getLineDash(),X=S.getLineDashOffset(),m=S.getLineJoin(),v=S.getWidth(),F=S.getMiterLimit();this.textStrokeState_={lineCap:void 0!==A?A:D.mb,lineDash:w||D.X9,lineDashOffset:X||D.He,lineJoin:void 0!==m?m:D.rc,lineWidth:void 0!==v?v:D.yC,miterLimit:void 0!==F?F:D.V4,strokeStyle:(0,Z.y)(k||D.Tx)}}else this.textStrokeState_=null;const r=i.getFont(),d=i.getOffsetX(),g=i.getOffsetY(),h=i.getRotateWithView(),_=i.getRotation(),f=i.getScaleArray(),s=i.getText(),o=i.getTextAlign(),L=i.getTextBaseline();this.textState_={font:void 0!==r?r:D.Df,textAlign:void 0!==o?o:D.PH,textBaseline:void 0!==L?L:D.ru},this.text_=void 0!==s?Array.isArray(s)?s.reduce((k,A,w)=>k+(w%2?" ":A),""):s:"",this.textOffsetX_=void 0!==d?this.pixelRatio_*d:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==h&&h,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*f[0],this.pixelRatio_*f[1]]}else this.text_=""}}},5513:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>Xe});const j={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Z=[j.FILL],H=[j.STROKE],D=[j.BEGIN_PATH],Y=[j.CLOSE_PATH],T=j;var ot=I(2401),K=I(7639),b=I(5813),u=I(760),p=I(4686),i=I(2456),a=I(392);const r=class S extends K.Z{constructor(t,n,e,l){super(),this.tolerance=t,this.maxExtent=n,this.pixelRatio=l,this.maxLineWidth=0,this.resolution=e,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const n=this.pixelRatio;return 1==n?t:t.map(function(e){return e*n})}appendFlatPointCoordinates(t,n){const e=this.getBufferedMaxExtent(),l=this.tmpCoordinate_,c=this.coordinates;let x=c.length;for(let y=0,E=t.length;y<E;y+=n)l[0]=t[y],l[1]=t[y+1],(0,u.b8)(e,l)&&(c[x++]=l[0],c[x++]=l[1]);return x}appendFlatLineCoordinates(t,n,e,l,c,x){const y=this.coordinates;let E=y.length;const C=this.getBufferedMaxExtent();x&&(n+=l);let R=t[n],M=t[n+1];const O=this.tmpCoordinate_;let B,z,P,W=!0;for(B=n+l;B<e;B+=l)O[0]=t[B],O[1]=t[B+1],P=(0,u.pX)(C,O),P!==z?(W&&(y[E++]=R,y[E++]=M,W=!1),y[E++]=O[0],y[E++]=O[1]):P===ot.Z.INTERSECTING?(y[E++]=O[0],y[E++]=O[1],W=!1):W=!0,R=O[0],M=O[1],z=P;return(c&&W||B===n+l)&&(y[E++]=R,y[E++]=M),E}drawCustomCoordinates_(t,n,e,l,c){for(let x=0,y=e.length;x<y;++x){const E=e[x],C=this.appendFlatLineCoordinates(t,n,E,l,!1,!1);c.push(C),n=E}return n}drawCustom(t,n,e,l){this.beginGeometry(t,n);const c=t.getType(),x=t.getStride(),y=this.coordinates.length;let E,C,R,M,O;switch(c){case"MultiPolygon":E=t.getOrientedFlatCoordinates(),M=[];const W=t.getEndss();O=0;for(let B=0,z=W.length;B<z;++B){const P=[];O=this.drawCustomCoordinates_(E,O,W[B],x,P),M.push(P)}this.instructions.push([T.CUSTOM,y,M,t,e,a.ug]),this.hitDetectionInstructions.push([T.CUSTOM,y,M,t,l||e,a.ug]);break;case"Polygon":case"MultiLineString":R=[],E="Polygon"==c?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),O=this.drawCustomCoordinates_(E,0,t.getEnds(),x,R),this.instructions.push([T.CUSTOM,y,R,t,e,a.o1]),this.hitDetectionInstructions.push([T.CUSTOM,y,R,t,l||e,a.o1]);break;case"LineString":case"Circle":E=t.getFlatCoordinates(),C=this.appendFlatLineCoordinates(E,0,E.length,x,!1,!1),this.instructions.push([T.CUSTOM,y,C,t,e,a.Ml]),this.hitDetectionInstructions.push([T.CUSTOM,y,C,t,l||e,a.Ml]);break;case"MultiPoint":E=t.getFlatCoordinates(),C=this.appendFlatPointCoordinates(E,x),C>y&&(this.instructions.push([T.CUSTOM,y,C,t,e,a.Ml]),this.hitDetectionInstructions.push([T.CUSTOM,y,C,t,l||e,a.Ml]));break;case"Point":E=t.getFlatCoordinates(),this.coordinates.push(E[0],E[1]),C=this.coordinates.length,this.instructions.push([T.CUSTOM,y,C,t,e]),this.hitDetectionInstructions.push([T.CUSTOM,y,C,t,l||e])}this.endGeometry(n)}beginGeometry(t,n){this.beginGeometryInstruction1_=[T.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[T.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let n;t.reverse();const e=t.length;let l,c,x=-1;for(n=0;n<e;++n)l=t[n],c=l[0],c==T.END_GEOMETRY?x=n:c==T.BEGIN_GEOMETRY&&(l[2]=n,(0,i.FZ)(this.hitDetectionInstructions,x,n),x=-1)}setFillStrokeStyle(t,n){const e=this.state;if(t){const l=t.getColor();e.fillStyle=(0,b.y)(l||p.bL)}else e.fillStyle=void 0;if(n){const l=n.getColor();e.strokeStyle=(0,b.y)(l||p.Tx);const c=n.getLineCap();e.lineCap=void 0!==c?c:p.mb;const x=n.getLineDash();e.lineDash=x?x.slice():p.X9;const y=n.getLineDashOffset();e.lineDashOffset=y||p.He;const E=n.getLineJoin();e.lineJoin=void 0!==E?E:p.rc;const C=n.getWidth();e.lineWidth=void 0!==C?C:p.yC;const R=n.getMiterLimit();e.miterLimit=void 0!==R?R:p.V4,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0}createFill(t){const n=t.fillStyle,e=[T.SET_FILL_STYLE,n];return"string"!=typeof n&&e.push(!0),e}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[T.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,n){const e=t.fillStyle;("string"!=typeof e||t.currentFillStyle!=e)&&(void 0!==e&&this.instructions.push(n.call(this,t)),t.currentFillStyle=e)}updateStrokeStyle(t,n){const e=t.strokeStyle,l=t.lineCap,c=t.lineDash,x=t.lineDashOffset,y=t.lineJoin,E=t.lineWidth,C=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=l||c!=t.currentLineDash&&!(0,i.fS)(t.currentLineDash,c)||t.currentLineDashOffset!=x||t.currentLineJoin!=y||t.currentLineWidth!=E||t.currentMiterLimit!=C)&&(void 0!==e&&n.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=l,t.currentLineDash=c,t.currentLineDashOffset=x,t.currentLineJoin=y,t.currentLineWidth=E,t.currentMiterLimit=C)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[T.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,u.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,u.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}};var f=I(9182);const o=class s extends r{constructor(t,n,e,l){super(t,n,e,l)}drawFlatCoordinatess_(t,n,e,l){const c=this.state,x=void 0!==c.fillStyle,y=void 0!==c.strokeStyle,E=e.length;this.instructions.push(D),this.hitDetectionInstructions.push(D);for(let C=0;C<E;++C){const R=e[C],M=this.coordinates.length,O=this.appendFlatLineCoordinates(t,n,R,l,!0,!y),W=[T.MOVE_TO_LINE_TO,M,O];this.instructions.push(W),this.hitDetectionInstructions.push(W),y&&(this.instructions.push(Y),this.hitDetectionInstructions.push(Y)),n=R}return x&&(this.instructions.push(Z),this.hitDetectionInstructions.push(Z)),y&&(this.instructions.push(H),this.hitDetectionInstructions.push(H)),n}drawCircle(t,n){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([T.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const x=t.getFlatCoordinates(),y=t.getStride(),E=this.coordinates.length;this.appendFlatLineCoordinates(x,0,x.length,y,!1,!1);const C=[T.CIRCLE,E];this.instructions.push(D,C),this.hitDetectionInstructions.push(D,C),void 0!==e.fillStyle&&(this.instructions.push(Z),this.hitDetectionInstructions.push(Z)),void 0!==e.strokeStyle&&(this.instructions.push(H),this.hitDetectionInstructions.push(H)),this.endGeometry(n)}drawPolygon(t,n){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([T.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const x=t.getEnds(),y=t.getOrientedFlatCoordinates(),E=t.getStride();this.drawFlatCoordinatess_(y,0,x,E),this.endGeometry(n)}drawMultiPolygon(t,n){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(t,n),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([T.SET_FILL_STYLE,p.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const x=t.getEndss(),y=t.getOrientedFlatCoordinates(),E=t.getStride();let C=0;for(let R=0,M=x.length;R<M;++R)C=this.drawFlatCoordinatess_(y,C,x[R],E);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const n=this.coordinates;for(let e=0,l=n.length;e<l;++e)n[e]=(0,f.uZ)(n[e],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};var L=I(119);function k(et,t,n,e,l){let R,M,O,W,B,z,P,G,V,J,c=n,x=n,y=0,E=0,C=n;for(M=n;M<e;M+=l){const it=t[M],tt=t[M+1];void 0!==B&&(V=it-B,J=tt-z,W=Math.sqrt(V*V+J*J),void 0!==P&&(E+=O,R=Math.acos((P*V+G*J)/(O*W)),R>et&&(E>y&&(y=E,c=C,x=M),E=0,C=M-l)),O=W,P=V,G=J),B=it,z=tt}return E+=W,E>y?[C,M]:[c,x]}const A={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},m={Circle:o,Default:r,Image:class d extends r{constructor(t,n,e,l){super(t,n,e,l),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const e=t.getFlatCoordinates(),l=t.getStride(),c=this.coordinates.length,x=this.appendFlatPointCoordinates(e,l);this.instructions.push([T.DRAW_IMAGE,c,x,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([T.DRAW_IMAGE,c,x,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(t,n){if(!this.image_)return;this.beginGeometry(t,n);const e=t.getFlatCoordinates(),l=t.getStride(),c=this.coordinates.length,x=this.appendFlatPointCoordinates(e,l);this.instructions.push([T.DRAW_IMAGE,c,x,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([T.DRAW_IMAGE,c,x,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,n){const e=t.getAnchor(),l=t.getSize(),c=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=l[1],this.opacity_=t.getOpacity(),this.originX_=c[0],this.originY_=c[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=l[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=n}},LineString:class h extends r{constructor(t,n,e,l){super(t,n,e,l)}drawFlatCoordinates_(t,n,e,l){const c=this.coordinates.length,x=this.appendFlatLineCoordinates(t,n,e,l,!1,!1),y=[T.MOVE_TO_LINE_TO,c,x];return this.instructions.push(y),this.hitDetectionInstructions.push(y),e}drawLineString(t,n){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,p.X9,p.He],D);const x=t.getFlatCoordinates(),y=t.getStride();this.drawFlatCoordinates_(x,0,x.length,y),this.hitDetectionInstructions.push(H),this.endGeometry(n)}drawMultiLineString(t,n){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([T.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],D);const x=t.getEnds(),y=t.getFlatCoordinates(),E=t.getStride();let C=0;for(let R=0,M=x.length;R<M;++R)C=this.drawFlatCoordinates_(y,C,x[R],E);this.hitDetectionInstructions.push(H),this.endGeometry(n)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(H),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(H),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(D)}},Polygon:o,Text:class w extends r{constructor(t,n,e,l){super(t,n,e,l),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,n){const c=this.textState_;if(""===this.text_||!c||!this.textFillState_&&!this.textStrokeState_)return;const x=this.coordinates;let y=x.length;const E=t.getType();let C=null,R=t.getStride();if("line"!==c.placement||"LineString"!=E&&"MultiLineString"!=E&&"Polygon"!=E&&"MultiPolygon"!=E){let M=c.overflow?null:[];switch(E){case"Point":case"MultiPoint":C=t.getFlatCoordinates();break;case"LineString":C=t.getFlatMidpoint();break;case"Circle":C=t.getCenter();break;case"MultiLineString":C=t.getFlatMidpoints(),R=2;break;case"Polygon":C=t.getFlatInteriorPoint(),c.overflow||M.push(C[2]/this.resolution),R=3;break;case"MultiPolygon":const P=t.getFlatInteriorPoints();C=[];for(let G=0,V=P.length;G<V;G+=3)c.overflow||M.push(P[G+2]/this.resolution),C.push(P[G],P[G+1]);if(0===C.length)return;R=2}const O=this.appendFlatPointCoordinates(C,R);if(O===y)return;if(M&&(O-y)/2!=C.length/R){let P=y/2;M=M.filter((G,V)=>{const J=x[2*(P+V)]===C[V*R]&&x[2*(P+V)+1]===C[V*R+1];return J||--P,J})}this.saveTextStates_(),(c.backgroundFill||c.backgroundStroke)&&(this.setFillStrokeStyle(c.backgroundFill,c.backgroundStroke),c.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),c.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);let W=c.padding;if(W!=p.oB&&(c.scale[0]<0||c.scale[1]<0)){let P=c.padding[0],G=c.padding[1],V=c.padding[2],J=c.padding[3];c.scale[0]<0&&(G=-G,J=-J),c.scale[1]<0&&(P=-P,V=-V),W=[P,G,V,J]}const B=this.pixelRatio;this.instructions.push([T.DRAW_IMAGE,y,O,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,W==p.oB?p.oB:W.map(function(P){return P*B}),!!c.backgroundFill,!!c.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]);const z=1/B;this.hitDetectionInstructions.push([T.DRAW_IMAGE,y,O,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[z,z],NaN,void 0,this.declutterImageWithText_,W,!!c.backgroundFill,!!c.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,M]),this.endGeometry(n)}else{if(!(0,u.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let M;if(C=t.getFlatCoordinates(),"LineString"==E)M=[C.length];else if("MultiLineString"==E)M=t.getEnds();else if("Polygon"==E)M=t.getEnds().slice(0,1);else if("MultiPolygon"==E){const z=t.getEndss();M=[];for(let P=0,G=z.length;P<G;++P)M.push(z[P][0])}this.beginGeometry(t,n);const O=c.textAlign;let B,W=0;for(let z=0,P=M.length;z<P;++z){if(null==O){const V=k(c.maxAngle,C,W,M[z],R);W=V[0],B=V[1]}else B=M[z];for(let V=W;V<B;V+=R)x.push(C[V],C[V+1]);const G=x.length;W=M[z],this.drawChars_(y,G),y=G}this.endGeometry(n)}}saveTextStates_(){const t=this.textStrokeState_,n=this.textState_,e=this.textFillState_,l=this.strokeKey_;t&&(l in this.strokeStates||(this.strokeStates[l]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const c=this.textKey_;c in this.textStates||(this.textStates[c]={font:n.font,textAlign:n.textAlign||p.PH,justify:n.justify,textBaseline:n.textBaseline||p.ru,scale:n.scale});const x=this.fillKey_;e&&(x in this.fillStates||(this.fillStates[x]={fillStyle:e.fillStyle}))}drawChars_(t,n){const e=this.textStrokeState_,l=this.textState_,c=this.strokeKey_,x=this.textKey_,y=this.fillKey_;this.saveTextStates_();const E=this.pixelRatio,C=A[l.textBaseline],R=this.textOffsetY_*E,M=this.text_,O=e?e.lineWidth*Math.abs(l.scale[0])/2:0;this.instructions.push([T.DRAW_CHARS,t,n,C,l.overflow,y,l.maxAngle,E,R,c,O*E,M,x,1]),this.hitDetectionInstructions.push([T.DRAW_CHARS,t,n,C,l.overflow,y,l.maxAngle,1,R,c,O,M,x,1/E])}setTextStyle(t,n){let e,l,c;if(t){const x=t.getFill();x?(l=this.textFillState_,l||(l={},this.textFillState_=l),l.fillStyle=(0,b.y)(x.getColor()||p.bL)):(l=null,this.textFillState_=l);const y=t.getStroke();if(y){c=this.textStrokeState_,c||(c={},this.textStrokeState_=c);const B=y.getLineDash(),z=y.getLineDashOffset(),P=y.getWidth(),G=y.getMiterLimit();c.lineCap=y.getLineCap()||p.mb,c.lineDash=B?B.slice():p.X9,c.lineDashOffset=void 0===z?p.He:z,c.lineJoin=y.getLineJoin()||p.rc,c.lineWidth=void 0===P?p.yC:P,c.miterLimit=void 0===G?p.V4:G,c.strokeStyle=(0,b.y)(y.getColor()||p.Tx)}else c=null,this.textStrokeState_=c;e=this.textState_;const E=t.getFont()||p.Df;(0,p.Qx)(E);const C=t.getScaleArray();e.overflow=t.getOverflow(),e.font=E,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.justify=t.getJustify(),e.textBaseline=t.getTextBaseline()||p.ru,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||p.oB,e.scale=void 0===C?[1,1]:C;const R=t.getOffsetX(),M=t.getOffsetY(),O=t.getRotateWithView(),W=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===R?0:R,this.textOffsetY_=void 0===M?0:M,this.textRotateWithView_=void 0!==O&&O,this.textRotation_=void 0===W?0:W,this.strokeKey_=c?("string"==typeof c.strokeStyle?c.strokeStyle:(0,L.sq)(c.strokeStyle))+c.lineCap+c.lineDashOffset+"|"+c.lineWidth+c.lineJoin+c.miterLimit+"["+c.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.justify||"?")+(e.textBaseline||"?"),this.fillKey_=l?"string"==typeof l.fillStyle?l.fillStyle:"|"+(0,L.sq)(l.fillStyle):""}else this.text_="";this.declutterImageWithText_=n}}},F=class v{constructor(t,n,e,l){this.tolerance_=t,this.maxExtent_=n,this.pixelRatio_=l,this.resolution_=e,this.buildersByZIndex_={}}finish(){const t={};for(const n in this.buildersByZIndex_){t[n]=t[n]||{};const e=this.buildersByZIndex_[n];for(const l in e){const c=e[l].finish();t[n][l]=c}}return t}getBuilder(t,n){const e=void 0!==t?t.toString():"0";let l=this.buildersByZIndex_[e];void 0===l&&(l={},this.buildersByZIndex_[e]=l);let c=l[n];return void 0===c&&(c=new(0,m[n])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),l[n]=c),c}};var N=I(2121),Q=I(483),nt=I(2156),$=I(874);function at(et,t,n,e,l,c,x,y,E,C,R,M){let O=et[t],W=et[t+1],B=0,z=0,P=0,G=0;function V(){B=O,z=W,O=et[t+=e],W=et[t+1],G+=P,P=Math.sqrt((O-B)*(O-B)+(W-z)*(W-z))}do{V()}while(t<n-e&&G+P<c);let J=0===P?0:(c-G)/P;const it=(0,nt.t7)(B,O,J),tt=(0,nt.t7)(z,W,J),ht=t-e,ut=G,lt=c+y*E(C,l,R);for(;t<n-e&&G+P<lt;)V();J=0===P?0:(lt-G)/P;const ft=(0,nt.t7)(B,O,J),gt=(0,nt.t7)(z,W,J);let yt;if(M){const q=[it,tt,ft,gt];(0,$.U1)(q,0,4,2,M,q,q),yt=q[0]>q[2]}else yt=it>ft;const mt=Math.PI,ct=[],Tt=ht+e===t;let _t;if(P=0,G=ut,O=et[t=ht],W=et[t+1],Tt)return V(),_t=Math.atan2(W-z,O-B),yt&&(_t+=_t>0?-mt:mt),ct[0]=[(ft+it)/2,(gt+tt)/2,(lt-c)/2,_t,l],ct;for(let q=0,dt=(l=l.replace(/\n/g," ")).length;q<dt;){V();let st=Math.atan2(W-z,O-B);if(yt&&(st+=st>0?-mt:mt),void 0!==_t){let At=st-_t;if(At+=At>mt?-2*mt:At<-mt?2*mt:0,Math.abs(At)>x)return null}_t=st;const St=q;let It=0;for(;q<dt;++q){const Gt=y*E(C,l[yt?dt-q-1:q],R);if(t+e<n&&G+P<c+It+Gt/2)break;It+=Gt}if(q===St)continue;const wt=yt?l.substring(dt-St,dt-q):l.substring(St,q);J=0===P?0:(c+It/2-G)/P;const U=(0,nt.t7)(B,O,J),ue=(0,nt.t7)(z,W,J);ct.push([U,ue,It/2,st,wt]),c+=It}return ct}var Et=I(3343);const xt=(0,u.lJ)(),Mt=[],Ct=[],Ft=[],Bt=[];function he(et){return et[3].declutterBox}const De=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function ce(et,t){return("start"===t||"end"===t)&&!De.test(et)&&(t="start"===t?"left":"right"),A[t]}function ve(et,t,n){return n>0&&et.push("\n",""),et.push(t,""),et}const Le=class Oe{constructor(t,n,e,l){this.overlaps=e,this.pixelRatio=n,this.resolution=t,this.instructions=l.instructions,this.coordinates=l.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Q.Ue)(),this.hitDetectionInstructions=l.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=l.fillStates||{},this.strokeStates=l.strokeStates||{},this.textStates=l.textStates||{},this.widths_={},this.labels_={}}createLabel(t,n,e,l){const c=t+n+e+l;if(this.labels_[c])return this.labels_[c];const x=l?this.strokeStates[l]:null,y=e?this.fillStates[e]:null,E=this.textStates[n],C=this.pixelRatio,R=[E.scale[0]*C,E.scale[1]*C],M=Array.isArray(t),O=E.justify?A[E.justify]:ce(Array.isArray(t)?t[0]:t,E.textAlign||p.PH),W=l&&x.lineWidth?x.lineWidth:0,B=M?t:t.split("\n").reduce(ve,[]),{width:z,height:P,widths:G,heights:V,lineWidths:J}=(0,p.Zw)(E,B),it=z+W,tt=[],ht=(it+2)*R[0],ut=(P+W)*R[1],lt={width:ht<0?Math.floor(ht):Math.ceil(ht),height:ut<0?Math.floor(ut):Math.ceil(ut),contextInstructions:tt};(1!=R[0]||1!=R[1])&&tt.push("scale",R),l&&(tt.push("strokeStyle",x.strokeStyle),tt.push("lineWidth",W),tt.push("lineCap",x.lineCap),tt.push("lineJoin",x.lineJoin),tt.push("miterLimit",x.miterLimit),tt.push("setLineDash",[x.lineDash]),tt.push("lineDashOffset",x.lineDashOffset)),e&&tt.push("fillStyle",y.fillStyle),tt.push("textBaseline","middle"),tt.push("textAlign","center");const ft=.5-O;let gt=O*it+ft*W;const yt=[],mt=[];let dt,ct=0,Tt=0,_t=0,q=0;for(let st=0,St=B.length;st<St;st+=2){const It=B[st];if("\n"===It){Tt+=ct,ct=0,gt=O*it+ft*W,++q;continue}const wt=B[st+1]||E.font;wt!==dt&&(l&&yt.push("font",wt),e&&mt.push("font",wt),dt=wt),ct=Math.max(ct,V[_t]);const U=[It,gt+ft*G[_t]+O*(G[_t]-J[q]),.5*(W+ct)+Tt];gt+=G[_t],l&&yt.push("strokeText",U),e&&mt.push("fillText",U),++_t}return Array.prototype.push.apply(tt,yt),Array.prototype.push.apply(tt,mt),this.labels_[c]=lt,lt}replayTextBackground_(t,n,e,l,c,x,y){t.beginPath(),t.moveTo.apply(t,n),t.lineTo.apply(t,e),t.lineTo.apply(t,l),t.lineTo.apply(t,c),t.lineTo.apply(t,n),x&&(this.alignFill_=x[2],this.fill_(t)),y&&(this.setStrokeStyle_(t,y),t.stroke())}calculateImageOrLabelDimensions_(t,n,e,l,c,x,y,E,C,R,M,O,W,B,z,P){let G=e-(y*=O[0]),V=l-(E*=O[1]);const J=c+C>t?t-C:c,it=x+R>n?n-R:x,tt=B[3]+J*O[0]+B[1],ht=B[0]+it*O[1]+B[2],ut=G-B[3],lt=V-B[0];let ft;return(z||0!==M)&&(Mt[0]=ut,Bt[0]=ut,Mt[1]=lt,Ct[1]=lt,Ct[0]=ut+tt,Ft[0]=Ct[0],Ft[1]=lt+ht,Bt[1]=Ft[1]),0!==M?(ft=(0,Q.qC)((0,Q.Ue)(),e,l,1,1,M,-e,-l),(0,Q.nn)(ft,Mt),(0,Q.nn)(ft,Ct),(0,Q.nn)(ft,Ft),(0,Q.nn)(ft,Bt),(0,u.T9)(Math.min(Mt[0],Ct[0],Ft[0],Bt[0]),Math.min(Mt[1],Ct[1],Ft[1],Bt[1]),Math.max(Mt[0],Ct[0],Ft[0],Bt[0]),Math.max(Mt[1],Ct[1],Ft[1],Bt[1]),xt)):(0,u.T9)(Math.min(ut,ut+tt),Math.min(lt,lt+ht),Math.max(ut,ut+tt),Math.max(lt,lt+ht),xt),W&&(G=Math.round(G),V=Math.round(V)),{drawImageX:G,drawImageY:V,drawImageW:J,drawImageH:it,originX:C,originY:R,declutterBox:{minX:xt[0],minY:xt[1],maxX:xt[2],maxY:xt[3],value:P},canvasTransform:ft,scale:O}}replayImageOrLabel_(t,n,e,l,c,x,y){const C=l.declutterBox,R=t.canvas,M=y?y[2]*l.scale[0]/2:0;return C.minX-M<=R.width/n&&C.maxX+M>=0&&C.minY-M<=R.height/n&&C.maxY+M>=0&&(!(!x&&!y)&&this.replayTextBackground_(t,Mt,Ct,Ft,Bt,x,y),(0,p._f)(t,l.canvasTransform,c,e,l.originX,l.originY,l.drawImageW,l.drawImageH,l.drawImageX,l.drawImageY,l.scale)),!0}fill_(t){if(this.alignFill_){const n=(0,Q.nn)(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.save(),t.translate(n[0]%e,n[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,n){t.strokeStyle=n[1],t.lineWidth=n[2],t.lineCap=n[3],t.lineJoin=n[4],t.miterLimit=n[5],t.lineDashOffset=n[7],t.setLineDash(n[6])}drawLabelWithPointPlacement_(t,n,e,l){const c=this.textStates[n],x=this.createLabel(t,n,l,e),y=this.strokeStates[e],E=this.pixelRatio,C=ce(Array.isArray(t)?t[0]:t,c.textAlign||p.PH),R=A[c.textBaseline||p.ru],M=y&&y.lineWidth?y.lineWidth:0;return{label:x,anchorX:C*(x.width/E-2*c.scale[0])+2*(.5-C)*M,anchorY:R*x.height/E+2*(.5-R)*M}}execute_(t,n,e,l,c,x,y,E){let C;this.pixelCoordinates_&&(0,i.fS)(e,this.renderedTransform_)?C=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),C=(0,$.vT)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),(0,Q.lk)(this.renderedTransform_,e));let R=0;const M=l.length;let W,B,z,P,G,V,J,it,tt,ht,ut,lt,O=0,ft=0,gt=0,yt=null,mt=null;const ct=this.coordinateCache_,Tt=this.viewRotation_,_t=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,q={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Tt},dt=this.instructions!=l||this.overlaps?0:200;let st,St,It,wt;for(;R<M;){const U=l[R];switch(U[0]){case T.BEGIN_GEOMETRY:st=U[1],wt=U[3],st.getGeometry()?void 0===y||(0,u.kK)(y,wt.getExtent())?++R:R=U[2]+1:R=U[2];break;case T.BEGIN_PATH:ft>dt&&(this.fill_(t),ft=0),gt>dt&&(t.stroke(),gt=0),!ft&&!gt&&(t.beginPath(),P=NaN,G=NaN),++R;break;case T.CIRCLE:O=U[1];const At=C[O],Gt=C[O+1],fe=C[O+2]-At,ge=C[O+3]-Gt,_e=Math.sqrt(fe*fe+ge*ge);t.moveTo(At+_e,Gt),t.arc(At,Gt,_e,0,2*Math.PI,!0),++R;break;case T.CLOSE_PATH:t.closePath(),++R;break;case T.CUSTOM:O=U[1],W=U[2];const ze=U[4],me=6==U.length?U[5]:void 0;q.geometry=U[3],q.feature=st,R in ct||(ct[R]=[]);const zt=ct[R];me?me(C,O,W,2,zt):(zt[0]=C[O],zt[1]=C[O+1],zt.length=2),ze(zt,q),++R;break;case T.DRAW_IMAGE:O=U[1],W=U[2],it=U[3],B=U[4],z=U[5];let ie=U[6];const Ke=U[7],Ue=U[8],Ne=U[9],xe=U[10];let ne=U[11];const Ve=U[12];let Ht=U[13];const ye=U[14],Kt=U[15];if(!it&&U.length>=20){tt=U[19],ht=U[20],ut=U[21],lt=U[22];const Dt=this.drawLabelWithPointPlacement_(tt,ht,ut,lt);it=Dt.label,U[3]=it,B=(Dt.anchorX-U[23])*this.pixelRatio,U[4]=B,z=(Dt.anchorY-U[24])*this.pixelRatio,U[5]=z,ie=it.height,U[6]=ie,Ht=it.width,U[13]=Ht}let se,re,Jt,Qt;U.length>25&&(se=U[25]),U.length>17?(re=U[16],Jt=U[17],Qt=U[18]):(re=p.oB,Jt=!1,Qt=!1),xe&&_t?ne+=Tt:!xe&&!_t&&(ne-=Tt);let je=0;for(;O<W;O+=2){if(se&&se[je++]<Ht/this.pixelRatio)continue;const Dt=this.calculateImageOrLabelDimensions_(it.width,it.height,C[O],C[O+1],Ht,ie,B,z,Ue,Ne,ne,Ve,c,re,Jt||Qt,st),Yt=[t,n,it,Dt,Ke,Jt?yt:null,Qt?mt:null];if(E){if("none"===ye)continue;if("obstacle"===ye){E.insert(Dt.declutterBox);continue}{let Ot,Pt;if(Kt){const vt=W-O;if(!Kt[vt]){Kt[vt]=Yt;continue}if(Ot=Kt[vt],delete Kt[vt],Pt=he(Ot),E.collides(Pt))continue}if(E.collides(Dt.declutterBox))continue;Ot&&(E.insert(Pt),this.replayImageOrLabel_.apply(this,Ot)),E.insert(Dt.declutterBox)}}this.replayImageOrLabel_.apply(this,Yt)}++R;break;case T.DRAW_CHARS:const pe=U[1],Se=U[2],oe=U[3],He=U[4];lt=U[5];const Je=U[6],Ee=U[7],Ie=U[8];ut=U[9];const ae=U[10];tt=U[11],ht=U[12];const Ce=[U[13],U[13]],le=this.textStates[ht],Ut=le.font,Nt=[le.scale[0]*Ee,le.scale[1]*Ee];let Vt;Ut in this.widths_?Vt=this.widths_[Ut]:(Vt={},this.widths_[Ut]=Vt);const Re=(0,Et.W)(C,pe,Se,2),Te=Math.abs(Nt[0])*(0,p.Kd)(Ut,tt,Vt);if(He||Te<=Re){const Ot=at(C,pe,Se,2,tt,(Re-Te)*A[this.textStates[ht].textAlign],Je,Math.abs(Nt[0]),p.Kd,Ut,Vt,_t?0:this.viewRotation_);t:if(Ot){const Pt=[];let vt,$t,qt,Rt,Lt;if(ut)for(vt=0,$t=Ot.length;vt<$t;++vt){Lt=Ot[vt],qt=Lt[4],Rt=this.createLabel(qt,ht,"",ut),B=Lt[2]+(Nt[0]<0?-ae:ae),z=oe*Rt.height+2*(.5-oe)*ae*Nt[1]/Nt[0]-Ie;const Wt=this.calculateImageOrLabelDimensions_(Rt.width,Rt.height,Lt[0],Lt[1],Rt.width,Rt.height,B,z,0,0,Lt[3],Ce,!1,p.oB,!1,st);if(E&&E.collides(Wt.declutterBox))break t;Pt.push([t,n,Rt,Wt,1,null,null])}if(lt)for(vt=0,$t=Ot.length;vt<$t;++vt){Lt=Ot[vt],qt=Lt[4],Rt=this.createLabel(qt,ht,lt,""),B=Lt[2],z=oe*Rt.height-Ie;const Wt=this.calculateImageOrLabelDimensions_(Rt.width,Rt.height,Lt[0],Lt[1],Rt.width,Rt.height,B,z,0,0,Lt[3],Ce,!1,p.oB,!1,st);if(E&&E.collides(Wt.declutterBox))break t;Pt.push([t,n,Rt,Wt,1,null,null])}E&&E.load(Pt.map(he));for(let Wt=0,Qe=Pt.length;Wt<Qe;++Wt)this.replayImageOrLabel_.apply(this,Pt[Wt])}}++R;break;case T.END_GEOMETRY:if(void 0!==x){st=U[1];const Dt=x(st,wt);if(Dt)return Dt}++R;break;case T.FILL:dt?ft++:this.fill_(t),++R;break;case T.MOVE_TO_LINE_TO:for(O=U[1],W=U[2],St=C[O],It=C[O+1],V=St+.5|0,J=It+.5|0,(V!==P||J!==G)&&(t.moveTo(St,It),P=V,G=J),O+=2;O<W;O+=2)St=C[O],It=C[O+1],V=St+.5|0,J=It+.5|0,(O==W-2||V!==P||J!==G)&&(t.lineTo(St,It),P=V,G=J);++R;break;case T.SET_FILL_STYLE:yt=U,this.alignFill_=U[2],ft&&(this.fill_(t),ft=0,gt&&(t.stroke(),gt=0)),t.fillStyle=U[1],++R;break;case T.SET_STROKE_STYLE:mt=U,gt&&(t.stroke(),gt=0),this.setStrokeStyle_(t,U),++R;break;case T.STROKE:dt?gt++:t.stroke(),++R;break;default:++R}}ft&&this.fill_(t),gt&&t.stroke()}execute(t,n,e,l,c,x){this.viewRotation_=l,this.execute_(t,n,e,this.instructions,c,void 0,void 0,x)}executeHitDetection(t,n,e,l,c){return this.viewRotation_=e,this.execute_(t,1,n,this.hitDetectionInstructions,!0,l,c)}};var Zt=I(1992),Me=I(9466);const te=["Polygon","Circle","LineString","Image","Text","Default"],ee={},de=class ke{constructor(t,n,e,l,c,x){this.maxExtent_=t,this.overlaps_=l,this.pixelRatio_=e,this.resolution_=n,this.renderBuffer_=x,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Q.Ue)(),this.createExecutors_(c)}clip(t,n){const e=this.getClipCoords(n);t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[2],e[3]),t.lineTo(e[4],e[5]),t.lineTo(e[6],e[7]),t.clip()}createExecutors_(t){for(const n in t){let e=this.executorsByZIndex_[n];void 0===e&&(e={},this.executorsByZIndex_[n]=e);const l=t[n];for(const c in l)e[c]=new Le(this.resolution_,this.pixelRatio_,this.overlaps_,l[c])}}hasExecutors(t){for(const n in this.executorsByZIndex_){const e=this.executorsByZIndex_[n];for(let l=0,c=t.length;l<c;++l)if(t[l]in e)return!0}return!1}forEachFeatureAtCoordinate(t,n,e,l,c,x){const y=2*(l=Math.round(l))+1,E=(0,Q.qC)(this.hitDetectionTransform_,l+.5,l+.5,1/n,-1/n,-e,-t[0],-t[1]),C=!this.hitDetectionContext_;C&&(this.hitDetectionContext_=(0,Zt.E4)(y,y));const R=this.hitDetectionContext_;let M;R.canvas.width!==y||R.canvas.height!==y?(R.canvas.width=y,R.canvas.height=y):C||R.clearRect(0,0,y,y),void 0!==this.renderBuffer_&&(M=(0,u.lJ)(),(0,u.Wj)(M,t),(0,u.f3)(M,n*(this.renderBuffer_+l),M));const O=function we(et){if(void 0!==ee[et])return ee[et];const t=2*et+1,n=et*et,e=new Array(n+1);for(let c=0;c<=et;++c)for(let x=0;x<=et;++x){const y=c*c+x*x;if(y>n)break;let E=e[y];E||(E=[],e[y]=E),E.push(4*((et+c)*t+(et+x))+3),c>0&&E.push(4*((et-c)*t+(et+x))+3),x>0&&(E.push(4*((et+c)*t+(et-x))+3),c>0&&E.push(4*((et-c)*t+(et-x))+3))}const l=[];for(let c=0,x=e.length;c<x;++c)e[c]&&l.push(...e[c]);return ee[et]=l,l}(l);let W;function B(tt,ht){const ut=R.getImageData(0,0,y,y).data;for(let lt=0,ft=O.length;lt<ft;lt++)if(ut[O[lt]]>0){if(!x||"Image"!==W&&"Text"!==W||x.includes(tt)){const gt=(O[lt]-3)/4,yt=l-gt%y,mt=l-(gt/y|0),ct=c(tt,ht,yt*yt+mt*mt);if(ct)return ct}R.clearRect(0,0,y,y);break}}const z=Object.keys(this.executorsByZIndex_).map(Number);let P,G,V,J,it;for(z.sort(i.kK),P=z.length-1;P>=0;--P){const tt=z[P].toString();for(V=this.executorsByZIndex_[tt],G=te.length-1;G>=0;--G)if(W=te[G],J=V[W],void 0!==J&&(it=J.executeHitDetection(R,E,e,B,M),it))return it}}getClipCoords(t){const n=this.maxExtent_;if(!n)return null;const e=n[0],l=n[1],c=n[2],x=n[3],y=[e,l,e,x,c,x,c,l];return(0,$.vT)(y,0,8,2,t,y),y}isEmpty(){return(0,Me.x)(this.executorsByZIndex_)}execute(t,n,e,l,c,x,y){const E=Object.keys(this.executorsByZIndex_).map(Number);let C,R,M,O,W,B;for(E.sort(i.kK),this.maxExtent_&&(t.save(),this.clip(t,e)),x=x||te,y&&E.reverse(),C=0,R=E.length;C<R;++C){const z=E[C].toString();for(W=this.executorsByZIndex_[z],M=0,O=x.length;M<O;++M)B=W[x[M]],void 0!==B&&B.execute(t,n,e,l,c,y)}this.maxExtent_&&t.restore()}};var jt=I(8587),Ae=I(3620),Fe=I(9570);const kt=.5;var bt=I(8377),Xt=I(6003),Be=I(3481);const Xe=class be extends N.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,u.lJ)(),this.wrappedRenderedExtent_=(0,u.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,n,e){const l=n.extent,c=n.viewState,x=c.center,y=c.resolution,E=c.projection,C=c.rotation,R=E.getExtent(),M=this.getLayer().getSource(),O=n.pixelRatio,W=n.viewHints,B=!(W[jt.Z.ANIMATING]||W[jt.Z.INTERACTING]),z=this.compositionContext_,P=Math.round(n.size[0]*O),G=Math.round(n.size[1]*O),V=M.getWrapX()&&E.canWrapX(),J=V?(0,u.dz)(R):null,it=V?Math.ceil((l[2]-R[2])/J)+1:1;let tt=V?Math.floor((l[0]-R[0])/J):0;do{const ht=this.getRenderTransform(x,y,C,O,P,G,tt*J);t.execute(z,1,ht,C,B,void 0,e)}while(++tt<it)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,Zt.E4)(this.context.canvas.width,this.context.canvas.height,N.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,Zt.jy)(this.compositionContext_),N.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,n){const e=t.pixelRatio,l=t.layerStatesArray[t.layerIndex];(0,Q.n3)(this.pixelTransform,1/e,1/e),(0,Q.nb)(this.inversePixelTransform,this.pixelTransform);const c=(0,Q.BB)(this.pixelTransform);this.useContainer(n,c,this.getBackground(t));const x=this.context,y=x.canvas,E=this.replayGroup_,C=this.declutterExecutorGroup;if((!E||E.isEmpty())&&(!C||C.isEmpty()))return null;const R=Math.round(t.size[0]*e),M=Math.round(t.size[1]*e);y.width!=R||y.height!=M?(y.width=R,y.height=M,y.style.transform!==c&&(y.style.transform=c)):this.containerReused||x.clearRect(0,0,R,M),this.preRender(x,t);const O=t.viewState,W=O.projection;this.opacity_=l.opacity,this.setupCompositionContext_();let B=!1,z=!0;if(l.extent&&this.clipping){const P=(0,Xt.dY)(l.extent,W);z=(0,u.kK)(P,t.extent),B=z&&!(0,u.r4)(P,t.extent),B&&this.clipUnrotated(this.compositionContext_,t,P)}return z&&this.renderWorlds(E,t),B&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(x,t),this.renderedRotation_!==O.rotation&&(this.renderedRotation_=O.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const e=[this.context.canvas.width,this.context.canvas.height];(0,Q.nn)(this.pixelTransform,e);const l=this.renderedCenter_,c=this.renderedResolution_,x=this.renderedRotation_,y=this.renderedProjection_,E=this.wrappedRenderedExtent_,C=this.getLayer(),R=[],M=e[0]*kt,O=e[1]*kt;R.push(this.getRenderTransform(l,c,x,kt,M,O,0).slice());const W=C.getSource(),B=y.getExtent();if(W.getWrapX()&&y.canWrapX()&&!(0,u.r4)(B,E)){let z=E[0];const P=(0,u.dz)(B);let V,G=0;for(;z<B[0];)--G,V=P*G,R.push(this.getRenderTransform(l,c,x,kt,M,O,V).slice()),z+=P;for(G=0,z=E[2];z>B[2];)++G,V=P*G,R.push(this.getRenderTransform(l,c,x,kt,M,O,V).slice()),z-=P}this.hitDetectionImageData_=function Pe(et,t,n,e,l,c,x){const C=(0,Zt.E4)(et[0]*kt,et[1]*kt);C.imageSmoothingEnabled=!1;const R=C.canvas,M=new Ae.Z(C,kt,l,null,x),O=n.length,W=Math.floor(16777215/O),B={};for(let P=1;P<=O;++P){const G=n[P-1],V=G.getStyleFunction()||e;if(!e)continue;let J=V(G,c);if(!J)continue;Array.isArray(J)||(J=[J]);const tt="#"+("000000"+(P*W).toString(16)).slice(-6);for(let ht=0,ut=J.length;ht<ut;++ht){const lt=J[ht],ft=lt.getGeometryFunction()(G);if(!ft||!(0,u.kK)(l,ft.getExtent()))continue;const gt=lt.clone(),yt=gt.getFill();yt&&yt.setColor(tt);const mt=gt.getStroke();mt&&(mt.setColor(tt),mt.setLineDash(null)),gt.setText(void 0);const ct=lt.getImage();if(ct&&0!==ct.getOpacity()){const q=ct.getImageSize();if(!q)continue;const dt=(0,Zt.E4)(q[0],q[1],void 0,{alpha:!1}),st=dt.canvas;dt.fillStyle=tt,dt.fillRect(0,0,st.width,st.height),gt.setImage(new Fe.Z({img:st,imgSize:q,anchor:ct.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ct.getOrigin(),opacity:1,size:ct.getSize(),scale:ct.getScale(),rotation:ct.getRotation(),rotateWithView:ct.getRotateWithView()}))}const Tt=gt.getZIndex()||0;let _t=B[Tt];_t||(_t={},B[Tt]=_t,_t.Polygon=[],_t.Circle=[],_t.LineString=[],_t.Point=[]),_t[ft.getType().replace("Multi","")].push(ft,gt)}}const z=Object.keys(B).map(Number).sort(i.kK);for(let P=0,G=z.length;P<G;++P){const V=B[z[P]];for(const J in V){const it=V[J];for(let tt=0,ht=it.length;tt<ht;tt+=2){M.setStyle(it[tt+1]);for(let ut=0,lt=t.length;ut<lt;++ut)M.setTransform(t[ut]),M.drawGeometry(it[tt])}}}return C.getImageData(0,0,R.width,R.height)}(e,R,this.renderedFeatures_,C.getStyleFunction(),E,c,x)}n(function We(et,t,n){const e=[];if(n){const l=Math.floor(Math.round(et[0])*kt),c=Math.floor(Math.round(et[1])*kt),x=4*((0,nt.uZ)(l,0,n.width-1)+(0,nt.uZ)(c,0,n.height-1)*n.width),R=n.data[x+2]+256*(n.data[x+1]+256*n.data[x]),M=Math.floor(16777215/t.length);R&&R%M==0&&e.push(t[R/M-1])}return e}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,n,e,l,c){if(!this.replayGroup_)return;const x=n.viewState.resolution,y=n.viewState.rotation,E=this.getLayer(),C={},R=function(W,B,z){const P=(0,L.sq)(W),G=C[P];if(G){if(!0!==G&&z<G.distanceSq){if(0===z)return C[P]=!0,c.splice(c.lastIndexOf(G),1),l(W,E,B);G.geometry=B,G.distanceSq=z}}else{if(0===z)return C[P]=!0,l(W,E,B);c.push(C[P]={feature:W,layer:E,geometry:B,distanceSq:z,callback:l})}};let M;const O=[this.replayGroup_];return this.declutterExecutorGroup&&O.push(this.declutterExecutorGroup),O.some(W=>M=W.forEachFeatureAtCoordinate(t,x,y,e,R,W===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(B=>B.value):null)),M}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const n=this.getLayer(),e=n.getSource();if(!e)return!1;const l=t.viewHints[jt.Z.ANIMATING],c=t.viewHints[jt.Z.INTERACTING],x=n.getUpdateWhileAnimating(),y=n.getUpdateWhileInteracting();if(this.ready&&!x&&l||!y&&c)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const E=t.extent,C=t.viewState,R=C.projection,M=C.resolution,O=t.pixelRatio,W=n.getRevision(),B=n.getRenderBuffer();let z=n.getRenderOrder();void 0===z&&(z=bt.eR);const P=C.center.slice(),G=(0,u.f3)(E,B*M),V=G.slice(),J=[G.slice()],it=R.getExtent();if(e.getWrapX()&&R.canWrapX()&&!(0,u.r4)(it,t.extent)){const q=(0,u.dz)(it),dt=Math.max((0,u.dz)(G)/2,q);G[0]=it[0]-dt,G[2]=it[2]+dt,(0,Be.Cf)(P,R);const st=(0,u.Cf)(J[0],R);st[0]<it[0]&&st[2]<it[2]?J.push([st[0]+q,st[1],st[2]+q,st[3]]):st[0]>it[0]&&st[2]>it[2]&&J.push([st[0]-q,st[1],st[2]-q,st[3]])}if(this.ready&&this.renderedResolution_==M&&this.renderedRevision_==W&&this.renderedRenderOrder_==z&&(0,u.r4)(this.wrappedRenderedExtent_,G))return(0,i.fS)(this.renderedExtent_,V)||(this.hitDetectionImageData_=null,this.renderedExtent_=V),this.renderedCenter_=P,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const tt=new F((0,bt.Qz)(M,O),G,M,O);let ht;this.getLayer().getDeclutter()&&(ht=new F((0,bt.Qz)(M,O),G,M,O));const ut=(0,Xt.Cs)();let lt;if(ut){for(let q=0,dt=J.length;q<dt;++q){const St=(0,Xt.Fj)(J[q],R);e.loadFeatures(St,(0,Xt.on)(M,R),ut)}lt=(0,Xt.WO)(ut,R)}else for(let q=0,dt=J.length;q<dt;++q)e.loadFeatures(J[q],M,R);const ft=(0,bt.se)(M,O);let gt=!0;const yt=function(q){let dt;const st=q.getStyleFunction()||n.getStyleFunction();if(st&&(dt=st(q,M)),dt){const St=this.renderFeature(q,ft,dt,tt,lt,ht);gt=gt&&!St}}.bind(this),mt=(0,Xt.Fj)(G,R),ct=e.getFeaturesInExtent(mt);z&&ct.sort(z);for(let q=0,dt=ct.length;q<dt;++q)yt(ct[q]);this.renderedFeatures_=ct,this.ready=gt;const Tt=tt.finish(),_t=new de(G,M,O,e.getOverlaps(),Tt,n.getRenderBuffer());return ht&&(this.declutterExecutorGroup=new de(G,M,O,e.getOverlaps(),ht.finish(),n.getRenderBuffer())),this.renderedResolution_=M,this.renderedRevision_=W,this.renderedRenderOrder_=z,this.renderedExtent_=V,this.wrappedRenderedExtent_=G,this.renderedCenter_=P,this.renderedProjection_=R,this.replayGroup_=_t,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,n,e,l,c,x){if(!e)return!1;let y=!1;if(Array.isArray(e))for(let E=0,C=e.length;E<C;++E)y=(0,bt.Pn)(l,t,e[E],n,this.boundHandleStyleImageChange_,c,x)||y;else y=(0,bt.Pn)(l,t,e,n,this.boundHandleStyleImageChange_,c,x);return y}}},8377:(pt,rt,I)=>{"use strict";I.d(rt,{Pn:()=>b,Qz:()=>ot,eR:()=>Y,se:()=>T});var j=I(521),Z=I(119);const D={Point:function d(_,f,s,o,L){const k=s.getImage(),A=s.getText();let w;if(k){if(k.getImageState()!=j.Z.LOADED)return;let X=_;if(L){const v=k.getDeclutterMode();if("none"!==v)if(X=L,"obstacle"===v){const F=_.getBuilder(s.getZIndex(),"Image");F.setImageStyle(k,w),F.drawPoint(f,o)}else A&&A.getText()&&(w={})}const m=X.getBuilder(s.getZIndex(),"Image");m.setImageStyle(k,w),m.drawPoint(f,o)}if(A&&A.getText()){let X=_;L&&(X=L);const m=X.getBuilder(s.getZIndex(),"Text");m.setTextStyle(A,w),m.drawText(f,o)}},LineString:function a(_,f,s,o,L){const k=s.getStroke();if(k){const w=_.getBuilder(s.getZIndex(),"LineString");w.setFillStrokeStyle(null,k),w.drawLineString(f,o)}const A=s.getText();if(A&&A.getText()){const w=(L||_).getBuilder(s.getZIndex(),"Text");w.setTextStyle(A),w.drawText(f,o)}},Polygon:function h(_,f,s,o,L){const k=s.getFill(),A=s.getStroke();if(k||A){const X=_.getBuilder(s.getZIndex(),"Polygon");X.setFillStrokeStyle(k,A),X.drawPolygon(f,o)}const w=s.getText();if(w&&w.getText()){const X=(L||_).getBuilder(s.getZIndex(),"Text");X.setTextStyle(w),X.drawText(f,o)}},MultiPoint:function g(_,f,s,o,L){const k=s.getImage(),A=s.getText();let w;if(k){if(k.getImageState()!=j.Z.LOADED)return;let X=_;if(L){const v=k.getDeclutterMode();if("none"!==v)if(X=L,"obstacle"===v){const F=_.getBuilder(s.getZIndex(),"Image");F.setImageStyle(k,w),F.drawMultiPoint(f,o)}else A&&A.getText()&&(w={})}const m=X.getBuilder(s.getZIndex(),"Image");m.setImageStyle(k,w),m.drawMultiPoint(f,o)}if(A&&A.getText()){let X=_;L&&(X=L);const m=X.getBuilder(s.getZIndex(),"Text");m.setTextStyle(A,w),m.drawText(f,o)}},MultiLineString:function S(_,f,s,o,L){const k=s.getStroke();if(k){const w=_.getBuilder(s.getZIndex(),"LineString");w.setFillStrokeStyle(null,k),w.drawMultiLineString(f,o)}const A=s.getText();if(A&&A.getText()){const w=(L||_).getBuilder(s.getZIndex(),"Text");w.setTextStyle(A),w.drawText(f,o)}},MultiPolygon:function r(_,f,s,o,L){const k=s.getFill(),A=s.getStroke();if(A||k){const X=_.getBuilder(s.getZIndex(),"Polygon");X.setFillStrokeStyle(k,A),X.drawMultiPolygon(f,o)}const w=s.getText();if(w&&w.getText()){const X=(L||_).getBuilder(s.getZIndex(),"Text");X.setTextStyle(w),X.drawText(f,o)}},GeometryCollection:function i(_,f,s,o,L){const k=f.getGeometriesArray();let A,w;for(A=0,w=k.length;A<w;++A)(0,D[k[A].getType()])(_,k[A],s,o,L)},Circle:function K(_,f,s,o,L){const k=s.getFill(),A=s.getStroke();if(k||A){const X=_.getBuilder(s.getZIndex(),"Circle");X.setFillStrokeStyle(k,A),X.drawCircle(f,o)}const w=s.getText();if(w&&w.getText()){const X=(L||_).getBuilder(s.getZIndex(),"Text");X.setTextStyle(w),X.drawText(f,o)}}};function Y(_,f){return parseInt((0,Z.sq)(_),10)-parseInt((0,Z.sq)(f),10)}function T(_,f){const s=ot(_,f);return s*s}function ot(_,f){return.5*_/f}function b(_,f,s,o,L,k,A){let w=!1;const X=s.getImage();if(X){const m=X.getImageState();m==j.Z.LOADED||m==j.Z.ERROR?X.unlistenImageChange(L):(m==j.Z.IDLE&&X.load(),X.listenImageChange(L),w=!0)}return function u(_,f,s,o,L,k){const A=s.getGeometryFunction()(f);if(!A)return;const w=A.simplifyTransformed(o,L);s.getRenderer()?p(_,w,s,f):(0,D[w.getType()])(_,w,s,f,k)}(_,f,s,o,k,A),w}function p(_,f,s,o){if("GeometryCollection"!=f.getType())_.getBuilder(s.getZIndex(),"Default").drawCustom(f,o,s.getRenderer(),s.getHitDetectionRenderer());else{const k=f.getGeometries();for(let A=0,w=k.length;A<w;++A)p(_,k[A],s,o)}}},5947:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>w});var j=I(2815),Z=I(9889),H=I(8214),D=I(9972),Y=I(4587),T=I(2909),ot=I(4702),K=I(4412),b=I(1345);function p(X,m){return[[-1/0,-1/0,1/0,1/0]]}I(6003);var S=I(1911),r=I(760),d=I(2456),g=I(119),h=I(9466),_=I(1729);function o(X,m){return function(v,F,N,Q,nt){const $=this;!function s(X,m,v,F,N,Q,nt){const $=new XMLHttpRequest;$.open("GET","function"==typeof X?X(v,F,N):X,!0),"arraybuffer"==m.getType()&&($.responseType="arraybuffer"),$.withCredentials=false,$.onload=function(at){if(!$.status||$.status>=200&&$.status<300){const Et=m.getType();let xt;"json"==Et||"text"==Et?xt=$.responseText:"xml"==Et?(xt=$.responseXML,xt||(xt=(new DOMParser).parseFromString($.responseText,"application/xml"))):"arraybuffer"==Et&&(xt=$.response),xt?Q(m.readFeatures(xt,{extent:v,featureProjection:N}),m.readProjection(xt)):nt()}else nt()},$.onerror=nt,$.send()}(X,m,v,F,N,function(at,Et){$.addFeatures(at),void 0!==Q&&Q(at)},nt||b.Zn)}}class k extends H.ZP{constructor(m,v,F){super(m),this.feature=v,this.features=F}}const w=class A extends ot.Z{constructor(m){super({attributions:(m=m||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===m.wrapX||m.wrapX}),this.loader_=b.Zn,this.format_=m.format,this.overlaps_=void 0===m.overlaps||m.overlaps,this.url_=m.url,void 0!==m.loader?this.loader_=m.loader:void 0!==this.url_&&((0,S.h)(this.format_,7),this.loader_=o(this.url_,this.format_)),this.strategy_=void 0!==m.strategy?m.strategy:p;const v=void 0===m.useSpatialIndex||m.useSpatialIndex;let F,N;this.featuresRtree_=v?new T.Z:null,this.loadedExtentsRtree_=new T.Z,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(m.features)?N=m.features:m.features&&(F=m.features,N=F.getArray()),!v&&void 0===F&&(F=new j.Z(N)),void 0!==N&&this.addFeaturesInternal(N),void 0!==F&&this.bindFeaturesCollection_(F)}addFeature(m){this.addFeatureInternal(m),this.changed()}addFeatureInternal(m){const v=(0,g.sq)(m);if(!this.addToIndex_(v,m))return void(this.featuresCollection_&&this.featuresCollection_.remove(m));this.setupChangeEvents_(v,m);const F=m.getGeometry();if(F){const N=F.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(N,m)}else this.nullGeometryFeatures_[v]=m;this.dispatchEvent(new k(K.Z.ADDFEATURE,m))}setupChangeEvents_(m,v){this.featureChangeKeys_[m]=[(0,_.oL)(v,D.Z.CHANGE,this.handleFeatureChange_,this),(0,_.oL)(v,Y.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(m,v){let F=!0;const N=v.getId();return void 0!==N&&(N.toString()in this.idIndex_?F=!1:this.idIndex_[N.toString()]=v),F&&((0,S.h)(!(m in this.uidIndex_),30),this.uidIndex_[m]=v),F}addFeatures(m){this.addFeaturesInternal(m),this.changed()}addFeaturesInternal(m){const v=[],F=[],N=[];for(let Q=0,nt=m.length;Q<nt;Q++){const $=m[Q],at=(0,g.sq)($);this.addToIndex_(at,$)&&F.push($)}for(let Q=0,nt=F.length;Q<nt;Q++){const $=F[Q],at=(0,g.sq)($);this.setupChangeEvents_(at,$);const Et=$.getGeometry();if(Et){const xt=Et.getExtent();v.push(xt),N.push($)}else this.nullGeometryFeatures_[at]=$}if(this.featuresRtree_&&this.featuresRtree_.load(v,N),this.hasListener(K.Z.ADDFEATURE))for(let Q=0,nt=F.length;Q<nt;Q++)this.dispatchEvent(new k(K.Z.ADDFEATURE,F[Q]))}bindFeaturesCollection_(m){let v=!1;this.addEventListener(K.Z.ADDFEATURE,function(F){v||(v=!0,m.push(F.feature),v=!1)}),this.addEventListener(K.Z.REMOVEFEATURE,function(F){v||(v=!0,m.remove(F.feature),v=!1)}),m.addEventListener(Z.Z.ADD,function(F){v||(v=!0,this.addFeature(F.element),v=!1)}.bind(this)),m.addEventListener(Z.Z.REMOVE,function(F){v||(v=!0,this.removeFeature(F.element),v=!1)}.bind(this)),this.featuresCollection_=m}clear(m){if(m){for(const F in this.featureChangeKeys_)this.featureChangeKeys_[F].forEach(_.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const F=function(N){this.removeFeatureInternal(N)}.bind(this);this.featuresRtree_.forEach(F);for(const N in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[N])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const v=new k(K.Z.CLEAR);this.dispatchEvent(v),this.changed()}forEachFeature(m){if(this.featuresRtree_)return this.featuresRtree_.forEach(m);this.featuresCollection_&&this.featuresCollection_.forEach(m)}forEachFeatureAtCoordinateDirect(m,v){return this.forEachFeatureInExtent([m[0],m[1],m[0],m[1]],function(N){if(N.getGeometry().intersectsCoordinate(m))return v(N)})}forEachFeatureInExtent(m,v){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(m,v);this.featuresCollection_&&this.featuresCollection_.forEach(v)}forEachFeatureIntersectingExtent(m,v){return this.forEachFeatureInExtent(m,function(F){if(F.getGeometry().intersectsExtent(m)){const Q=v(F);if(Q)return Q}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let m;return this.featuresCollection_?m=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(m=this.featuresRtree_.getAll(),(0,h.x)(this.nullGeometryFeatures_)||(0,d.l7)(m,Object.values(this.nullGeometryFeatures_))),m}getFeaturesAtCoordinate(m){const v=[];return this.forEachFeatureAtCoordinateDirect(m,function(F){v.push(F)}),v}getFeaturesInExtent(m,v){if(this.featuresRtree_){if(!(v&&v.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(m);const N=(0,r.MV)(m,v);return[].concat(...N.map(Q=>this.featuresRtree_.getInExtent(Q)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(m,v){const F=m[0],N=m[1];let Q=null;const nt=[NaN,NaN];let $=1/0;const at=[-1/0,-1/0,1/0,1/0];return v=v||b.uX,this.featuresRtree_.forEachInExtent(at,function(Et){if(v(Et)){const xt=Et.getGeometry(),Mt=$;if($=xt.closestPointXY(F,N,nt,$),$<Mt){Q=Et;const Ct=Math.sqrt($);at[0]=F-Ct,at[1]=N-Ct,at[2]=F+Ct,at[3]=N+Ct}}}),Q}getExtent(m){return this.featuresRtree_.getExtent(m)}getFeatureById(m){const v=this.idIndex_[m.toString()];return void 0!==v?v:null}getFeatureByUid(m){const v=this.uidIndex_[m];return void 0!==v?v:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(m){const v=m.target,F=(0,g.sq)(v),N=v.getGeometry();if(N){const nt=N.getExtent();F in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[F],this.featuresRtree_&&this.featuresRtree_.insert(nt,v)):this.featuresRtree_&&this.featuresRtree_.update(nt,v)}else F in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(v),this.nullGeometryFeatures_[F]=v);const Q=v.getId();if(void 0!==Q){const nt=Q.toString();this.idIndex_[nt]!==v&&(this.removeFromIdIndex_(v),this.idIndex_[nt]=v)}else this.removeFromIdIndex_(v),this.uidIndex_[F]=v;this.changed(),this.dispatchEvent(new k(K.Z.CHANGEFEATURE,v))}hasFeature(m){const v=m.getId();return void 0!==v?v in this.idIndex_:(0,g.sq)(m)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,h.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(m,v,F){const N=this.loadedExtentsRtree_,Q=this.strategy_(m,v,F);for(let nt=0,$=Q.length;nt<$;++nt){const at=Q[nt];N.forEachInExtent(at,function(xt){return(0,r.r4)(xt.extent,at)})||(++this.loadingExtentsCount_,this.dispatchEvent(new k(K.Z.FEATURESLOADSTART)),this.loader_.call(this,at,v,F,function(xt){--this.loadingExtentsCount_,this.dispatchEvent(new k(K.Z.FEATURESLOADEND,void 0,xt))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new k(K.Z.FEATURESLOADERROR))}.bind(this)),N.insert(at,{extent:at.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(m){const v=this.loadedExtentsRtree_;let F;v.forEachInExtent(m,function(N){if((0,r.fS)(N.extent,m))return F=N,!0}),F&&v.remove(F)}removeFeature(m){if(!m)return;const v=(0,g.sq)(m);v in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[v]:this.featuresRtree_&&this.featuresRtree_.remove(m),this.removeFeatureInternal(m)&&this.changed()}removeFeatureInternal(m){const v=(0,g.sq)(m),F=this.featureChangeKeys_[v];if(!F)return;F.forEach(_.bN),delete this.featureChangeKeys_[v];const N=m.getId();return void 0!==N&&delete this.idIndex_[N.toString()],delete this.uidIndex_[v],this.dispatchEvent(new k(K.Z.REMOVEFEATURE,m)),m}removeFromIdIndex_(m){let v=!1;for(const F in this.idIndex_)if(this.idIndex_[F]===m){delete this.idIndex_[F],v=!0;break}return v}setLoader(m){this.loader_=m}setUrl(m){(0,S.h)(this.format_,7),this.url_=m,this.setLoader(o(m,this.format_))}}},4412:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>j});const j={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2909:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>T});var j=I(2402),Z=I(760),H=I(119),D=I(9466);const T=class Y{constructor(K){this.rbush_=new j(K),this.items_={}}insert(K,b){const u={minX:K[0],minY:K[1],maxX:K[2],maxY:K[3],value:b};this.rbush_.insert(u),this.items_[(0,H.sq)(b)]=u}load(K,b){const u=new Array(b.length);for(let p=0,i=b.length;p<i;p++){const a=K[p],S=b[p],r={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:S};u[p]=r,this.items_[(0,H.sq)(S)]=r}this.rbush_.load(u)}remove(K){const b=(0,H.sq)(K),u=this.items_[b];return delete this.items_[b],null!==this.rbush_.remove(u)}update(K,b){const u=this.items_[(0,H.sq)(b)];(0,Z.fS)([u.minX,u.minY,u.maxX,u.maxY],K)||(this.remove(b),this.insert(K,b))}getAll(){return this.rbush_.all().map(function(b){return b.value})}getInExtent(K){return this.rbush_.search({minX:K[0],minY:K[1],maxX:K[2],maxY:K[3]}).map(function(p){return p.value})}forEach(K){return this.forEach_(this.getAll(),K)}forEachInExtent(K,b){return this.forEach_(this.getInExtent(K),b)}forEach_(K,b){let u;for(let p=0,i=K.length;p<i;p++)if(u=b(K[p]),u)return u;return u}isEmpty(){return(0,D.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(K){const b=this.rbush_.toJSON();return(0,Z.T9)(b.minX,b.minY,b.maxX,b.maxY,K)}concat(K){this.rbush_.load(K.rbush_.all());for(const b in K.items_)this.items_[b]=K.items_[b]}}},7392:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>H});var j=I(8225);class Z extends j.Z{constructor(Y){super({points:1/0,fill:(Y=Y||{radius:5}).fill,radius:Y.radius,stroke:Y.stroke,scale:void 0!==Y.scale?Y.scale:1,rotation:void 0!==Y.rotation?Y.rotation:0,rotateWithView:void 0!==Y.rotateWithView&&Y.rotateWithView,displacement:void 0!==Y.displacement?Y.displacement:[0,0],declutterMode:Y.declutterMode})}clone(){const Y=this.getScale(),T=new Z({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(Y)?Y.slice():Y,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return T.setOpacity(this.getOpacity()),T}setRadius(Y){this.radius_=Y,this.render()}}const H=Z},5044:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>Z});class j{constructor(D){this.color_=void 0!==(D=D||{}).color?D.color:null}clone(){const D=this.getColor();return new j({color:Array.isArray(D)?D.slice():D||void 0})}getColor(){return this.color_}setColor(D){this.color_=D}}const Z=j},9570:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>d});var j=I(9972),Z=I(521),H=I(6398),D=I(3783),Y=I(1911),T=I(8007),ot=I(1992),K=I(2956),b=I(3641);let u=null;class p extends T.Z{constructor(h,_,f,s,o,L){super(),this.hitDetectionImage_=null,this.image_=h,this.crossOrigin_=s,this.canvas_={},this.color_=L,this.unlisten_=null,this.imageState_=o,this.size_=f,this.src_=_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Z.Z.LOADED){u||(u=(0,ot.E4)(1,1)),u.drawImage(this.image_,0,0);try{u.getImageData(0,0,1,1),this.tainted_=!1}catch{u=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(j.Z.CHANGE)}handleImageError_(){this.imageState_=Z.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Z.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(h){return this.image_||this.initializeImage_(),this.replaceColor_(h),this.canvas_[h]?this.canvas_[h]:this.image_}getPixelRatio(h){return this.replaceColor_(h),this.canvas_[h]?h:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const h=this.size_[0],_=this.size_[1],f=(0,ot.E4)(h,_);f.fillRect(0,0,h,_),this.hitDetectionImage_=f.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Z.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=Z.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,b.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(h){if(!this.color_||this.canvas_[h]||this.imageState_!==Z.Z.LOADED)return;const _=this.image_,f=document.createElement("canvas");f.width=Math.ceil(_.width*h),f.height=Math.ceil(_.height*h);const s=f.getContext("2d");s.scale(h,h),s.drawImage(_,0,0),s.globalCompositeOperation="multiply",s.fillStyle=(0,D.XC)(this.color_),s.fillRect(0,0,f.width/h,f.height/h),s.globalCompositeOperation="destination-in",s.drawImage(_,0,0),this.canvas_[h]=f}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var S=I(119);class r extends H.Z{constructor(h){super({opacity:void 0!==(h=h||{}).opacity?h.opacity:1,rotation:void 0!==h.rotation?h.rotation:0,scale:void 0!==h.scale?h.scale:1,displacement:void 0!==h.displacement?h.displacement:[0,0],rotateWithView:void 0!==h.rotateWithView&&h.rotateWithView,declutterMode:h.declutterMode}),this.anchor_=void 0!==h.anchor?h.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==h.anchorOrigin?h.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==h.anchorXUnits?h.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==h.anchorYUnits?h.anchorYUnits:"fraction",this.crossOrigin_=void 0!==h.crossOrigin?h.crossOrigin:null;const L=void 0!==h.img?h.img:null;this.imgSize_=h.imgSize;let k=h.src;(0,Y.h)(!(void 0!==k&&L),4),(0,Y.h)(!L||L&&this.imgSize_,5),(void 0===k||0===k.length)&&L&&(k=L.src||(0,S.sq)(L)),(0,Y.h)(void 0!==k&&k.length>0,6);const A=void 0!==h.src?Z.Z.IDLE:Z.Z.LOADED;this.color_=void 0!==h.color?(0,D._2)(h.color):null,this.iconImage_=function i(g,h,_,f,s,o){let L=K.c.get(h,f,o);return L||(L=new p(g,h,_,f,s,o),K.c.set(h,f,o,L)),L}(L,k,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,A,this.color_),this.offset_=void 0!==h.offset?h.offset:[0,0],this.offsetOrigin_=void 0!==h.offsetOrigin?h.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==h.size?h.size:null}clone(){const h=this.getScale();return new r({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(h)?h.slice():h,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let h=this.normalizedAnchor_;if(!h){h=this.anchor_;const s=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!s)return null;h=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(h[0]*=s[0]),"fraction"==this.anchorYUnits_&&(h[1]*=s[1])}if("top-left"!=this.anchorOrigin_){if(!s)return null;h===this.anchor_&&(h=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(h[0]=-h[0]+s[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(h[1]=-h[1]+s[1])}this.normalizedAnchor_=h}const _=this.getDisplacement(),f=this.getScaleArray();return[h[0]-_[0]/f[0],h[1]+_[1]/f[1]]}setAnchor(h){this.anchor_=h,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(h){return this.iconImage_.getImage(h)}getPixelRatio(h){return this.iconImage_.getPixelRatio(h)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let h=this.offset_;if("top-left"!=this.offsetOrigin_){const _=this.getSize(),f=this.iconImage_.getSize();if(!_||!f)return null;h=h.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(h[0]=f[0]-_[0]-h[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(h[1]=f[1]-_[1]-h[1])}return this.origin_=h,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(h){this.iconImage_.addEventListener(j.Z.CHANGE,h)}load(){this.iconImage_.load()}unlistenImageChange(h){this.iconImage_.removeEventListener(j.Z.CHANGE,h)}}const d=r},6398:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>D});var j=I(119),Z=I(1750);class H{constructor(T){this.opacity_=T.opacity,this.rotateWithView_=T.rotateWithView,this.rotation_=T.rotation,this.scale_=T.scale,this.scaleArray_=(0,Z.Pq)(T.scale),this.displacement_=T.displacement,this.declutterMode_=T.declutterMode}clone(){const T=this.getScale();return new H({opacity:this.getOpacity(),scale:Array.isArray(T)?T.slice():T,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,j.O3)()}getImage(T){return(0,j.O3)()}getHitDetectionImage(){return(0,j.O3)()}getPixelRatio(T){return 1}getImageState(){return(0,j.O3)()}getImageSize(){return(0,j.O3)()}getOrigin(){return(0,j.O3)()}getSize(){return(0,j.O3)()}setDisplacement(T){this.displacement_=T}setOpacity(T){this.opacity_=T}setRotateWithView(T){this.rotateWithView_=T}setRotation(T){this.rotation_=T}setScale(T){this.scale_=T,this.scaleArray_=(0,Z.Pq)(T)}listenImageChange(T){(0,j.O3)()}load(){(0,j.O3)()}unlistenImageChange(T){(0,j.O3)()}}const D=H},8225:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>K});var j=I(521),Z=I(6398),H=I(3783),D=I(5813),Y=I(1992),T=I(4686);class ot extends Z.Z{constructor(u){super({opacity:1,rotateWithView:void 0!==u.rotateWithView&&u.rotateWithView,rotation:void 0!==u.rotation?u.rotation:0,scale:void 0!==u.scale?u.scale:1,displacement:void 0!==u.displacement?u.displacement:[0,0],declutterMode:u.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==u.fill?u.fill:null,this.origin_=[0,0],this.points_=u.points,this.radius_=void 0!==u.radius?u.radius:u.radius1,this.radius2_=u.radius2,this.angle_=void 0!==u.angle?u.angle:0,this.stroke_=void 0!==u.stroke?u.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const u=this.getScale(),p=new ot({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(u)?u.slice():u,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return p.setOpacity(this.getOpacity()),p}getAnchor(){const u=this.size_;if(!u)return null;const p=this.getDisplacement(),i=this.getScaleArray();return[u[0]/2-p[0]/i[0],u[1]/2+p[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(u){this.fill_=u,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(u){let p=this.canvas_[u];if(!p){const i=this.renderOptions_,a=(0,Y.E4)(i.size*u,i.size*u);this.draw_(i,a,u),p=a.canvas,this.canvas_[u]=p}return p}getPixelRatio(u){return u}getImageSize(){return this.size_}getImageState(){return j.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(u){this.stroke_=u,this.render()}listenImageChange(u){}load(){}unlistenImageChange(u){}calculateLineJoinSize_(u,p,i){if(0===p||this.points_===1/0||"bevel"!==u&&"miter"!==u)return p;let a=this.radius_,S=void 0===this.radius2_?a:this.radius2_;if(a<S){const N=a;a=S,S=N}const d=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),g=S*Math.sin(d),_=a-Math.sqrt(S*S-g*g),f=Math.sqrt(g*g+_*_),s=f/g;if("miter"===u&&s<=i)return s*p;const o=p/2/s,L=p/2*(_/f),A=Math.sqrt((a+o)*(a+o)+L*L)-a;if(void 0===this.radius2_||"bevel"===u)return 2*A;const w=a*Math.sin(d),m=S-Math.sqrt(a*a-w*w),F=Math.sqrt(w*w+m*m)/w;return F<=i?2*Math.max(A,F*p/2-S-a):2*A}createRenderOptions(){let S,u=T.rc,p=0,i=null,a=0,r=0;this.stroke_&&(S=this.stroke_.getColor(),null===S&&(S=T.Tx),S=(0,D.y)(S),r=this.stroke_.getWidth(),void 0===r&&(r=T.yC),i=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),u=this.stroke_.getLineJoin(),void 0===u&&(u=T.rc),p=this.stroke_.getMiterLimit(),void 0===p&&(p=T.V4));const d=this.calculateLineJoinSize_(u,r,p),g=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:S,strokeWidth:r,size:Math.ceil(2*g+d),lineDash:i,lineDashOffset:a,lineJoin:u,miterLimit:p}}render(){this.renderOptions_=this.createRenderOptions();const u=this.renderOptions_.size;this.canvas_={},this.size_=[u,u]}draw_(u,p,i){if(p.scale(i,i),p.translate(u.size/2,u.size/2),this.createPath_(p),this.fill_){let a=this.fill_.getColor();null===a&&(a=T.bL),p.fillStyle=(0,D.y)(a),p.fill()}this.stroke_&&(p.strokeStyle=u.strokeStyle,p.lineWidth=u.strokeWidth,u.lineDash&&(p.setLineDash(u.lineDash),p.lineDashOffset=u.lineDashOffset),p.lineJoin=u.lineJoin,p.miterLimit=u.miterLimit,p.stroke())}createHitDetectionCanvas_(u){if(this.fill_){let p=this.fill_.getColor(),i=0;if("string"==typeof p&&(p=(0,H._2)(p)),null===p?i=1:Array.isArray(p)&&(i=4===p.length?p[3]:1),0===i){const a=(0,Y.E4)(u.size,u.size);this.hitDetectionCanvas_=a.canvas,this.drawHitDetectionCanvas_(u,a)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(u){let p=this.points_;const i=this.radius_;if(p===1/0)u.arc(0,0,i,0,2*Math.PI);else{const a=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(p*=2);const S=this.angle_-Math.PI/2,r=2*Math.PI/p;for(let d=0;d<p;d++){const g=S+d*r,h=d%2==0?i:a;u.lineTo(h*Math.cos(g),h*Math.sin(g))}u.closePath()}}drawHitDetectionCanvas_(u,p){p.translate(u.size/2,u.size/2),this.createPath_(p),p.fillStyle=T.bL,p.fill(),this.stroke_&&(p.strokeStyle=u.strokeStyle,p.lineWidth=u.strokeWidth,u.lineDash&&(p.setLineDash(u.lineDash),p.lineDashOffset=u.lineDashOffset),p.lineJoin=u.lineJoin,p.miterLimit=u.miterLimit,p.stroke())}}const K=ot},6785:(pt,rt,I)=>{"use strict";I.d(rt,{Z:()=>Z});class j{constructor(D){this.color_=void 0!==(D=D||{}).color?D.color:null,this.lineCap_=D.lineCap,this.lineDash_=void 0!==D.lineDash?D.lineDash:null,this.lineDashOffset_=D.lineDashOffset,this.lineJoin_=D.lineJoin,this.miterLimit_=D.miterLimit,this.width_=D.width}clone(){const D=this.getColor();return new j({color:Array.isArray(D)?D.slice():D||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(D){this.color_=D}setLineCap(D){this.lineCap_=D}setLineDash(D){this.lineDash_=D}setLineDashOffset(D){this.lineDashOffset_=D}setLineJoin(D){this.lineJoin_=D}setMiterLimit(D){this.miterLimit_=D}setWidth(D){this.width_=D}}const Z=j},109:(pt,rt,I)=>{"use strict";I.d(rt,{J$:()=>T,Ly:()=>b,ZP:()=>p,yF:()=>K});var j=I(7392),Z=I(5044),H=I(6785),D=I(1911);class Y{constructor(a){a=a||{},this.geometry_=null,this.geometryFunction_=u,void 0!==a.geometry&&this.setGeometry(a.geometry),this.fill_=void 0!==a.fill?a.fill:null,this.image_=void 0!==a.image?a.image:null,this.renderer_=void 0!==a.renderer?a.renderer:null,this.hitDetectionRenderer_=void 0!==a.hitDetectionRenderer?a.hitDetectionRenderer:null,this.stroke_=void 0!==a.stroke?a.stroke:null,this.text_=void 0!==a.text?a.text:null,this.zIndex_=a.zIndex}clone(){let a=this.getGeometry();return a&&"object"==typeof a&&(a=a.clone()),new Y({geometry:a,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(a){this.renderer_=a}setHitDetectionRenderer(a){this.hitDetectionRenderer_=a}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(a){this.fill_=a}getImage(){return this.image_}setImage(a){this.image_=a}getStroke(){return this.stroke_}setStroke(a){this.stroke_=a}getText(){return this.text_}setText(a){this.text_=a}getZIndex(){return this.zIndex_}setGeometry(a){"function"==typeof a?this.geometryFunction_=a:"string"==typeof a?this.geometryFunction_=function(S){return S.get(a)}:a?void 0!==a&&(this.geometryFunction_=function(){return a}):this.geometryFunction_=u,this.geometry_=a}setZIndex(a){this.zIndex_=a}}function T(i){let a;if("function"==typeof i)a=i;else{let S;Array.isArray(i)?S=i:((0,D.h)("function"==typeof i.getZIndex,41),S=[i]),a=function(){return S}}return a}let ot=null;function K(i,a){if(!ot){const S=new Z.Z({color:"rgba(255,255,255,0.4)"}),r=new H.Z({color:"#3399CC",width:1.25});ot=[new Y({image:new j.Z({fill:S,stroke:r,radius:5}),fill:S,stroke:r})]}return ot}function b(){const i={},a=[255,255,255,1],S=[0,153,255,1];return i.Polygon=[new Y({fill:new Z.Z({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new Y({stroke:new H.Z({color:a,width:5})}),new Y({stroke:new H.Z({color:S,width:3})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new Y({image:new j.Z({radius:6,fill:new Z.Z({color:S}),stroke:new H.Z({color:a,width:1.5})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function u(i){return i.getGeometry()}const p=Y}}]);